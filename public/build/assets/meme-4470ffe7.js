var nt=(T,K)=>()=>(K||T((K={exports:{}}).exports,K),K.exports);var it=nt((Je,Ke)=>{(function(T){if(typeof Je=="object"&&typeof Ke<"u")Ke.exports=T();else if(typeof define=="function"&&define.amd)define([],T);else{var K;typeof window<"u"?K=window:typeof global<"u"?K=global:typeof self<"u"?K=self:K=this,K.GIF=T()}})(function(){return function T(K,_,S){function b(r,e){if(!_[r]){if(!K[r]){var n=typeof require=="function"&&require;if(!e&&n)return n(r,!0);if(k)return k(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var i=_[r]={exports:{}};K[r][0].call(i.exports,function(d){var c=K[r][1][d];return b(c||d)},i,i.exports,T,K,_,S)}return _[r].exports}for(var k=typeof require=="function"&&require,l=0;l<S.length;l++)b(S[l]);return b}({1:[function(T,K,_){function S(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}K.exports=S,S.EventEmitter=S,S.prototype._events=void 0,S.prototype._maxListeners=void 0,S.defaultMaxListeners=10,S.prototype.setMaxListeners=function(e){if(!k(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},S.prototype.emit=function(e){var n,t,i,d,c,o;if(this._events||(this._events={}),e==="error"&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(n=arguments[1],n instanceof Error)throw n;var u=new Error('Uncaught, unspecified "error" event. ('+n+")");throw u.context=n,u}if(t=this._events[e],r(t))return!1;if(b(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),t.apply(this,d)}else if(l(t))for(d=Array.prototype.slice.call(arguments,1),o=t.slice(),i=o.length,c=0;c<i;c++)o[c].apply(this,d);return!0},S.prototype.addListener=function(e,n){var t;if(!b(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,b(n.listener)?n.listener:n),this._events[e]?l(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,l(this._events[e])&&!this._events[e].warned&&(r(this._maxListeners)?t=S.defaultMaxListeners:t=this._maxListeners,t&&t>0&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this},S.prototype.on=S.prototype.addListener,S.prototype.once=function(e,n){if(!b(n))throw TypeError("listener must be a function");var t=!1;function i(){this.removeListener(e,i),t||(t=!0,n.apply(this,arguments))}return i.listener=n,this.on(e,i),this},S.prototype.removeListener=function(e,n){var t,i,d,c;if(!b(n))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(t=this._events[e],d=t.length,i=-1,t===n||b(t.listener)&&t.listener===n)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,n);else if(l(t)){for(c=d;c-- >0;)if(t[c]===n||t[c].listener&&t[c].listener===n){i=c;break}if(i<0)return this;t.length===1?(t.length=0,delete this._events[e]):t.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,n)}return this},S.prototype.removeAllListeners=function(e){var n,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(n in this._events)n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[e],b(t))this.removeListener(e,t);else if(t)for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},S.prototype.listeners=function(e){var n;return!this._events||!this._events[e]?n=[]:b(this._events[e])?n=[this._events[e]]:n=this._events[e].slice(),n},S.prototype.listenerCount=function(e){if(this._events){var n=this._events[e];if(b(n))return 1;if(n)return n.length}return 0},S.listenerCount=function(e,n){return e.listenerCount(n)};function b(e){return typeof e=="function"}function k(e){return typeof e=="number"}function l(e){return typeof e=="object"&&e!==null}function r(e){return e===void 0}},{}],2:[function(T,K,_){var S,b,k,l,r;r=navigator.userAgent.toLowerCase(),l=navigator.platform.toLowerCase(),S=r.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],k=S[1]==="ie"&&document.documentMode,b={name:S[1]==="version"?S[3]:S[1],version:k||parseFloat(S[1]==="opera"&&S[4]?S[4]:S[2]),platform:{name:r.match(/ip(?:ad|od|hone)/)?"ios":(r.match(/(?:webos|android)/)||l.match(/mac|win|linux/)||["other"])[0]}},b[b.name]=!0,b[b.name+parseInt(b.version,10)]=!0,b.platform[b.platform.name]=!0,K.exports=b},{}],3:[function(T,K,_){var S,b,k,l=function(t,i){for(var d in i)r.call(i,d)&&(t[d]=i[d]);function c(){this.constructor=t}return c.prototype=i.prototype,t.prototype=new c,t.__super__=i.prototype,t},r={}.hasOwnProperty,e=[].indexOf||function(t){for(var i=0,d=this.length;i<d;i++)if(i in this&&this[i]===t)return i;return-1},n=[].slice;S=T("events").EventEmitter,k=T("./browser.coffee"),b=function(t){var i,d;l(c,t),i={workerScript:"js/gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},d={delay:500,copy:!1};function c(o){var u,m,N;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(o);for(m in i)N=i[m],(u=this.options)[m]==null&&(u[m]=N)}return c.prototype.setOption=function(o,u){if(this.options[o]=u,this._canvas!=null&&(o==="width"||o==="height"))return this._canvas[o]=u},c.prototype.setOptions=function(o){var u,m,N;m=[];for(u in o)r.call(o,u)&&(N=o[u],m.push(this.setOption(u,N)));return m},c.prototype.addFrame=function(o,u){var m,N;u==null&&(u={}),m={},m.transparent=this.options.transparent;for(N in d)m[N]=u[N]||d[N];if(this.options.width==null&&this.setOption("width",o.width),this.options.height==null&&this.setOption("height",o.height),typeof ImageData<"u"&&ImageData!==null&&o instanceof ImageData)m.data=o.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&o instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&o instanceof WebGLRenderingContext)u.copy?m.data=this.getContextData(o):m.context=o;else if(o.childNodes!=null)u.copy?m.data=this.getImageData(o):m.image=o;else throw new Error("Invalid image");return this.frames.push(m)},c.prototype.render=function(){var o,u,m;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var N,O,D;for(D=[],N=0,O=this.frames.length;0<=O?N<O:N>O;0<=O?++N:--N)D.push(null);return D}).call(this),u=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(o=0,m=u;0<=m?o<m:o>m;0<=m?++o:--o)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},c.prototype.abort=function(){for(var o;o=this.activeWorkers.shift(),o!=null;)this.log("killing active worker"),o.terminate();return this.running=!1,this.emit("abort")},c.prototype.spawnWorkers=function(){var o,u,m;return o=Math.min(this.options.workers,this.frames.length),(function(){m=[];for(var N=u=this.freeWorkers.length;u<=o?N<o:N>o;u<=o?N++:N--)m.push(N);return m}).apply(this).forEach(function(N){return function(O){var D;return N.log("spawning worker "+O),D=new Worker(N.options.workerScript),D.onmessage=function(E){return N.activeWorkers.splice(N.activeWorkers.indexOf(D),1),N.freeWorkers.push(D),N.frameFinished(E.data)},N.freeWorkers.push(D)}}(this)),o},c.prototype.frameFinished=function(o){var u,m;if(this.log("frame "+o.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[o.index]=o,this.options.globalPalette===!0&&(this.options.globalPalette=o.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(u=1,m=this.freeWorkers.length;1<=m?u<m:u>m;1<=m?++u:--u)this.renderNextFrame();return e.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},c.prototype.finishRendering=function(){var o,u,m,N,O,D,E,Z,P,Y,U,B,A,M,p,C;for(Z=0,M=this.imageParts,O=0,P=M.length;O<P;O++)u=M[O],Z+=(u.data.length-1)*u.pageSize+u.cursor;for(Z+=u.pageSize-u.cursor,this.log("rendering finished - filesize "+Math.round(Z/1e3)+"kb"),o=new Uint8Array(Z),B=0,p=this.imageParts,D=0,Y=p.length;D<Y;D++)for(u=p[D],C=u.data,m=E=0,U=C.length;E<U;m=++E)A=C[m],o.set(A,B),m===u.data.length-1?B+=u.cursor:B+=u.pageSize;return N=new Blob([o],{type:"image/gif"}),this.emit("finished",N,o)},c.prototype.renderNextFrame=function(){var o,u,m;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return o=this.frames[this.nextFrame++],m=this.freeWorkers.shift(),u=this.getTask(o),this.log("starting frame "+(u.index+1)+" of "+this.frames.length),this.activeWorkers.push(m),m.postMessage(u)},c.prototype.getContextData=function(o){return o.getImageData(0,0,this.options.width,this.options.height).data},c.prototype.getImageData=function(o){var u;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),u=this._canvas.getContext("2d"),u.setFill=this.options.background,u.fillRect(0,0,this.options.width,this.options.height),u.drawImage(o,0,0),this.getContextData(u)},c.prototype.getTask=function(o){var u,m;if(u=this.frames.indexOf(o),m={index:u,last:u===this.frames.length-1,delay:o.delay,transparent:o.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:k.name==="chrome"},o.data!=null)m.data=o.data;else if(o.context!=null)m.data=this.getContextData(o.context);else if(o.image!=null)m.data=this.getImageData(o.image);else throw new Error("Invalid frame");return m},c.prototype.log=function(){var o;if(o=1<=arguments.length?n.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,o)},c}(S),K.exports=b},{"./browser.coffee":2,events:1}]},{},[3])(3)});(function(T){if(typeof Je=="object"&&typeof Ke<"u")Ke.exports=T();else if(typeof define=="function"&&define.amd)define([],T);else{var K;typeof window<"u"?K=window:typeof global<"u"?K=global:typeof self<"u"?K=self:K=this,K.gifFrames=T()}})(function(){return function T(K,_,S){function b(r,e){if(!_[r]){if(!K[r]){var n=typeof require=="function"&&require;if(!e&&n)return n(r,!0);if(k)return k(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var i=_[r]={exports:{}};K[r][0].call(i.exports,function(d){var c=K[r][1][d];return b(c||d)},i,i.exports,T,K,_,S)}return _[r].exports}for(var k=typeof require=="function"&&require,l=0;l<S.length;l++)b(S[l]);return b}({1:[function(T,K,_){var S=T("multi-integer-range").MultiRange,b=T("get-pixels-frame-info-update"),k=T("save-pixels-jpeg-js-upgrade");function l(){throw new Error("Promises not supported in your environment. Use the callback argument or a Promise polyfill.")}var r={then:l,catch:l};function e(n,t){n=n||{},t=t||function(){};var i,d,c;typeof Promise=="function"?i=new Promise(function(Z,P){d=function(Y){t(null,Y),Z(Y)},c=function(Y){t(Y),P(Y)}}):(i=r,d=function(Z){t(null,Z)},c=t);var o=n.url;if(!o)return c(new Error('"url" option is required.')),i;var u=n.frames;if(!u&&u!==0)return c(new Error('"frames" option is required.')),i;var m=n.outputType||"jpg",N=n.quality,O=n.cumulative,D=u==="all"?"all":new S(u),E=typeof window>"u"?"image/gif":".GIF";return b(o,E,function(Z,P,Y){if(Z){c(Z);return}if(P.shape.length<4){c(new Error('"url" input should be multi-frame GIF.'));return}for(var U=[],B=0,A=0;A<P.shape[0];A++)D!=="all"&&!D.has(A)||function(M){U.push({getImage:function(){if(O&&M>B){for(var p=P.pick(B),C=B+1;C<=M;C++){for(var V=P.pick(C),h=0;h<V.shape[0];h++)for(var a=0;a<V.shape[1];a++)V.get(h,a,3)===0&&(V.set(h,a,0,p.get(h,a,0)),V.set(h,a,1,p.get(h,a,1)),V.set(h,a,2,p.get(h,a,2)),V.set(h,a,3,p.get(h,a,3)));p=V}B=M}return k(P.pick(M),m,{quality:N})},frameIndex:M,frameInfo:Y&&Y[M]})}(A);d(U)}),i}K.exports=e},{"get-pixels-frame-info-update":15,"multi-integer-range":33,"save-pixels-jpeg-js-upgrade":81}],2:[function(T,K,_){(function(S){function b(p,C){if(p===C)return 0;for(var V=p.length,h=C.length,a=0,w=Math.min(V,h);a<w;++a)if(p[a]!==C[a]){V=p[a],h=C[a];break}return V<h?-1:h<V?1:0}function k(p){return S.Buffer&&typeof S.Buffer.isBuffer=="function"?S.Buffer.isBuffer(p):!!(p!=null&&p._isBuffer)}var l=T("util/"),r=Object.prototype.hasOwnProperty,e=Array.prototype.slice,n=function(){return(function(){}).name==="foo"}();function t(p){return Object.prototype.toString.call(p)}function i(p){return k(p)||typeof S.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(p):p?!!(p instanceof DataView||p.buffer&&p.buffer instanceof ArrayBuffer):!1}var d=K.exports=D,c=/\s*function\s+([^\(\s]*)\s*/;function o(p){if(l.isFunction(p)){if(n)return p.name;var C=p.toString(),V=C.match(c);return V&&V[1]}}d.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=N(this),this.generatedMessage=!0);var V=C.stackStartFunction||O;if(Error.captureStackTrace)Error.captureStackTrace(this,V);else{var h=new Error;if(h.stack){var a=h.stack,w=o(V),H=a.indexOf(`
`+w);if(H>=0){var $=a.indexOf(`
`,H+1);a=a.substring($+1)}this.stack=a}}},l.inherits(d.AssertionError,Error);function u(p,C){return typeof p=="string"?p.length<C?p:p.slice(0,C):p}function m(p){if(n||!l.isFunction(p))return l.inspect(p);var C=o(p),V=C?": "+C:"";return"[Function"+V+"]"}function N(p){return u(m(p.actual),128)+" "+p.operator+" "+u(m(p.expected),128)}function O(p,C,V,h,a){throw new d.AssertionError({message:V,actual:p,expected:C,operator:h,stackStartFunction:a})}d.fail=O;function D(p,C){p||O(p,!0,C,"==",d.ok)}d.ok=D,d.equal=function(C,V,h){C!=V&&O(C,V,h,"==",d.equal)},d.notEqual=function(C,V,h){C==V&&O(C,V,h,"!=",d.notEqual)},d.deepEqual=function(C,V,h){E(C,V,!1)||O(C,V,h,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(C,V,h){E(C,V,!0)||O(C,V,h,"deepStrictEqual",d.deepStrictEqual)};function E(p,C,V,h){if(p===C)return!0;if(k(p)&&k(C))return b(p,C)===0;if(l.isDate(p)&&l.isDate(C))return p.getTime()===C.getTime();if(l.isRegExp(p)&&l.isRegExp(C))return p.source===C.source&&p.global===C.global&&p.multiline===C.multiline&&p.lastIndex===C.lastIndex&&p.ignoreCase===C.ignoreCase;if((p===null||typeof p!="object")&&(C===null||typeof C!="object"))return V?p===C:p==C;if(i(p)&&i(C)&&t(p)===t(C)&&!(p instanceof Float32Array||p instanceof Float64Array))return b(new Uint8Array(p.buffer),new Uint8Array(C.buffer))===0;if(k(p)!==k(C))return!1;h=h||{actual:[],expected:[]};var a=h.actual.indexOf(p);return a!==-1&&a===h.expected.indexOf(C)?!0:(h.actual.push(p),h.expected.push(C),P(p,C,V,h))}function Z(p){return Object.prototype.toString.call(p)=="[object Arguments]"}function P(p,C,V,h){if(p==null||C===null||C===void 0)return!1;if(l.isPrimitive(p)||l.isPrimitive(C))return p===C;if(V&&Object.getPrototypeOf(p)!==Object.getPrototypeOf(C))return!1;var a=Z(p),w=Z(C);if(a&&!w||!a&&w)return!1;if(a)return p=e.call(p),C=e.call(C),E(p,C,V);var H=M(p),$=M(C),F,g;if(H.length!==$.length)return!1;for(H.sort(),$.sort(),g=H.length-1;g>=0;g--)if(H[g]!==$[g])return!1;for(g=H.length-1;g>=0;g--)if(F=H[g],!E(p[F],C[F],V,h))return!1;return!0}d.notDeepEqual=function(C,V,h){E(C,V,!1)&&O(C,V,h,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=Y;function Y(p,C,V){E(p,C,!0)&&O(p,C,V,"notDeepStrictEqual",Y)}d.strictEqual=function(C,V,h){C!==V&&O(C,V,h,"===",d.strictEqual)},d.notStrictEqual=function(C,V,h){C===V&&O(C,V,h,"!==",d.notStrictEqual)};function U(p,C){if(!p||!C)return!1;if(Object.prototype.toString.call(C)=="[object RegExp]")return C.test(p);try{if(p instanceof C)return!0}catch{}return Error.isPrototypeOf(C)?!1:C.call({},p)===!0}function B(p){var C;try{p()}catch(V){C=V}return C}function A(p,C,V,h){var a;if(typeof C!="function")throw new TypeError('"block" argument must be a function');typeof V=="string"&&(h=V,V=null),a=B(C),h=(V&&V.name?" ("+V.name+").":".")+(h?" "+h:"."),p&&!a&&O(a,V,"Missing expected exception"+h);var w=typeof h=="string",H=!p&&l.isError(a),$=!p&&a&&!V;if((H&&w&&U(a,V)||$)&&O(a,V,"Got unwanted exception"+h),p&&a&&V&&!U(a,V)||!p&&a)throw a}d.throws=function(p,C,V){A(!0,p,C,V)},d.doesNotThrow=function(p,C,V){A(!1,p,C,V)},d.ifError=function(p){if(p)throw p};var M=Object.keys||function(p){var C=[];for(var V in p)r.call(p,V)&&C.push(V);return C}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"util/":104}],3:[function(T,K,_){_.byteLength=t,_.toByteArray=i,_.fromByteArray=o;for(var S=[],b=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=l.length;r<e;++r)S[r]=l[r],b[l.charCodeAt(r)]=r;b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63;function n(u){var m=u.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return u[m-2]==="="?2:u[m-1]==="="?1:0}function t(u){return u.length*3/4-n(u)}function i(u){var m,N,O,D,E,Z=u.length;D=n(u),E=new k(Z*3/4-D),N=D>0?Z-4:Z;var P=0;for(m=0;m<N;m+=4)O=b[u.charCodeAt(m)]<<18|b[u.charCodeAt(m+1)]<<12|b[u.charCodeAt(m+2)]<<6|b[u.charCodeAt(m+3)],E[P++]=O>>16&255,E[P++]=O>>8&255,E[P++]=O&255;return D===2?(O=b[u.charCodeAt(m)]<<2|b[u.charCodeAt(m+1)]>>4,E[P++]=O&255):D===1&&(O=b[u.charCodeAt(m)]<<10|b[u.charCodeAt(m+1)]<<4|b[u.charCodeAt(m+2)]>>2,E[P++]=O>>8&255,E[P++]=O&255),E}function d(u){return S[u>>18&63]+S[u>>12&63]+S[u>>6&63]+S[u&63]}function c(u,m,N){for(var O,D=[],E=m;E<N;E+=3)O=(u[E]<<16)+(u[E+1]<<8)+u[E+2],D.push(d(O));return D.join("")}function o(u){for(var m,N=u.length,O=N%3,D="",E=[],Z=16383,P=0,Y=N-O;P<Y;P+=Z)E.push(c(u,P,P+Z>Y?Y:P+Z));return O===1?(m=u[N-1],D+=S[m>>2],D+=S[m<<4&63],D+="=="):O===2&&(m=(u[N-2]<<8)+u[N-1],D+=S[m>>10],D+=S[m>>4&63],D+=S[m<<2&63],D+="="),E.push(D),E.join("")}},{}],4:[function(T,K,_){},{}],5:[function(T,K,_){(function(S,b){var k=T("assert"),l=T("pako/lib/zlib/zstream"),r=T("pako/lib/zlib/deflate.js"),e=T("pako/lib/zlib/inflate.js"),n=T("pako/lib/zlib/constants");for(var t in n)_[t]=n[t];_.NONE=0,_.DEFLATE=1,_.INFLATE=2,_.GZIP=3,_.GUNZIP=4,_.DEFLATERAW=5,_.INFLATERAW=6,_.UNZIP=7;var i=31,d=139;function c(o){if(typeof o!="number"||o<_.DEFLATE||o>_.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=o,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}c.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,k(this.init_done,"close before init"),k(this.mode<=_.UNZIP),this.mode===_.DEFLATE||this.mode===_.GZIP||this.mode===_.DEFLATERAW?r.deflateEnd(this.strm):(this.mode===_.INFLATE||this.mode===_.GUNZIP||this.mode===_.INFLATERAW||this.mode===_.UNZIP)&&e.inflateEnd(this.strm),this.mode=_.NONE,this.dictionary=null},c.prototype.write=function(o,u,m,N,O,D,E){return this._write(!0,o,u,m,N,O,D,E)},c.prototype.writeSync=function(o,u,m,N,O,D,E){return this._write(!1,o,u,m,N,O,D,E)},c.prototype._write=function(o,u,m,N,O,D,E,Z){if(k.equal(arguments.length,8),k(this.init_done,"write before init"),k(this.mode!==_.NONE,"already finalized"),k.equal(!1,this.write_in_progress,"write already in progress"),k.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,k.equal(!1,u===void 0,"must provide flush value"),this.write_in_progress=!0,u!==_.Z_NO_FLUSH&&u!==_.Z_PARTIAL_FLUSH&&u!==_.Z_SYNC_FLUSH&&u!==_.Z_FULL_FLUSH&&u!==_.Z_FINISH&&u!==_.Z_BLOCK)throw new Error("Invalid flush value");if(m==null&&(m=b.alloc(0),O=0,N=0),this.strm.avail_in=O,this.strm.input=m,this.strm.next_in=N,this.strm.avail_out=Z,this.strm.output=D,this.strm.next_out=E,this.flush=u,!o)return this._process(),this._checkError()?this._afterSync():void 0;var P=this;return S.nextTick(function(){P._process(),P._after()}),this},c.prototype._afterSync=function(){var o=this.strm.avail_out,u=this.strm.avail_in;return this.write_in_progress=!1,[u,o]},c.prototype._process=function(){var o=null;switch(this.mode){case _.DEFLATE:case _.GZIP:case _.DEFLATERAW:this.err=r.deflate(this.strm,this.flush);break;case _.UNZIP:switch(this.strm.avail_in>0&&(o=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(o===null)break;if(this.strm.input[o]===i){if(this.gzip_id_bytes_read=1,o++,this.strm.avail_in===1)break}else{this.mode=_.INFLATE;break}case 1:if(o===null)break;this.strm.input[o]===d?(this.gzip_id_bytes_read=2,this.mode=_.GUNZIP):this.mode=_.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case _.INFLATE:case _.GUNZIP:case _.INFLATERAW:for(this.err=e.inflate(this.strm,this.flush),this.err===_.Z_NEED_DICT&&this.dictionary&&(this.err=e.inflateSetDictionary(this.strm,this.dictionary),this.err===_.Z_OK?this.err=e.inflate(this.strm,this.flush):this.err===_.Z_DATA_ERROR&&(this.err=_.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===_.GUNZIP&&this.err===_.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=e.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},c.prototype._checkError=function(){switch(this.err){case _.Z_OK:case _.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===_.Z_FINISH)return this._error("unexpected end of file"),!1;break;case _.Z_STREAM_END:break;case _.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},c.prototype._after=function(){if(this._checkError()){var o=this.strm.avail_out,u=this.strm.avail_in;this.write_in_progress=!1,this.callback(u,o),this.pending_close&&this.close()}},c.prototype._error=function(o){this.strm.msg&&(o=this.strm.msg),this.onerror(o,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},c.prototype.init=function(o,u,m,N,O){k(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),k(o>=8&&o<=15,"invalid windowBits"),k(u>=-1&&u<=9,"invalid compression level"),k(m>=1&&m<=9,"invalid memlevel"),k(N===_.Z_FILTERED||N===_.Z_HUFFMAN_ONLY||N===_.Z_RLE||N===_.Z_FIXED||N===_.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(u,o,m,N,O),this._setDictionary()},c.prototype.params=function(){throw new Error("deflateParams Not supported")},c.prototype.reset=function(){this._reset(),this._setDictionary()},c.prototype._init=function(o,u,m,N,O){switch(this.level=o,this.windowBits=u,this.memLevel=m,this.strategy=N,this.flush=_.Z_NO_FLUSH,this.err=_.Z_OK,(this.mode===_.GZIP||this.mode===_.GUNZIP)&&(this.windowBits+=16),this.mode===_.UNZIP&&(this.windowBits+=32),(this.mode===_.DEFLATERAW||this.mode===_.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new l,this.mode){case _.DEFLATE:case _.GZIP:case _.DEFLATERAW:this.err=r.deflateInit2(this.strm,this.level,_.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case _.INFLATE:case _.GUNZIP:case _.INFLATERAW:case _.UNZIP:this.err=e.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==_.Z_OK&&this._error("Init error"),this.dictionary=O,this.write_in_progress=!1,this.init_done=!0},c.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=_.Z_OK,this.mode){case _.DEFLATE:case _.DEFLATERAW:this.err=r.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==_.Z_OK&&this._error("Failed to set dictionary")}},c.prototype._reset=function(){switch(this.err=_.Z_OK,this.mode){case _.DEFLATE:case _.DEFLATERAW:case _.GZIP:this.err=r.deflateReset(this.strm);break;case _.INFLATE:case _.INFLATERAW:case _.GUNZIP:this.err=e.inflateReset(this.strm);break}this.err!==_.Z_OK&&this._error("Failed to reset stream")},_.Zlib=c}).call(this,T("_process"),T("buffer").Buffer)},{_process:73,assert:2,buffer:7,"pako/lib/zlib/constants":41,"pako/lib/zlib/deflate.js":43,"pako/lib/zlib/inflate.js":45,"pako/lib/zlib/zstream":49}],6:[function(T,K,_){(function(S){var b=T("buffer").Buffer,k=T("stream").Transform,l=T("./binding"),r=T("util"),e=T("assert").ok,n=T("buffer").kMaxLength,t="Cannot create final Buffer. It would be larger than 0x"+n.toString(16)+" bytes";l.Z_MIN_WINDOWBITS=8,l.Z_MAX_WINDOWBITS=15,l.Z_DEFAULT_WINDOWBITS=15,l.Z_MIN_CHUNK=64,l.Z_MAX_CHUNK=1/0,l.Z_DEFAULT_CHUNK=16*1024,l.Z_MIN_MEMLEVEL=1,l.Z_MAX_MEMLEVEL=9,l.Z_DEFAULT_MEMLEVEL=8,l.Z_MIN_LEVEL=-1,l.Z_MAX_LEVEL=9,l.Z_DEFAULT_LEVEL=l.Z_DEFAULT_COMPRESSION;for(var i=Object.keys(l),d=0;d<i.length;d++){var c=i[d];c.match(/^Z/)&&Object.defineProperty(_,c,{enumerable:!0,value:l[c],writable:!1})}for(var o={Z_OK:l.Z_OK,Z_STREAM_END:l.Z_STREAM_END,Z_NEED_DICT:l.Z_NEED_DICT,Z_ERRNO:l.Z_ERRNO,Z_STREAM_ERROR:l.Z_STREAM_ERROR,Z_DATA_ERROR:l.Z_DATA_ERROR,Z_MEM_ERROR:l.Z_MEM_ERROR,Z_BUF_ERROR:l.Z_BUF_ERROR,Z_VERSION_ERROR:l.Z_VERSION_ERROR},u=Object.keys(o),m=0;m<u.length;m++){var N=u[m];o[o[N]]=N}Object.defineProperty(_,"codes",{enumerable:!0,value:Object.freeze(o),writable:!1}),_.Deflate=E,_.Inflate=Z,_.Gzip=P,_.Gunzip=Y,_.DeflateRaw=U,_.InflateRaw=B,_.Unzip=A,_.createDeflate=function(h){return new E(h)},_.createInflate=function(h){return new Z(h)},_.createDeflateRaw=function(h){return new U(h)},_.createInflateRaw=function(h){return new B(h)},_.createGzip=function(h){return new P(h)},_.createGunzip=function(h){return new Y(h)},_.createUnzip=function(h){return new A(h)},_.deflate=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new E(a),h,w)},_.deflateSync=function(h,a){return D(new E(a),h)},_.gzip=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new P(a),h,w)},_.gzipSync=function(h,a){return D(new P(a),h)},_.deflateRaw=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new U(a),h,w)},_.deflateRawSync=function(h,a){return D(new U(a),h)},_.unzip=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new A(a),h,w)},_.unzipSync=function(h,a){return D(new A(a),h)},_.inflate=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new Z(a),h,w)},_.inflateSync=function(h,a){return D(new Z(a),h)},_.gunzip=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new Y(a),h,w)},_.gunzipSync=function(h,a){return D(new Y(a),h)},_.inflateRaw=function(h,a,w){return typeof a=="function"&&(w=a,a={}),O(new B(a),h,w)},_.inflateRawSync=function(h,a){return D(new B(a),h)};function O(h,a,w){var H=[],$=0;h.on("error",g),h.on("end",L),h.end(a),F();function F(){for(var G;(G=h.read())!==null;)H.push(G),$+=G.length;h.once("readable",F)}function g(G){h.removeListener("end",L),h.removeListener("readable",F),w(G)}function L(){var G,re=null;$>=n?re=new RangeError(t):G=b.concat(H,$),H=[],h.close(),w(re,G)}}function D(h,a){if(typeof a=="string"&&(a=b.from(a)),!b.isBuffer(a))throw new TypeError("Not a string or buffer");var w=h._finishFlushFlag;return h._processChunk(a,w)}function E(h){if(!(this instanceof E))return new E(h);p.call(this,h,l.DEFLATE)}function Z(h){if(!(this instanceof Z))return new Z(h);p.call(this,h,l.INFLATE)}function P(h){if(!(this instanceof P))return new P(h);p.call(this,h,l.GZIP)}function Y(h){if(!(this instanceof Y))return new Y(h);p.call(this,h,l.GUNZIP)}function U(h){if(!(this instanceof U))return new U(h);p.call(this,h,l.DEFLATERAW)}function B(h){if(!(this instanceof B))return new B(h);p.call(this,h,l.INFLATERAW)}function A(h){if(!(this instanceof A))return new A(h);p.call(this,h,l.UNZIP)}function M(h){return h===l.Z_NO_FLUSH||h===l.Z_PARTIAL_FLUSH||h===l.Z_SYNC_FLUSH||h===l.Z_FULL_FLUSH||h===l.Z_FINISH||h===l.Z_BLOCK}function p(h,a){var w=this;if(this._opts=h=h||{},this._chunkSize=h.chunkSize||_.Z_DEFAULT_CHUNK,k.call(this,h),h.flush&&!M(h.flush))throw new Error("Invalid flush flag: "+h.flush);if(h.finishFlush&&!M(h.finishFlush))throw new Error("Invalid flush flag: "+h.finishFlush);if(this._flushFlag=h.flush||l.Z_NO_FLUSH,this._finishFlushFlag=typeof h.finishFlush<"u"?h.finishFlush:l.Z_FINISH,h.chunkSize&&(h.chunkSize<_.Z_MIN_CHUNK||h.chunkSize>_.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+h.chunkSize);if(h.windowBits&&(h.windowBits<_.Z_MIN_WINDOWBITS||h.windowBits>_.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+h.windowBits);if(h.level&&(h.level<_.Z_MIN_LEVEL||h.level>_.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+h.level);if(h.memLevel&&(h.memLevel<_.Z_MIN_MEMLEVEL||h.memLevel>_.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+h.memLevel);if(h.strategy&&h.strategy!=_.Z_FILTERED&&h.strategy!=_.Z_HUFFMAN_ONLY&&h.strategy!=_.Z_RLE&&h.strategy!=_.Z_FIXED&&h.strategy!=_.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+h.strategy);if(h.dictionary&&!b.isBuffer(h.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new l.Zlib(a);var H=this;this._hadError=!1,this._handle.onerror=function(g,L){C(H),H._hadError=!0;var G=new Error(g);G.errno=L,G.code=_.codes[L],H.emit("error",G)};var $=_.Z_DEFAULT_COMPRESSION;typeof h.level=="number"&&($=h.level);var F=_.Z_DEFAULT_STRATEGY;typeof h.strategy=="number"&&(F=h.strategy),this._handle.init(h.windowBits||_.Z_DEFAULT_WINDOWBITS,$,h.memLevel||_.Z_DEFAULT_MEMLEVEL,F,h.dictionary),this._buffer=b.allocUnsafe(this._chunkSize),this._offset=0,this._level=$,this._strategy=F,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!w._handle},configurable:!0,enumerable:!0})}r.inherits(p,k),p.prototype.params=function(h,a,w){if(h<_.Z_MIN_LEVEL||h>_.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+h);if(a!=_.Z_FILTERED&&a!=_.Z_HUFFMAN_ONLY&&a!=_.Z_RLE&&a!=_.Z_FIXED&&a!=_.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+a);if(this._level!==h||this._strategy!==a){var H=this;this.flush(l.Z_SYNC_FLUSH,function(){e(H._handle,"zlib binding closed"),H._handle.params(h,a),H._hadError||(H._level=h,H._strategy=a,w&&w())})}else S.nextTick(w)},p.prototype.reset=function(){return e(this._handle,"zlib binding closed"),this._handle.reset()},p.prototype._flush=function(h){this._transform(b.alloc(0),"",h)},p.prototype.flush=function(h,a){var w=this,H=this._writableState;(typeof h=="function"||h===void 0&&!a)&&(a=h,h=l.Z_FULL_FLUSH),H.ended?a&&S.nextTick(a):H.ending?a&&this.once("end",a):H.needDrain?a&&this.once("drain",function(){return w.flush(h,a)}):(this._flushFlag=h,this.write(b.alloc(0),"",a))},p.prototype.close=function(h){C(this,h),S.nextTick(V,this)};function C(h,a){a&&S.nextTick(a),h._handle&&(h._handle.close(),h._handle=null)}function V(h){h.emit("close")}p.prototype._transform=function(h,a,w){var H,$=this._writableState,F=$.ending||$.ended,g=F&&(!h||$.length===h.length);if(h!==null&&!b.isBuffer(h))return w(new Error("invalid input"));if(!this._handle)return w(new Error("zlib binding closed"));g?H=this._finishFlushFlag:(H=this._flushFlag,h.length>=$.length&&(this._flushFlag=this._opts.flush||l.Z_NO_FLUSH)),this._processChunk(h,H,w)},p.prototype._processChunk=function(h,a,w){var H=h&&h.length,$=this._chunkSize-this._offset,F=0,g=this,L=typeof w=="function";if(!L){var G=[],re=0,le;this.on("error",function(z){le=z}),e(this._handle,"zlib binding closed");do var ie=this._handle.writeSync(a,h,F,H,this._buffer,this._offset,$);while(!this._hadError&&he(ie[0],ie[1]));if(this._hadError)throw le;if(re>=n)throw C(this),new RangeError(t);var ce=b.concat(G,re);return C(this),ce}e(this._handle,"zlib binding closed");var te=this._handle.write(a,h,F,H,this._buffer,this._offset,$);te.buffer=h,te.callback=he;function he(z,R){if(this&&(this.buffer=null,this.callback=null),!g._hadError){var J=$-R;if(e(J>=0,"have should not go down"),J>0){var ae=g._buffer.slice(g._offset,g._offset+J);g._offset+=J,L?g.push(ae):(G.push(ae),re+=ae.length)}if((R===0||g._offset>=g._chunkSize)&&($=g._chunkSize,g._offset=0,g._buffer=b.allocUnsafe(g._chunkSize)),R===0){if(F+=H-z,H=z,!L)return!0;var oe=g._handle.write(a,h,F,H,g._buffer,g._offset,g._chunkSize);oe.callback=he,oe.buffer=h;return}if(!L)return!1;w()}}},r.inherits(E,p),r.inherits(Z,p),r.inherits(P,p),r.inherits(Y,p),r.inherits(U,p),r.inherits(B,p),r.inherits(A,p)}).call(this,T("_process"))},{"./binding":5,_process:73,assert:2,buffer:7,stream:82,util:104}],7:[function(T,K,_){var S=T("base64-js"),b=T("ieee754");_.Buffer=e,_.SlowBuffer=O,_.INSPECT_MAX_BYTES=50;var k=2147483647;_.kMaxLength=k,e.TYPED_ARRAY_SUPPORT=l(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var x=new Uint8Array(1);return x.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},x.foo()===42}catch{return!1}}function r(x){if(x>k)throw new RangeError("Invalid typed array length");var f=new Uint8Array(x);return f.__proto__=e.prototype,f}function e(x,f,v){if(typeof x=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(x)}return n(x,f,v)}typeof Symbol<"u"&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192;function n(x,f,v){if(typeof x=="number")throw new TypeError('"value" argument must not be a number');return x instanceof ArrayBuffer?u(x,f,v):typeof x=="string"?c(x,f):m(x)}e.from=function(x,f,v){return n(x,f,v)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array;function t(x){if(typeof x!="number")throw new TypeError('"size" argument must be a number');if(x<0)throw new RangeError('"size" argument must not be negative')}function i(x,f,v){return t(x),x<=0?r(x):f!==void 0?typeof v=="string"?r(x).fill(f,v):r(x).fill(f):r(x)}e.alloc=function(x,f,v){return i(x,f,v)};function d(x){return t(x),r(x<0?0:N(x)|0)}e.allocUnsafe=function(x){return d(x)},e.allocUnsafeSlow=function(x){return d(x)};function c(x,f){if((typeof f!="string"||f==="")&&(f="utf8"),!e.isEncoding(f))throw new TypeError('"encoding" must be a valid string encoding');var v=D(x,f)|0,y=r(v),X=y.write(x,f);return X!==v&&(y=y.slice(0,X)),y}function o(x){for(var f=x.length<0?0:N(x.length)|0,v=r(f),y=0;y<f;y+=1)v[y]=x[y]&255;return v}function u(x,f,v){if(f<0||x.byteLength<f)throw new RangeError("'offset' is out of bounds");if(x.byteLength<f+(v||0))throw new RangeError("'length' is out of bounds");var y;return f===void 0&&v===void 0?y=new Uint8Array(x):v===void 0?y=new Uint8Array(x,f):y=new Uint8Array(x,f,v),y.__proto__=e.prototype,y}function m(x){if(e.isBuffer(x)){var f=N(x.length)|0,v=r(f);return v.length===0||x.copy(v,0,0,f),v}if(x){if(ee(x)||"length"in x)return typeof x.length!="number"||ve(x.length)?r(0):o(x);if(x.type==="Buffer"&&Array.isArray(x.data))return o(x.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function N(x){if(x>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return x|0}function O(x){return+x!=x&&(x=0),e.alloc(+x)}e.isBuffer=function(f){return f!=null&&f._isBuffer===!0},e.compare=function(f,v){if(!e.isBuffer(f)||!e.isBuffer(v))throw new TypeError("Arguments must be Buffers");if(f===v)return 0;for(var y=f.length,X=v.length,ne=0,se=Math.min(y,X);ne<se;++ne)if(f[ne]!==v[ne]){y=f[ne],X=v[ne];break}return y<X?-1:X<y?1:0},e.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(f,v){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return e.alloc(0);var y;if(v===void 0)for(v=0,y=0;y<f.length;++y)v+=f[y].length;var X=e.allocUnsafe(v),ne=0;for(y=0;y<f.length;++y){var se=f[y];if(!e.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(X,ne),ne+=se.length}return X};function D(x,f){if(e.isBuffer(x))return x.length;if(ee(x)||x instanceof ArrayBuffer)return x.byteLength;typeof x!="string"&&(x=""+x);var v=x.length;if(v===0)return 0;for(var y=!1;;)switch(f){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":case void 0:return z(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return ae(x).length;default:if(y)return z(x).length;f=(""+f).toLowerCase(),y=!0}}e.byteLength=D;function E(x,f,v){var y=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,f>>>=0,v<=f))return"";for(x||(x="utf8");;)switch(x){case"hex":return F(this,f,v);case"utf8":case"utf-8":return h(this,f,v);case"ascii":return H(this,f,v);case"latin1":case"binary":return $(this,f,v);case"base64":return V(this,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,f,v);default:if(y)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),y=!0}}e.prototype._isBuffer=!0;function Z(x,f,v){var y=x[f];x[f]=x[v],x[v]=y}e.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var v=0;v<f;v+=2)Z(this,v,v+1);return this},e.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var v=0;v<f;v+=4)Z(this,v,v+3),Z(this,v+1,v+2);return this},e.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var v=0;v<f;v+=8)Z(this,v,v+7),Z(this,v+1,v+6),Z(this,v+2,v+5),Z(this,v+3,v+4);return this},e.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?h(this,0,f):E.apply(this,arguments)},e.prototype.equals=function(f){if(!e.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:e.compare(this,f)===0},e.prototype.inspect=function(){var f="",v=_.INSPECT_MAX_BYTES;return this.length>0&&(f=this.toString("hex",0,v).match(/.{2}/g).join(" "),this.length>v&&(f+=" ... ")),"<Buffer "+f+">"},e.prototype.compare=function(f,v,y,X,ne){if(!e.isBuffer(f))throw new TypeError("Argument must be a Buffer");if(v===void 0&&(v=0),y===void 0&&(y=f?f.length:0),X===void 0&&(X=0),ne===void 0&&(ne=this.length),v<0||y>f.length||X<0||ne>this.length)throw new RangeError("out of range index");if(X>=ne&&v>=y)return 0;if(X>=ne)return-1;if(v>=y)return 1;if(v>>>=0,y>>>=0,X>>>=0,ne>>>=0,this===f)return 0;for(var se=ne-X,Ee=y-v,ge=Math.min(se,Ee),ye=this.slice(X,ne),we=f.slice(v,y),Se=0;Se<ge;++Se)if(ye[Se]!==we[Se]){se=ye[Se],Ee=we[Se];break}return se<Ee?-1:Ee<se?1:0};function P(x,f,v,y,X){if(x.length===0)return-1;if(typeof v=="string"?(y=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,ve(v)&&(v=X?0:x.length-1),v<0&&(v=x.length+v),v>=x.length){if(X)return-1;v=x.length-1}else if(v<0)if(X)v=0;else return-1;if(typeof f=="string"&&(f=e.from(f,y)),e.isBuffer(f))return f.length===0?-1:Y(x,f,v,y,X);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(x,f,v):Uint8Array.prototype.lastIndexOf.call(x,f,v):Y(x,[f],v,y,X);throw new TypeError("val must be string, number or Buffer")}function Y(x,f,v,y,X){var ne=1,se=x.length,Ee=f.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(x.length<2||f.length<2)return-1;ne=2,se/=2,Ee/=2,v/=2}function ge(ke,Re){return ne===1?ke[Re]:ke.readUInt16BE(Re*ne)}var ye;if(X){var we=-1;for(ye=v;ye<se;ye++)if(ge(x,ye)===ge(f,we===-1?0:ye-we)){if(we===-1&&(we=ye),ye-we+1===Ee)return we*ne}else we!==-1&&(ye-=ye-we),we=-1}else for(v+Ee>se&&(v=se-Ee),ye=v;ye>=0;ye--){for(var Se=!0,Le=0;Le<Ee;Le++)if(ge(x,ye+Le)!==ge(f,Le)){Se=!1;break}if(Se)return ye}return-1}e.prototype.includes=function(f,v,y){return this.indexOf(f,v,y)!==-1},e.prototype.indexOf=function(f,v,y){return P(this,f,v,y,!0)},e.prototype.lastIndexOf=function(f,v,y){return P(this,f,v,y,!1)};function U(x,f,v,y){v=Number(v)||0;var X=x.length-v;y?(y=Number(y),y>X&&(y=X)):y=X;var ne=f.length;if(ne%2!==0)throw new TypeError("Invalid hex string");y>ne/2&&(y=ne/2);for(var se=0;se<y;++se){var Ee=parseInt(f.substr(se*2,2),16);if(ve(Ee))return se;x[v+se]=Ee}return se}function B(x,f,v,y){return oe(z(f,x.length-v),x,v,y)}function A(x,f,v,y){return oe(R(f),x,v,y)}function M(x,f,v,y){return A(x,f,v,y)}function p(x,f,v,y){return oe(ae(f),x,v,y)}function C(x,f,v,y){return oe(J(f,x.length-v),x,v,y)}e.prototype.write=function(f,v,y,X){if(v===void 0)X="utf8",y=this.length,v=0;else if(y===void 0&&typeof v=="string")X=v,y=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(y)?(y=y>>>0,X===void 0&&(X="utf8")):(X=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ne=this.length-v;if((y===void 0||y>ne)&&(y=ne),f.length>0&&(y<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var se=!1;;)switch(X){case"hex":return U(this,f,v,y);case"utf8":case"utf-8":return B(this,f,v,y);case"ascii":return A(this,f,v,y);case"latin1":case"binary":return M(this,f,v,y);case"base64":return p(this,f,v,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,f,v,y);default:if(se)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),se=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(x,f,v){return f===0&&v===x.length?S.fromByteArray(x):S.fromByteArray(x.slice(f,v))}function h(x,f,v){v=Math.min(x.length,v);for(var y=[],X=f;X<v;){var ne=x[X],se=null,Ee=ne>239?4:ne>223?3:ne>191?2:1;if(X+Ee<=v){var ge,ye,we,Se;switch(Ee){case 1:ne<128&&(se=ne);break;case 2:ge=x[X+1],(ge&192)===128&&(Se=(ne&31)<<6|ge&63,Se>127&&(se=Se));break;case 3:ge=x[X+1],ye=x[X+2],(ge&192)===128&&(ye&192)===128&&(Se=(ne&15)<<12|(ge&63)<<6|ye&63,Se>2047&&(Se<55296||Se>57343)&&(se=Se));break;case 4:ge=x[X+1],ye=x[X+2],we=x[X+3],(ge&192)===128&&(ye&192)===128&&(we&192)===128&&(Se=(ne&15)<<18|(ge&63)<<12|(ye&63)<<6|we&63,Se>65535&&Se<1114112&&(se=Se))}}se===null?(se=65533,Ee=1):se>65535&&(se-=65536,y.push(se>>>10&1023|55296),se=56320|se&1023),y.push(se),X+=Ee}return w(y)}var a=4096;function w(x){var f=x.length;if(f<=a)return String.fromCharCode.apply(String,x);for(var v="",y=0;y<f;)v+=String.fromCharCode.apply(String,x.slice(y,y+=a));return v}function H(x,f,v){var y="";v=Math.min(x.length,v);for(var X=f;X<v;++X)y+=String.fromCharCode(x[X]&127);return y}function $(x,f,v){var y="";v=Math.min(x.length,v);for(var X=f;X<v;++X)y+=String.fromCharCode(x[X]);return y}function F(x,f,v){var y=x.length;(!f||f<0)&&(f=0),(!v||v<0||v>y)&&(v=y);for(var X="",ne=f;ne<v;++ne)X+=he(x[ne]);return X}function g(x,f,v){for(var y=x.slice(f,v),X="",ne=0;ne<y.length;ne+=2)X+=String.fromCharCode(y[ne]+y[ne+1]*256);return X}e.prototype.slice=function(f,v){var y=this.length;f=~~f,v=v===void 0?y:~~v,f<0?(f+=y,f<0&&(f=0)):f>y&&(f=y),v<0?(v+=y,v<0&&(v=0)):v>y&&(v=y),v<f&&(v=f);var X=this.subarray(f,v);return X.__proto__=e.prototype,X};function L(x,f,v){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+f>v)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUIntLE=function(f,v,y){f=f>>>0,v=v>>>0,y||L(f,v,this.length);for(var X=this[f],ne=1,se=0;++se<v&&(ne*=256);)X+=this[f+se]*ne;return X},e.prototype.readUIntBE=function(f,v,y){f=f>>>0,v=v>>>0,y||L(f,v,this.length);for(var X=this[f+--v],ne=1;v>0&&(ne*=256);)X+=this[f+--v]*ne;return X},e.prototype.readUInt8=function(f,v){return f=f>>>0,v||L(f,1,this.length),this[f]},e.prototype.readUInt16LE=function(f,v){return f=f>>>0,v||L(f,2,this.length),this[f]|this[f+1]<<8},e.prototype.readUInt16BE=function(f,v){return f=f>>>0,v||L(f,2,this.length),this[f]<<8|this[f+1]},e.prototype.readUInt32LE=function(f,v){return f=f>>>0,v||L(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},e.prototype.readUInt32BE=function(f,v){return f=f>>>0,v||L(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},e.prototype.readIntLE=function(f,v,y){f=f>>>0,v=v>>>0,y||L(f,v,this.length);for(var X=this[f],ne=1,se=0;++se<v&&(ne*=256);)X+=this[f+se]*ne;return ne*=128,X>=ne&&(X-=Math.pow(2,8*v)),X},e.prototype.readIntBE=function(f,v,y){f=f>>>0,v=v>>>0,y||L(f,v,this.length);for(var X=v,ne=1,se=this[f+--X];X>0&&(ne*=256);)se+=this[f+--X]*ne;return ne*=128,se>=ne&&(se-=Math.pow(2,8*v)),se},e.prototype.readInt8=function(f,v){return f=f>>>0,v||L(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},e.prototype.readInt16LE=function(f,v){f=f>>>0,v||L(f,2,this.length);var y=this[f]|this[f+1]<<8;return y&32768?y|4294901760:y},e.prototype.readInt16BE=function(f,v){f=f>>>0,v||L(f,2,this.length);var y=this[f+1]|this[f]<<8;return y&32768?y|4294901760:y},e.prototype.readInt32LE=function(f,v){return f=f>>>0,v||L(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},e.prototype.readInt32BE=function(f,v){return f=f>>>0,v||L(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},e.prototype.readFloatLE=function(f,v){return f=f>>>0,v||L(f,4,this.length),b.read(this,f,!0,23,4)},e.prototype.readFloatBE=function(f,v){return f=f>>>0,v||L(f,4,this.length),b.read(this,f,!1,23,4)},e.prototype.readDoubleLE=function(f,v){return f=f>>>0,v||L(f,8,this.length),b.read(this,f,!0,52,8)},e.prototype.readDoubleBE=function(f,v){return f=f>>>0,v||L(f,8,this.length),b.read(this,f,!1,52,8)};function G(x,f,v,y,X,ne){if(!e.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>X||f<ne)throw new RangeError('"value" argument is out of bounds');if(v+y>x.length)throw new RangeError("Index out of range")}e.prototype.writeUIntLE=function(f,v,y,X){if(f=+f,v=v>>>0,y=y>>>0,!X){var ne=Math.pow(2,8*y)-1;G(this,f,v,y,ne,0)}var se=1,Ee=0;for(this[v]=f&255;++Ee<y&&(se*=256);)this[v+Ee]=f/se&255;return v+y},e.prototype.writeUIntBE=function(f,v,y,X){if(f=+f,v=v>>>0,y=y>>>0,!X){var ne=Math.pow(2,8*y)-1;G(this,f,v,y,ne,0)}var se=y-1,Ee=1;for(this[v+se]=f&255;--se>=0&&(Ee*=256);)this[v+se]=f/Ee&255;return v+y},e.prototype.writeUInt8=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,1,255,0),this[v]=f&255,v+1},e.prototype.writeUInt16LE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,2,65535,0),this[v]=f&255,this[v+1]=f>>>8,v+2},e.prototype.writeUInt16BE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,2,65535,0),this[v]=f>>>8,this[v+1]=f&255,v+2},e.prototype.writeUInt32LE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,4,4294967295,0),this[v+3]=f>>>24,this[v+2]=f>>>16,this[v+1]=f>>>8,this[v]=f&255,v+4},e.prototype.writeUInt32BE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,4,4294967295,0),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4},e.prototype.writeIntLE=function(f,v,y,X){if(f=+f,v=v>>>0,!X){var ne=Math.pow(2,8*y-1);G(this,f,v,y,ne-1,-ne)}var se=0,Ee=1,ge=0;for(this[v]=f&255;++se<y&&(Ee*=256);)f<0&&ge===0&&this[v+se-1]!==0&&(ge=1),this[v+se]=(f/Ee>>0)-ge&255;return v+y},e.prototype.writeIntBE=function(f,v,y,X){if(f=+f,v=v>>>0,!X){var ne=Math.pow(2,8*y-1);G(this,f,v,y,ne-1,-ne)}var se=y-1,Ee=1,ge=0;for(this[v+se]=f&255;--se>=0&&(Ee*=256);)f<0&&ge===0&&this[v+se+1]!==0&&(ge=1),this[v+se]=(f/Ee>>0)-ge&255;return v+y},e.prototype.writeInt8=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,1,127,-128),f<0&&(f=255+f+1),this[v]=f&255,v+1},e.prototype.writeInt16LE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,2,32767,-32768),this[v]=f&255,this[v+1]=f>>>8,v+2},e.prototype.writeInt16BE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,2,32767,-32768),this[v]=f>>>8,this[v+1]=f&255,v+2},e.prototype.writeInt32LE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,4,2147483647,-2147483648),this[v]=f&255,this[v+1]=f>>>8,this[v+2]=f>>>16,this[v+3]=f>>>24,v+4},e.prototype.writeInt32BE=function(f,v,y){return f=+f,v=v>>>0,y||G(this,f,v,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4};function re(x,f,v,y,X,ne){if(v+y>x.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function le(x,f,v,y,X){return f=+f,v=v>>>0,X||re(x,f,v,4),b.write(x,f,v,y,23,4),v+4}e.prototype.writeFloatLE=function(f,v,y){return le(this,f,v,!0,y)},e.prototype.writeFloatBE=function(f,v,y){return le(this,f,v,!1,y)};function ie(x,f,v,y,X){return f=+f,v=v>>>0,X||re(x,f,v,8),b.write(x,f,v,y,52,8),v+8}e.prototype.writeDoubleLE=function(f,v,y){return ie(this,f,v,!0,y)},e.prototype.writeDoubleBE=function(f,v,y){return ie(this,f,v,!1,y)},e.prototype.copy=function(f,v,y,X){if(y||(y=0),!X&&X!==0&&(X=this.length),v>=f.length&&(v=f.length),v||(v=0),X>0&&X<y&&(X=y),X===y||f.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("sourceStart out of bounds");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),f.length-v<X-y&&(X=f.length-v+y);var ne=X-y,se;if(this===f&&y<v&&v<X)for(se=ne-1;se>=0;--se)f[se+v]=this[se+y];else if(ne<1e3)for(se=0;se<ne;++se)f[se+v]=this[se+y];else Uint8Array.prototype.set.call(f,this.subarray(y,y+ne),v);return ne},e.prototype.fill=function(f,v,y,X){if(typeof f=="string"){if(typeof v=="string"?(X=v,v=0,y=this.length):typeof y=="string"&&(X=y,y=this.length),f.length===1){var ne=f.charCodeAt(0);ne<256&&(f=ne)}if(X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!e.isEncoding(X))throw new TypeError("Unknown encoding: "+X)}else typeof f=="number"&&(f=f&255);if(v<0||this.length<v||this.length<y)throw new RangeError("Out of range index");if(y<=v)return this;v=v>>>0,y=y===void 0?this.length:y>>>0,f||(f=0);var se;if(typeof f=="number")for(se=v;se<y;++se)this[se]=f;else{var Ee=e.isBuffer(f)?f:new e(f,X),ge=Ee.length;for(se=0;se<y-v;++se)this[se+v]=Ee[se%ge]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function te(x){if(x=x.trim().replace(ce,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function he(x){return x<16?"0"+x.toString(16):x.toString(16)}function z(x,f){f=f||1/0;for(var v,y=x.length,X=null,ne=[],se=0;se<y;++se){if(v=x.charCodeAt(se),v>55295&&v<57344){if(!X){if(v>56319){(f-=3)>-1&&ne.push(239,191,189);continue}else if(se+1===y){(f-=3)>-1&&ne.push(239,191,189);continue}X=v;continue}if(v<56320){(f-=3)>-1&&ne.push(239,191,189),X=v;continue}v=(X-55296<<10|v-56320)+65536}else X&&(f-=3)>-1&&ne.push(239,191,189);if(X=null,v<128){if((f-=1)<0)break;ne.push(v)}else if(v<2048){if((f-=2)<0)break;ne.push(v>>6|192,v&63|128)}else if(v<65536){if((f-=3)<0)break;ne.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((f-=4)<0)break;ne.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return ne}function R(x){for(var f=[],v=0;v<x.length;++v)f.push(x.charCodeAt(v)&255);return f}function J(x,f){for(var v,y,X,ne=[],se=0;se<x.length&&!((f-=2)<0);++se)v=x.charCodeAt(se),y=v>>8,X=v%256,ne.push(X),ne.push(y);return ne}function ae(x){return S.toByteArray(te(x))}function oe(x,f,v,y){for(var X=0;X<y&&!(X+v>=f.length||X>=x.length);++X)f[X+v]=x[X];return X}function ee(x){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(x)}function ve(x){return x!==x}},{"base64-js":3,ieee754:25}],8:[function(T,K,_){(function(S){var b=T("readable-stream").Readable,k=T("util");K.exports=l;function l(r,e){if(!(this instanceof l))return new l(r,e);b.call(this,e),r==null&&(r=String(r)),this._obj=r}k.inherits(l,b),l.prototype._read=function(r){var e=this._obj;typeof e=="string"?this.push(new S(e)):S.isBuffer(e)?this.push(e):this.push(new S(JSON.stringify(e))),this.push(null)}}).call(this,T("buffer").Buffer)},{buffer:7,"readable-stream":79,util:104}],9:[function(T,K,_){(function(S){function b(D){return Array.isArray?Array.isArray(D):O(D)==="[object Array]"}_.isArray=b;function k(D){return typeof D=="boolean"}_.isBoolean=k;function l(D){return D===null}_.isNull=l;function r(D){return D==null}_.isNullOrUndefined=r;function e(D){return typeof D=="number"}_.isNumber=e;function n(D){return typeof D=="string"}_.isString=n;function t(D){return typeof D=="symbol"}_.isSymbol=t;function i(D){return D===void 0}_.isUndefined=i;function d(D){return O(D)==="[object RegExp]"}_.isRegExp=d;function c(D){return typeof D=="object"&&D!==null}_.isObject=c;function o(D){return O(D)==="[object Date]"}_.isDate=o;function u(D){return O(D)==="[object Error]"||D instanceof Error}_.isError=u;function m(D){return typeof D=="function"}_.isFunction=m;function N(D){return D===null||typeof D=="boolean"||typeof D=="number"||typeof D=="string"||typeof D=="symbol"||typeof D>"u"}_.isPrimitive=N,_.isBuffer=S.isBuffer;function O(D){return Object.prototype.toString.call(D)}}).call(this,{isBuffer:T("../../is-buffer/index.js")})},{"../../is-buffer/index.js":28}],10:[function(T,K,_){var S=T("./lib/thunk.js");function b(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function k(l){var r=new b;r.pre=l.pre,r.body=l.body,r.post=l.post;var e=l.args.slice(0);r.argTypes=e;for(var n=0;n<e.length;++n){var t=e[n];if(t==="array"||typeof t=="object"&&t.blockIndices){if(r.argTypes[n]="array",r.arrayArgs.push(n),r.arrayBlockIndices.push(t.blockIndices?t.blockIndices:0),r.shimArgs.push("array"+n),n<r.pre.args.length&&r.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<r.post.args.length&&r.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(t==="scalar")r.scalarArgs.push(n),r.shimArgs.push("scalar"+n);else if(t==="index"){if(r.indexArgs.push(n),n<r.pre.args.length&&r.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<r.body.args.length&&r.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<r.post.args.length&&r.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(t==="shape"){if(r.shapeArgs.push(n),n<r.pre.args.length&&r.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<r.body.args.length&&r.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<r.post.args.length&&r.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof t=="object"&&t.offset)r.argTypes[n]="offset",r.offsetArgs.push({array:t.array,offset:t.offset}),r.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+e[n])}if(r.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(r.pre.args.length>e.length)throw new Error("cwise: Too many arguments in pre() block");if(r.body.args.length>e.length)throw new Error("cwise: Too many arguments in body() block");if(r.post.args.length>e.length)throw new Error("cwise: Too many arguments in post() block");return r.debug=!!l.printCode||!!l.debug,r.funcName=l.funcName||"cwise",r.blockSize=l.blockSize||64,S(r)}K.exports=k},{"./lib/thunk.js":12}],11:[function(T,K,_){var S=T("uniq");function b(t,i,d){var c=t.length,o=i.arrayArgs.length,u=i.indexArgs.length>0,m=[],N=[],O=0,D=0,E,Z;for(E=0;E<c;++E)N.push(["i",E,"=0"].join(""));for(Z=0;Z<o;++Z)for(E=0;E<c;++E)D=O,O=t[E],E===0?N.push(["d",Z,"s",E,"=t",Z,"p",O].join("")):N.push(["d",Z,"s",E,"=(t",Z,"p",O,"-s",D,"*t",Z,"p",D,")"].join(""));for(N.length>0&&m.push("var "+N.join(",")),E=c-1;E>=0;--E)O=t[E],m.push(["for(i",E,"=0;i",E,"<s",O,";++i",E,"){"].join(""));for(m.push(d),E=0;E<c;++E){for(D=O,O=t[E],Z=0;Z<o;++Z)m.push(["p",Z,"+=d",Z,"s",E].join(""));u&&(E>0&&m.push(["index[",D,"]-=s",D].join("")),m.push(["++index[",O,"]"].join(""))),m.push("}")}return m.join(`
`)}function k(t,i,d,c){for(var o=i.length,u=d.arrayArgs.length,m=d.blockSize,N=d.indexArgs.length>0,O=[],D=0;D<u;++D)O.push(["var offset",D,"=p",D].join(""));for(var D=t;D<o;++D)O.push(["for(var j"+D+"=SS[",i[D],"]|0;j",D,">0;){"].join("")),O.push(["if(j",D,"<",m,"){"].join("")),O.push(["s",i[D],"=j",D].join("")),O.push(["j",D,"=0"].join("")),O.push(["}else{s",i[D],"=",m].join("")),O.push(["j",D,"-=",m,"}"].join("")),N&&O.push(["index[",i[D],"]=j",D].join(""));for(var D=0;D<u;++D){for(var E=["offset"+D],Z=t;Z<o;++Z)E.push(["j",Z,"*t",D,"p",i[Z]].join(""));O.push(["p",D,"=(",E.join("+"),")"].join(""))}O.push(b(i,d,c));for(var D=t;D<o;++D)O.push("}");return O.join(`
`)}function l(t){for(var i=0,d=t[0].length;i<d;){for(var c=1;c<t.length;++c)if(t[c][i]!==t[0][i])return i;++i}return i}function r(t,i,d){for(var c=t.body,o=[],u=[],m=0;m<t.args.length;++m){var N=t.args[m];if(!(N.count<=0)){var O=new RegExp(N.name,"g"),D="",E=i.arrayArgs.indexOf(m);switch(i.argTypes[m]){case"offset":var Z=i.offsetArgIndex.indexOf(m),P=i.offsetArgs[Z];E=P.array,D="+q"+Z;case"array":D="p"+E+D;var Y="l"+m,U="a"+E;if(i.arrayBlockIndices[E]===0)N.count===1?d[E]==="generic"?N.lvalue?(o.push(["var ",Y,"=",U,".get(",D,")"].join("")),c=c.replace(O,Y),u.push([U,".set(",D,",",Y,")"].join(""))):c=c.replace(O,[U,".get(",D,")"].join("")):c=c.replace(O,[U,"[",D,"]"].join("")):d[E]==="generic"?(o.push(["var ",Y,"=",U,".get(",D,")"].join("")),c=c.replace(O,Y),N.lvalue&&u.push([U,".set(",D,",",Y,")"].join(""))):(o.push(["var ",Y,"=",U,"[",D,"]"].join("")),c=c.replace(O,Y),N.lvalue&&u.push([U,"[",D,"]=",Y].join("")));else{for(var B=[N.name],A=[D],M=0;M<Math.abs(i.arrayBlockIndices[E]);M++)B.push("\\s*\\[([^\\]]+)\\]"),A.push("$"+(M+1)+"*t"+E+"b"+M);if(O=new RegExp(B.join(""),"g"),D=A.join("+"),d[E]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");c=c.replace(O,[U,"[",D,"]"].join(""))}break;case"scalar":c=c.replace(O,"Y"+i.scalarArgs.indexOf(m));break;case"index":c=c.replace(O,"index");break;case"shape":c=c.replace(O,"shape");break}}}return[o.join(`
`),c,u.join(`
`)].join(`
`).trim()}function e(t){for(var i=new Array(t.length),d=!0,c=0;c<t.length;++c){var o=t[c],u=o.match(/\d+/);u?u=u[0]:u="",o.charAt(0)===0?i[c]="u"+o.charAt(1)+u:i[c]=o.charAt(0)+u,c>0&&(d=d&&i[c]===i[c-1])}return d?i[0]:i.join("")}function n(t,i){for(var d=i[1].length-Math.abs(t.arrayBlockIndices[0])|0,c=new Array(t.arrayArgs.length),o=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)o[u]=i[2*u],c[u]=i[2*u+1];for(var m=[],N=[],O=[],D=[],E=[],u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(O.push(0),D.push(d),m.push(d),N.push(d+t.arrayBlockIndices[u])):(O.push(t.arrayBlockIndices[u]),D.push(t.arrayBlockIndices[u]+d),m.push(0),N.push(t.arrayBlockIndices[u]));for(var Z=[],P=0;P<c[u].length;P++)O[u]<=c[u][P]&&c[u][P]<D[u]&&Z.push(c[u][P]-O[u]);E.push(Z)}for(var Y=["SS"],U=["'use strict'"],B=[],P=0;P<d;++P)B.push(["s",P,"=SS[",P,"]"].join(""));for(var u=0;u<t.arrayArgs.length;++u){Y.push("a"+u),Y.push("t"+u),Y.push("p"+u);for(var P=0;P<d;++P)B.push(["t",u,"p",P,"=t",u,"[",O[u]+P,"]"].join(""));for(var P=0;P<Math.abs(t.arrayBlockIndices[u]);++P)B.push(["t",u,"b",P,"=t",u,"[",m[u]+P,"]"].join(""))}for(var u=0;u<t.scalarArgs.length;++u)Y.push("Y"+u);if(t.shapeArgs.length>0&&B.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var A=new Array(d),u=0;u<d;++u)A[u]="0";B.push(["index=[",A.join(","),"]"].join(""))}for(var u=0;u<t.offsetArgs.length;++u){for(var M=t.offsetArgs[u],p=[],P=0;P<M.offset.length;++P)M.offset[P]!==0&&(M.offset[P]===1?p.push(["t",M.array,"p",P].join("")):p.push([M.offset[P],"*t",M.array,"p",P].join("")));p.length===0?B.push("q"+u+"=0"):B.push(["q",u,"=",p.join("+")].join(""))}var C=S([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));B=B.concat(C),B.length>0&&U.push("var "+B.join(","));for(var u=0;u<t.arrayArgs.length;++u)U.push("p"+u+"|=0");t.pre.body.length>3&&U.push(r(t.pre,t,o));var V=r(t.body,t,o),h=l(E);h<d?U.push(k(h,E[0],t,V)):U.push(b(E[0],t,V)),t.post.body.length>3&&U.push(r(t.post,t,o)),t.debug&&console.log("-----Generated cwise routine for ",i,`:
`+U.join(`
`)+`
----------`);var a=[t.funcName||"unnamed","_cwise_loop_",c[0].join("s"),"m",h,e(o)].join(""),w=new Function(["function ",a,"(",Y.join(","),"){",U.join(`
`),"} return ",a].join(""));return w()}K.exports=n},{uniq:100}],12:[function(T,K,_){var S=T("./compile.js");function b(k){var l=["'use strict'","var CACHED={}"],r=[],e=k.funcName+"_cwise_thunk";l.push(["return function ",e,"(",k.shimArgs.join(","),"){"].join(""));for(var n=[],t=[],i=[["array",k.arrayArgs[0],".shape.slice(",Math.max(0,k.arrayBlockIndices[0]),k.arrayBlockIndices[0]<0?","+k.arrayBlockIndices[0]+")":")"].join("")],d=[],c=[],o=0;o<k.arrayArgs.length;++o){var u=k.arrayArgs[o];r.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),n.push("t"+u),n.push("r"+u),t.push("t"+u),t.push("r"+u+".join()"),i.push("array"+u+".data"),i.push("array"+u+".stride"),i.push("array"+u+".offset|0"),o>0&&(d.push("array"+k.arrayArgs[0]+".shape.length===array"+u+".shape.length+"+(Math.abs(k.arrayBlockIndices[0])-Math.abs(k.arrayBlockIndices[o]))),c.push("array"+k.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,k.arrayBlockIndices[0])+"]===array"+u+".shape[shapeIndex+"+Math.max(0,k.arrayBlockIndices[o])+"]"))}k.arrayArgs.length>1&&(l.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),l.push("for(var shapeIndex=array"+k.arrayArgs[0]+".shape.length-"+Math.abs(k.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),l.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),l.push("}"));for(var o=0;o<k.scalarArgs.length;++o)i.push("scalar"+k.scalarArgs[o]);r.push(["type=[",t.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),l.push("var "+r.join(",")),l.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",i.join(","),")}"].join("")),k.debug&&console.log(`-----Generated thunk:
`+l.join(`
`)+`
----------`);var m=new Function("compile",l.join(`
`));return m(S.bind(void 0,k))}K.exports=b},{"./compile.js":11}],13:[function(T,K,_){(function(S){K.exports=b;function b(k){if(!/^data\:/i.test(k))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');k=k.replace(/\r?\n/g,"");var l=k.indexOf(",");if(l===-1||l<=4)throw new TypeError("malformed data: URI");for(var r=k.substring(5,l).split(";"),e=!1,n="US-ASCII",t=0;t<r.length;t++)r[t]=="base64"?e=!0:r[t].indexOf("charset=")==0&&(n=r[t].substring(8));var i=unescape(k.substring(l+1)),d=e?"base64":"ascii",c=new S(i,d);return c.type=r[0]||"text/plain",c.charset=n,c}}).call(this,T("buffer").Buffer)},{buffer:7}],14:[function(T,K,_){var S=Object.create||U,b=Object.keys||B,k=Function.prototype.bind||A;function l(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=S(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}K.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var r=10,e;try{var n={};Object.defineProperty&&Object.defineProperty(n,"x",{value:0}),e=n.x===0}catch{e=!1}e?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(M){if(typeof M!="number"||M<0||M!==M)throw new TypeError('"defaultMaxListeners" must be a positive number');r=M}}):l.defaultMaxListeners=r,l.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||isNaN(p))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=p,this};function t(M){return M._maxListeners===void 0?l.defaultMaxListeners:M._maxListeners}l.prototype.getMaxListeners=function(){return t(this)};function i(M,p,C){if(p)M.call(C);else for(var V=M.length,h=P(M,V),a=0;a<V;++a)h[a].call(C)}function d(M,p,C,V){if(p)M.call(C,V);else for(var h=M.length,a=P(M,h),w=0;w<h;++w)a[w].call(C,V)}function c(M,p,C,V,h){if(p)M.call(C,V,h);else for(var a=M.length,w=P(M,a),H=0;H<a;++H)w[H].call(C,V,h)}function o(M,p,C,V,h,a){if(p)M.call(C,V,h,a);else for(var w=M.length,H=P(M,w),$=0;$<w;++$)H[$].call(C,V,h,a)}function u(M,p,C,V){if(p)M.apply(C,V);else for(var h=M.length,a=P(M,h),w=0;w<h;++w)a[w].apply(C,V)}l.prototype.emit=function(p){var C,V,h,a,w,H,$=p==="error";if(H=this._events,H)$=$&&H.error==null;else if(!$)return!1;if($){if(arguments.length>1&&(C=arguments[1]),C instanceof Error)throw C;var F=new Error('Unhandled "error" event. ('+C+")");throw F.context=C,F}if(V=H[p],!V)return!1;var g=typeof V=="function";switch(h=arguments.length,h){case 1:i(V,g,this);break;case 2:d(V,g,this,arguments[1]);break;case 3:c(V,g,this,arguments[1],arguments[2]);break;case 4:o(V,g,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(h-1),w=1;w<h;w++)a[w-1]=arguments[w];u(V,g,this,a)}return!0};function m(M,p,C,V){var h,a,w;if(typeof C!="function")throw new TypeError('"listener" argument must be a function');if(a=M._events,a?(a.newListener&&(M.emit("newListener",p,C.listener?C.listener:C),a=M._events),w=a[p]):(a=M._events=S(null),M._eventsCount=0),!w)w=a[p]=C,++M._eventsCount;else if(typeof w=="function"?w=a[p]=V?[C,w]:[w,C]:V?w.unshift(C):w.push(C),!w.warned&&(h=t(M),h&&h>0&&w.length>h)){w.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+w.length+' "'+String(p)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');H.name="MaxListenersExceededWarning",H.emitter=M,H.type=p,H.count=w.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",H.name,H.message)}return M}l.prototype.addListener=function(p,C){return m(this,p,C,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(p,C){return m(this,p,C,!0)};function N(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var M=new Array(arguments.length),p=0;p<M.length;++p)M[p]=arguments[p];this.listener.apply(this.target,M)}}function O(M,p,C){var V={fired:!1,wrapFn:void 0,target:M,type:p,listener:C},h=k.call(N,V);return h.listener=C,V.wrapFn=h,h}l.prototype.once=function(p,C){if(typeof C!="function")throw new TypeError('"listener" argument must be a function');return this.on(p,O(this,p,C)),this},l.prototype.prependOnceListener=function(p,C){if(typeof C!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(p,O(this,p,C)),this},l.prototype.removeListener=function(p,C){var V,h,a,w,H;if(typeof C!="function")throw new TypeError('"listener" argument must be a function');if(h=this._events,!h)return this;if(V=h[p],!V)return this;if(V===C||V.listener===C)--this._eventsCount===0?this._events=S(null):(delete h[p],h.removeListener&&this.emit("removeListener",p,V.listener||C));else if(typeof V!="function"){for(a=-1,w=V.length-1;w>=0;w--)if(V[w]===C||V[w].listener===C){H=V[w].listener,a=w;break}if(a<0)return this;a===0?V.shift():Z(V,a),V.length===1&&(h[p]=V[0]),h.removeListener&&this.emit("removeListener",p,H||C)}return this},l.prototype.removeAllListeners=function(p){var C,V,h;if(V=this._events,!V)return this;if(!V.removeListener)return arguments.length===0?(this._events=S(null),this._eventsCount=0):V[p]&&(--this._eventsCount===0?this._events=S(null):delete V[p]),this;if(arguments.length===0){var a=b(V),w;for(h=0;h<a.length;++h)w=a[h],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=S(null),this._eventsCount=0,this}if(C=V[p],typeof C=="function")this.removeListener(p,C);else if(C)for(h=C.length-1;h>=0;h--)this.removeListener(p,C[h]);return this};function D(M,p,C){var V=M._events;if(!V)return[];var h=V[p];return h?typeof h=="function"?C?[h.listener||h]:[h]:C?Y(h):P(h,h.length):[]}l.prototype.listeners=function(p){return D(this,p,!0)},l.prototype.rawListeners=function(p){return D(this,p,!1)},l.listenerCount=function(M,p){return typeof M.listenerCount=="function"?M.listenerCount(p):E.call(M,p)},l.prototype.listenerCount=E;function E(M){var p=this._events;if(p){var C=p[M];if(typeof C=="function")return 1;if(C)return C.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Z(M,p){for(var C=p,V=C+1,h=M.length;V<h;C+=1,V+=1)M[C]=M[V];M.pop()}function P(M,p){for(var C=new Array(p),V=0;V<p;++V)C[V]=M[V];return C}function Y(M){for(var p=new Array(M.length),C=0;C<p.length;++C)p[C]=M[C].listener||M[C];return p}function U(M){var p=function(){};return p.prototype=M,new p}function B(M){for(var p in M)Object.prototype.hasOwnProperty.call(M,p);return p}function A(M){var p=this;return function(){return p.apply(M,arguments)}}},{}],15:[function(T,K,_){(function(S,b){var k=T("path"),l=T("ndarray"),r=T("omggif").GifReader;T("ndarray-pack"),T("through");var e=T("data-uri-to-buffer");function n(o,u){var m=new Image;m.crossOrigin="Anonymous",m.onload=function(){var N=document.createElement("canvas");N.width=m.width,N.height=m.height;var O=N.getContext("2d");O.drawImage(m,0,0);var D=O.getImageData(0,0,m.width,m.height);u(null,l(new Uint8Array(D.data),[m.width,m.height,4],[4,4*m.width,1],0))},m.onerror=function(N){u(N)},m.src=o}function t(o,u){var m;try{m=new r(o)}catch(P){u(P);return}if(m.numFrames()>0){var N=[],O=[m.numFrames(),m.height,m.width,4],D=new Uint8Array(O[0]*O[1]*O[2]*O[3]),E=l(D,O);try{for(var Z=0;Z<m.numFrames();++Z)m.decodeAndBlitFrameRGBA(Z,D.subarray(E.index(Z,0,0,0),E.index(Z+1,0,0,0))),N.push(m.frameInfo(Z))}catch(P){u(P);return}u(null,E.transpose(0,2,1),N)}else{var O=[m.height,m.width,4],D=new Uint8Array(O[0]*O[1]*O[2]),E=l(D,O);try{m.decodeAndBlitFrameRGBA(0,D)}catch(B){u(B);return}u(null,E.transpose(1,0))}}function i(o,u){var m=new XMLHttpRequest;m.open("GET",o,!0),m.responseType="arraybuffer",m.overrideMimeType&&m.overrideMimeType("application/binary"),m.onerror=function(N){u(N)},m.onload=function(){if(m.readyState===4){var N=new Uint8Array(m.response);t(N,u)}},m.send()}function d(o){if(o[0]===void 0){for(var u=o.length,m=new Uint8Array(u),N=0;N<u;++N)m[N]=o.get(N);return m}else return new Uint8Array(o)}function c(o,u){b.nextTick(function(){try{var m=e(o);m?t(d(m),u):u(new Error("Error parsing data URI"))}catch(N){u(N)}})}K.exports=function(u,m,N){N||(N=m,m="");var O=k.extname(u);switch(m||O.toUpperCase()){case".GIF":i(u,N);break;default:S.isBuffer(u)&&(u="data:"+m+";base64,"+u.toString("base64")),u.indexOf("data:image/gif;")===0?c(u,N):n(u,N)}}}).call(this,{isBuffer:T("../is-buffer/index.js")},T("_process"))},{"../is-buffer/index.js":28,_process:73,"data-uri-to-buffer":13,ndarray:37,"ndarray-pack":35,omggif:38,path:50,through:99}],16:[function(T,K,_){(function(S){T("assert"),T("events").EventEmitter;var b=T("readable-stream"),k=T("util"),l=T("./TypedNeuQuant.js"),r=T("./LZWEncoder.js");function e(t){b.call(this,t),this.okayToPush=!0,this.resetData()}k.inherits(e,b),e.prototype._read=function(){this.okayToPush=!0},e.prototype.resetData=function(){this.data=[]},e.prototype.flushData=function(){if(!this.okayToPush){var t=new Error("GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.");return this.emit("error",t)}var i=new S(this.data);this.resetData(),this.okayToPush=this.push(i)},e.prototype.writeByte=function(t){this.data.push(t)},e.prototype.writeUTFBytes=function(t){for(var i=t.length,d=0;d<i;d++)this.writeByte(t.charCodeAt(d))},e.prototype.writeBytes=function(t,i,d){for(var c=d||t.length,o=i||0;o<c;o++)this.writeByte(t[o])};function n(t,i,d){d=d||{};var c=d.highWaterMark;e.call(this,{highWaterMark:c||c===0?c:64*1024}),this.width=~~t,this.height=~~i,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=[],this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10;var o=this;function u(){o.flushData()}this.on("writeHeader#stop",u),this.on("frame#stop",u),this.on("finish#stop",function(){u(),o.push(null)})}k.inherits(n,e),n.prototype.setDelay=function(t){this.delay=Math.round(t/10)},n.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},n.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},n.prototype.setRepeat=function(t){this.repeat=t},n.prototype.setTransparent=function(t){this.transparent=t},n.prototype.analyzeImage=function(t){this.setImagePixels(this.removeAlphaChannel(t)),this.analyzePixels()},n.prototype.writeImageInfo=function(){this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.firstFrame=!1},n.prototype.outputImage=function(){this.writePixels()},n.prototype.addFrame=function(t){this.emit("frame#start"),this.analyzeImage(t),this.writeImageInfo(),this.outputImage(),this.emit("frame#stop")},n.prototype.finish=function(){this.emit("finish#start"),this.writeByte(59),this.emit("finish#stop")},n.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},n.prototype.writeHeader=function(){this.emit("writeHeader#start"),this.writeUTFBytes("GIF89a"),this.emit("writeHeader#stop")},n.prototype.analyzePixels=function(){var t=this.pixels.length,i=t/3;this.indexedPixels=new Uint8Array(i);var d=new l(this.pixels,this.sample);d.buildColormap(),this.colorTab=d.getColormap();for(var c=0,o=0;o<i;o++){var u=d.lookupRGB(this.pixels[c++]&255,this.pixels[c++]&255,this.pixels[c++]&255);this.usedEntry[u]=!0,this.indexedPixels[o]=u}this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent))},n.prototype.findClosest=function(t){if(this.colorTab===null)return-1;for(var i=(t&16711680)>>16,d=(t&65280)>>8,c=t&255,o=0,u=256*256*256,m=this.colorTab.length,N=0;N<m;){var O=i-(this.colorTab[N++]&255),D=d-(this.colorTab[N++]&255),E=c-(this.colorTab[N]&255),Z=O*O+D*D+E*E,P=N/3;this.usedEntry[P]&&Z<u&&(u=Z,o=P),N++}return o},n.prototype.removeAlphaChannel=function(t){for(var i=this.width,d=this.height,c=new Uint8Array(i*d*3),o=0,u=0;u<d;u++)for(var m=0;m<i;m++){var N=u*i*4+m*4;c[o++]=t[N],c[o++]=t[N+1],c[o++]=t[N+2]}return c},n.prototype.setImagePixels=function(t){this.pixels=t},n.prototype.writeGraphicCtrlExt=function(){this.writeByte(33),this.writeByte(249),this.writeByte(4);var t,i;this.transparent===null?(t=0,i=0):(t=1,i=2),this.dispose>=0&&(i=dispose&7),i<<=2,this.writeByte(0|i|0|t),this.writeShort(this.delay),this.writeByte(this.transIndex),this.writeByte(0)},n.prototype.writeImageDesc=function(){this.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.writeByte(0):this.writeByte(128|this.palSize)},n.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.writeByte(240|this.palSize),this.writeByte(0),this.writeByte(0)},n.prototype.writeNetscapeExt=function(){this.writeByte(33),this.writeByte(255),this.writeByte(11),this.writeUTFBytes("NETSCAPE2.0"),this.writeByte(3),this.writeByte(1),this.writeShort(this.repeat),this.writeByte(0)},n.prototype.writePalette=function(){this.writeBytes(this.colorTab);for(var t=3*256-this.colorTab.length,i=0;i<t;i++)this.writeByte(0)},n.prototype.writeShort=function(t){this.writeByte(t&255),this.writeByte(t>>8&255)},n.prototype.writePixels=function(){var t=new r(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this)},n.prototype.stream=function(){return this},n.ByteCapacitor=e,K.exports=n}).call(this,T("buffer").Buffer)},{"./LZWEncoder.js":17,"./TypedNeuQuant.js":18,assert:2,buffer:7,events:14,"readable-stream":24,util:104}],17:[function(T,K,_){var S=-1,b=12,k=5003,l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function r(e,n,t,i){var d=Math.max(2,i),c=new Uint8Array(256),o=new Int32Array(k),u=new Int32Array(k),m,N=0,O,D=0,E,Z,P,Y,U=!1,B,A,M;function p(g,L){c[O++]=g,O>=254&&w(L)}function C(g){V(k),D=A+2,U=!0,F(A,g)}function V(g){for(var L=0;L<g;++L)o[L]=-1}function h(g,L){var G,re,le,ie,ce,te,he;for(B=g,U=!1,Y=B,E=H(Y),A=1<<g-1,M=A+1,D=A+2,O=0,ie=$(),he=0,G=k;G<65536;G*=2)++he;he=8-he,te=k,V(te),F(A,L);e:for(;(re=$())!=S;){if(G=(re<<b)+ie,le=re<<he^ie,o[le]===G){ie=u[le];continue}else if(o[le]>=0){ce=te-le,le===0&&(ce=1);do if((le-=ce)<0&&(le+=te),o[le]===G){ie=u[le];continue e}while(o[le]>=0)}F(ie,L),ie=re,D<1<<b?(u[le]=D++,o[le]=G):C(L)}F(ie,L),F(M,L)}function a(g){g.writeByte(d),Z=e*n,P=0,h(d+1,g),g.writeByte(0)}function w(g){O>0&&(g.writeByte(O),g.writeBytes(c,0,O),O=0)}function H(g){return(1<<g)-1}function $(){if(Z===0)return S;--Z;var g=t[P++];return g&255}function F(g,L){for(m&=l[N],N>0?m|=g<<N:m=g,N+=Y;N>=8;)p(m&255,L),m>>=8,N-=8;if((D>E||U)&&(U?(E=H(Y=B),U=!1):(++Y,Y==b?E=1<<b:E=H(Y))),g==M){for(;N>0;)p(m&255,L),m>>=8,N-=8;w(L)}}this.encode=a}K.exports=r},{}],18:[function(T,K,_){var S=100,b=256,k=b-1,l=4,r=16,e=1<<r,n=10,t=10,i=e>>t,d=e<<n-t,c=b>>3,o=6,u=1<<o,m=c*u,N=30,O=10,D=1<<O,E=8,Z=1<<E,P=O+E,Y=1<<P,U=499,B=491,A=487,M=503,p=3*M;function C(V,h){var a,w,H,$,F;function g(){a=[],w=new Int32Array(256),H=new Int32Array(b),$=new Int32Array(b),F=new Int32Array(b>>3);var R,J;for(R=0;R<b;R++)J=(R<<l+8)/b,a[R]=new Float64Array([J,J,J,0]),$[R]=e/b,H[R]=0}function L(){for(var R=0;R<b;R++)a[R][0]>>=l,a[R][1]>>=l,a[R][2]>>=l,a[R][3]=R}function G(R,J,ae,oe,ee){a[J][0]-=R*(a[J][0]-ae)/D,a[J][1]-=R*(a[J][1]-oe)/D,a[J][2]-=R*(a[J][2]-ee)/D}function re(R,J,ae,oe,ee){for(var ve=Math.abs(J-R),x=Math.min(J+R,b),f=J+1,v=J-1,y=1,X,ne;f<x||v>ve;)ne=F[y++],f<x&&(X=a[f++],X[0]-=ne*(X[0]-ae)/Y,X[1]-=ne*(X[1]-oe)/Y,X[2]-=ne*(X[2]-ee)/Y),v>ve&&(X=a[v--],X[0]-=ne*(X[0]-ae)/Y,X[1]-=ne*(X[1]-oe)/Y,X[2]-=ne*(X[2]-ee)/Y)}function le(R,J,ae){var oe=2147483647,ee=oe,ve=-1,x=ve,f,v,y,X,ne;for(f=0;f<b;f++)v=a[f],y=Math.abs(v[0]-R)+Math.abs(v[1]-J)+Math.abs(v[2]-ae),y<oe&&(oe=y,ve=f),X=y-(H[f]>>r-l),X<ee&&(ee=X,x=f),ne=$[f]>>t,$[f]-=ne,H[f]+=ne<<n;return $[ve]+=i,H[ve]-=d,x}function ie(){var R,J,ae,oe,ee,ve,x=0,f=0;for(R=0;R<b;R++){for(ae=a[R],ee=R,ve=ae[1],J=R+1;J<b;J++)oe=a[J],oe[1]<ve&&(ee=J,ve=oe[1]);if(oe=a[ee],R!=ee&&(J=oe[0],oe[0]=ae[0],ae[0]=J,J=oe[1],oe[1]=ae[1],ae[1]=J,J=oe[2],oe[2]=ae[2],ae[2]=J,J=oe[3],oe[3]=ae[3],ae[3]=J),ve!=x){for(w[x]=f+R>>1,J=x+1;J<ve;J++)w[J]=R;x=ve,f=R}}for(w[x]=f+k>>1,J=x+1;J<256;J++)w[J]=k}function ce(R,J,ae){for(var oe,ee,ve,x=1e3,f=-1,v=w[J],y=v-1;v<b||y>=0;)v<b&&(ee=a[v],ve=ee[1]-J,ve>=x?v=b:(v++,ve<0&&(ve=-ve),oe=ee[0]-R,oe<0&&(oe=-oe),ve+=oe,ve<x&&(oe=ee[2]-ae,oe<0&&(oe=-oe),ve+=oe,ve<x&&(x=ve,f=ee[3])))),y>=0&&(ee=a[y],ve=J-ee[1],ve>=x?y=-1:(y--,ve<0&&(ve=-ve),oe=ee[0]-R,oe<0&&(oe=-oe),ve+=oe,ve<x&&(oe=ee[2]-ae,oe<0&&(oe=-oe),ve+=oe,ve<x&&(x=ve,f=ee[3]))));return f}function te(){var R,J=V.length,ae=30+(h-1)/3,oe=J/(3*h),ee=~~(oe/S),ve=D,x=m,f=x>>o;for(f<=1&&(f=0),R=0;R<f;R++)F[R]=ve*((f*f-R*R)*Z/(f*f));var v;J<p?(h=1,v=3):J%U!==0?v=3*U:J%B!==0?v=3*B:J%A!==0?v=3*A:v=3*M;var y,X,ne,se,Ee=0;for(R=0;R<oe;)if(y=(V[Ee]&255)<<l,X=(V[Ee+1]&255)<<l,ne=(V[Ee+2]&255)<<l,se=le(y,X,ne),G(ve,se,y,X,ne),f!==0&&re(f,se,y,X,ne),Ee+=v,Ee>=J&&(Ee-=J),R++,ee===0&&(ee=1),R%ee===0)for(ve-=ve/ae,x-=x/N,f=x>>o,f<=1&&(f=0),se=0;se<f;se++)F[se]=ve*((f*f-se*se)*Z/(f*f))}function he(){g(),te(),L(),ie()}this.buildColormap=he;function z(){for(var R=[],J=[],ae=0;ae<b;ae++)J[a[ae][3]]=ae;for(var oe=0,ee=0;ee<b;ee++){var ve=J[ee];R[oe++]=a[ve][0],R[oe++]=a[ve][1],R[oe++]=a[ve][2]}return R}this.getColormap=z,this.lookupRGB=ce}K.exports=C},{}],19:[function(T,K,_){(function(S){K.exports=e;var b=Object.keys||function(i){var d=[];for(var c in i)d.push(c);return d},k=T("core-util-is");k.inherits=T("inherits");var l=T("./_stream_readable"),r=T("./_stream_writable");k.inherits(e,l),t(b(r.prototype),function(i){e.prototype[i]||(e.prototype[i]=r.prototype[i])});function e(i){if(!(this instanceof e))return new e(i);l.call(this,i),r.call(this,i),i&&i.readable===!1&&(this.readable=!1),i&&i.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,i&&i.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",n)}function n(){this.allowHalfOpen||this._writableState.ended||S.nextTick(this.end.bind(this))}function t(i,d){for(var c=0,o=i.length;c<o;c++)d(i[c],c)}}).call(this,T("_process"))},{"./_stream_readable":21,"./_stream_writable":23,_process:73,"core-util-is":9,inherits:26}],20:[function(T,K,_){K.exports=k;var S=T("./_stream_transform"),b=T("core-util-is");b.inherits=T("inherits"),b.inherits(k,S);function k(l){if(!(this instanceof k))return new k(l);S.call(this,l)}k.prototype._transform=function(l,r,e){e(null,l)}},{"./_stream_transform":22,"core-util-is":9,inherits:26}],21:[function(T,K,_){(function(S){K.exports=d;var b=T("isarray"),k=T("buffer").Buffer;d.ReadableState=i;var l=T("events").EventEmitter;l.listenerCount||(l.listenerCount=function(a,w){return a.listeners(w).length});var r=T("stream"),e=T("core-util-is");e.inherits=T("inherits");var n,t=T("util");t&&t.debuglog?t=t.debuglog("stream"):t=function(){},e.inherits(d,r);function i(a,w){var H=T("./_stream_duplex");a=a||{};var $=a.highWaterMark,F=a.objectMode?16:16*1024;this.highWaterMark=$||$===0?$:F,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!a.objectMode,w instanceof H&&(this.objectMode=this.objectMode||!!a.readableObjectMode),this.defaultEncoding=a.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(n||(n=T("string_decoder/").StringDecoder),this.decoder=new n(a.encoding),this.encoding=a.encoding)}function d(a){if(T("./_stream_duplex"),!(this instanceof d))return new d(a);this._readableState=new i(a,this),this.readable=!0,r.call(this)}d.prototype.push=function(a,w){var H=this._readableState;return e.isString(a)&&!H.objectMode&&(w=w||H.defaultEncoding,w!==H.encoding&&(a=new k(a,w),w="")),c(this,H,a,w,!1)},d.prototype.unshift=function(a){var w=this._readableState;return c(this,w,a,"",!0)};function c(a,w,H,$,F){var g=O(w,H);if(g)a.emit("error",g);else if(e.isNullOrUndefined(H))w.reading=!1,w.ended||D(a,w);else if(w.objectMode||H&&H.length>0)if(w.ended&&!F){var L=new Error("stream.push() after EOF");a.emit("error",L)}else if(w.endEmitted&&F){var L=new Error("stream.unshift() after end event");a.emit("error",L)}else w.decoder&&!F&&!$&&(H=w.decoder.write(H)),F||(w.reading=!1),w.flowing&&w.length===0&&!w.sync?(a.emit("data",H),a.read(0)):(w.length+=w.objectMode?1:H.length,F?w.buffer.unshift(H):w.buffer.push(H),w.needReadable&&E(a)),P(a,w);else F||(w.reading=!1);return o(w)}function o(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}d.prototype.setEncoding=function(a){return n||(n=T("string_decoder/").StringDecoder),this._readableState.decoder=new n(a),this._readableState.encoding=a,this};var u=8388608;function m(a){if(a>=u)a=u;else{a--;for(var w=1;w<32;w<<=1)a|=a>>w;a++}return a}function N(a,w){return w.length===0&&w.ended?0:w.objectMode?a===0?0:1:isNaN(a)||e.isNull(a)?w.flowing&&w.buffer.length?w.buffer[0].length:w.length:a<=0?0:(a>w.highWaterMark&&(w.highWaterMark=m(a)),a>w.length?w.ended?w.length:(w.needReadable=!0,0):a)}d.prototype.read=function(a){t("read",a);var w=this._readableState,H=a;if((!e.isNumber(a)||a>0)&&(w.emittedReadable=!1),a===0&&w.needReadable&&(w.length>=w.highWaterMark||w.ended))return t("read: emitReadable",w.length,w.ended),w.length===0&&w.ended?C(this):E(this),null;if(a=N(a,w),a===0&&w.ended)return w.length===0&&C(this),null;var $=w.needReadable;t("need readable",$),(w.length===0||w.length-a<w.highWaterMark)&&($=!0,t("length less than watermark",$)),(w.ended||w.reading)&&($=!1,t("reading or ended",$)),$&&(t("do read"),w.reading=!0,w.sync=!0,w.length===0&&(w.needReadable=!0),this._read(w.highWaterMark),w.sync=!1),$&&!w.reading&&(a=N(H,w));var F;return a>0?F=p(a,w):F=null,e.isNull(F)&&(w.needReadable=!0,a=0),w.length-=a,w.length===0&&!w.ended&&(w.needReadable=!0),H!==a&&w.ended&&w.length===0&&C(this),e.isNull(F)||this.emit("data",F),F};function O(a,w){var H=null;return!e.isBuffer(w)&&!e.isString(w)&&!e.isNullOrUndefined(w)&&!a.objectMode&&(H=new TypeError("Invalid non-string/buffer chunk")),H}function D(a,w){if(w.decoder&&!w.ended){var H=w.decoder.end();H&&H.length&&(w.buffer.push(H),w.length+=w.objectMode?1:H.length)}w.ended=!0,E(a)}function E(a){var w=a._readableState;w.needReadable=!1,w.emittedReadable||(t("emitReadable",w.flowing),w.emittedReadable=!0,w.sync?S.nextTick(function(){Z(a)}):Z(a))}function Z(a){t("emit readable"),a.emit("readable"),M(a)}function P(a,w){w.readingMore||(w.readingMore=!0,S.nextTick(function(){Y(a,w)}))}function Y(a,w){for(var H=w.length;!w.reading&&!w.flowing&&!w.ended&&w.length<w.highWaterMark&&(t("maybeReadMore read 0"),a.read(0),H!==w.length);)H=w.length;w.readingMore=!1}d.prototype._read=function(a){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(a,w){var H=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=a;break;case 1:$.pipes=[$.pipes,a];break;default:$.pipes.push(a);break}$.pipesCount+=1,t("pipe count=%d opts=%j",$.pipesCount,w);var F=(!w||w.end!==!1)&&a!==S.stdout&&a!==S.stderr,g=F?G:le;$.endEmitted?S.nextTick(g):H.once("end",g),a.on("unpipe",L);function L(R){t("onunpipe"),R===H&&le()}function G(){t("onend"),a.end()}var re=U(H);a.on("drain",re);function le(){t("cleanup"),a.removeListener("close",te),a.removeListener("finish",he),a.removeListener("drain",re),a.removeListener("error",ce),a.removeListener("unpipe",L),H.removeListener("end",G),H.removeListener("end",le),H.removeListener("data",ie),$.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&re()}H.on("data",ie);function ie(R){t("ondata");var J=a.write(R);J===!1&&(t("false write response, pause",H._readableState.awaitDrain),H._readableState.awaitDrain++,H.pause())}function ce(R){t("onerror",R),z(),a.removeListener("error",ce),l.listenerCount(a,"error")===0&&a.emit("error",R)}!a._events||!a._events.error?a.on("error",ce):b(a._events.error)?a._events.error.unshift(ce):a._events.error=[ce,a._events.error];function te(){a.removeListener("finish",he),z()}a.once("close",te);function he(){t("onfinish"),a.removeListener("close",te),z()}a.once("finish",he);function z(){t("unpipe"),H.unpipe(a)}return a.emit("pipe",H),$.flowing||(t("pipe resume"),H.resume()),a};function U(a){return function(){var w=a._readableState;t("pipeOnDrain",w.awaitDrain),w.awaitDrain&&w.awaitDrain--,w.awaitDrain===0&&l.listenerCount(a,"data")&&(w.flowing=!0,M(a))}}d.prototype.unpipe=function(a){var w=this._readableState;if(w.pipesCount===0)return this;if(w.pipesCount===1)return a&&a!==w.pipes?this:(a||(a=w.pipes),w.pipes=null,w.pipesCount=0,w.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var H=w.pipes,$=w.pipesCount;w.pipes=null,w.pipesCount=0,w.flowing=!1;for(var F=0;F<$;F++)H[F].emit("unpipe",this);return this}var F=h(w.pipes,a);return F===-1?this:(w.pipes.splice(F,1),w.pipesCount-=1,w.pipesCount===1&&(w.pipes=w.pipes[0]),a.emit("unpipe",this),this)},d.prototype.on=function(a,w){var H=r.prototype.on.call(this,a,w);if(a==="data"&&this._readableState.flowing!==!1&&this.resume(),a==="readable"&&this.readable){var $=this._readableState;if(!$.readableListening)if($.readableListening=!0,$.emittedReadable=!1,$.needReadable=!0,$.reading)$.length&&E(this);else{var F=this;S.nextTick(function(){t("readable nexttick read 0"),F.read(0)})}}return H},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var a=this._readableState;return a.flowing||(t("resume"),a.flowing=!0,a.reading||(t("resume read 0"),this.read(0)),B(this,a)),this};function B(a,w){w.resumeScheduled||(w.resumeScheduled=!0,S.nextTick(function(){A(a,w)}))}function A(a,w){w.resumeScheduled=!1,a.emit("resume"),M(a),w.flowing&&!w.reading&&a.read(0)}d.prototype.pause=function(){return t("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(t("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(a){var w=a._readableState;if(t("flow",w.flowing),w.flowing)do var H=a.read();while(H!==null&&w.flowing)}d.prototype.wrap=function(a){var w=this._readableState,H=!1,$=this;a.on("end",function(){if(t("wrapped end"),w.decoder&&!w.ended){var L=w.decoder.end();L&&L.length&&$.push(L)}$.push(null)}),a.on("data",function(L){if(t("wrapped data"),w.decoder&&(L=w.decoder.write(L)),!(!L||!w.objectMode&&!L.length)){var G=$.push(L);G||(H=!0,a.pause())}});for(var F in a)e.isFunction(a[F])&&e.isUndefined(this[F])&&(this[F]=function(L){return function(){return a[L].apply(a,arguments)}}(F));var g=["error","close","destroy","pause","resume"];return V(g,function(L){a.on(L,$.emit.bind($,L))}),$._read=function(L){t("wrapped _read",L),H&&(H=!1,a.resume())},$},d._fromList=p;function p(a,w){var H=w.buffer,$=w.length,F=!!w.decoder,g=!!w.objectMode,L;if(H.length===0)return null;if($===0)L=null;else if(g)L=H.shift();else if(!a||a>=$)F?L=H.join(""):L=k.concat(H,$),H.length=0;else if(a<H[0].length){var G=H[0];L=G.slice(0,a),H[0]=G.slice(a)}else if(a===H[0].length)L=H.shift();else{F?L="":L=new k(a);for(var re=0,le=0,ie=H.length;le<ie&&re<a;le++){var G=H[0],ce=Math.min(a-re,G.length);F?L+=G.slice(0,ce):G.copy(L,re,0,ce),ce<G.length?H[0]=G.slice(ce):H.shift(),re+=ce}}return L}function C(a){var w=a._readableState;if(w.length>0)throw new Error("endReadable called on non-empty stream");w.endEmitted||(w.ended=!0,S.nextTick(function(){!w.endEmitted&&w.length===0&&(w.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function V(a,w){for(var H=0,$=a.length;H<$;H++)w(a[H],H)}function h(a,w){for(var H=0,$=a.length;H<$;H++)if(a[H]===w)return H;return-1}}).call(this,T("_process"))},{"./_stream_duplex":19,_process:73,buffer:7,"core-util-is":9,events:14,inherits:26,isarray:29,stream:82,"string_decoder/":98,util:4}],22:[function(T,K,_){K.exports=r;var S=T("./_stream_duplex"),b=T("core-util-is");b.inherits=T("inherits"),b.inherits(r,S);function k(n,t){this.afterTransform=function(i,d){return l(t,i,d)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function l(n,t,i){var d=n._transformState;d.transforming=!1;var c=d.writecb;if(!c)return n.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,b.isNullOrUndefined(i)||n.push(i),c&&c(t);var o=n._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&n._read(o.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);S.call(this,n),this._transformState=new k(n,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){b.isFunction(this._flush)?this._flush(function(i){e(t,i)}):e(t)})}r.prototype.push=function(n,t){return this._transformState.needTransform=!1,S.prototype.push.call(this,n,t)},r.prototype._transform=function(n,t,i){throw new Error("not implemented")},r.prototype._write=function(n,t,i){var d=this._transformState;if(d.writecb=i,d.writechunk=n,d.writeencoding=t,!d.transforming){var c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},r.prototype._read=function(n){var t=this._transformState;!b.isNull(t.writechunk)&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function e(n,t){if(t)return n.emit("error",t);var i=n._writableState,d=n._transformState;if(i.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return n.push(null)}},{"./_stream_duplex":19,"core-util-is":9,inherits:26}],23:[function(T,K,_){(function(S){K.exports=n;var b=T("buffer").Buffer;n.WritableState=e;var k=T("core-util-is");k.inherits=T("inherits");var l=T("stream");k.inherits(n,l);function r(B,A,M){this.chunk=B,this.encoding=A,this.callback=M}function e(B,A){var M=T("./_stream_duplex");B=B||{};var p=B.highWaterMark,C=B.objectMode?16:16*1024;this.highWaterMark=p||p===0?p:C,this.objectMode=!!B.objectMode,A instanceof M&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var V=B.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(h){N(A,h)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function n(B){var A=T("./_stream_duplex");if(!(this instanceof n)&&!(this instanceof A))return new n(B);this._writableState=new e(B,this),this.writable=!0,l.call(this)}n.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function t(B,A,M){var p=new Error("write after end");B.emit("error",p),S.nextTick(function(){M(p)})}function i(B,A,M,p){var C=!0;if(!k.isBuffer(M)&&!k.isString(M)&&!k.isNullOrUndefined(M)&&!A.objectMode){var V=new TypeError("Invalid non-string/buffer chunk");B.emit("error",V),S.nextTick(function(){p(V)}),C=!1}return C}n.prototype.write=function(B,A,M){var p=this._writableState,C=!1;return k.isFunction(A)&&(M=A,A=null),k.isBuffer(B)?A="buffer":A||(A=p.defaultEncoding),k.isFunction(M)||(M=function(){}),p.ended?t(this,p,M):i(this,p,B,M)&&(p.pendingcb++,C=c(this,p,B,A,M)),C},n.prototype.cork=function(){var B=this._writableState;B.corked++},n.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.finished&&!B.bufferProcessing&&B.buffer.length&&E(this,B))};function d(B,A,M){return!B.objectMode&&B.decodeStrings!==!1&&k.isString(A)&&(A=new b(A,M)),A}function c(B,A,M,p,C){M=d(A,M,p),k.isBuffer(M)&&(p="buffer");var V=A.objectMode?1:M.length;A.length+=V;var h=A.length<A.highWaterMark;return h||(A.needDrain=!0),A.writing||A.corked?A.buffer.push(new r(M,p,C)):o(B,A,!1,V,M,p,C),h}function o(B,A,M,p,C,V,h){A.writelen=p,A.writecb=h,A.writing=!0,A.sync=!0,M?B._writev(C,A.onwrite):B._write(C,V,A.onwrite),A.sync=!1}function u(B,A,M,p,C){M?S.nextTick(function(){A.pendingcb--,C(p)}):(A.pendingcb--,C(p)),B._writableState.errorEmitted=!0,B.emit("error",p)}function m(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function N(B,A){var M=B._writableState,p=M.sync,C=M.writecb;if(m(M),A)u(B,M,p,A,C);else{var V=Z(B,M);!V&&!M.corked&&!M.bufferProcessing&&M.buffer.length&&E(B,M),p?S.nextTick(function(){O(B,M,V,C)}):O(B,M,V,C)}}function O(B,A,M,p){M||D(B,A),A.pendingcb--,p(),Y(B,A)}function D(B,A){A.length===0&&A.needDrain&&(A.needDrain=!1,B.emit("drain"))}function E(B,A){if(A.bufferProcessing=!0,B._writev&&A.buffer.length>1){for(var M=[],p=0;p<A.buffer.length;p++)M.push(A.buffer[p].callback);A.pendingcb++,o(B,A,!0,A.length,A.buffer,"",function(H){for(var $=0;$<M.length;$++)A.pendingcb--,M[$](H)}),A.buffer=[]}else{for(var p=0;p<A.buffer.length;p++){var C=A.buffer[p],V=C.chunk,h=C.encoding,a=C.callback,w=A.objectMode?1:V.length;if(o(B,A,!1,w,V,h,a),A.writing){p++;break}}p<A.buffer.length?A.buffer=A.buffer.slice(p):A.buffer.length=0}A.bufferProcessing=!1}n.prototype._write=function(B,A,M){M(new Error("not implemented"))},n.prototype._writev=null,n.prototype.end=function(B,A,M){var p=this._writableState;k.isFunction(B)?(M=B,B=null,A=null):k.isFunction(A)&&(M=A,A=null),k.isNullOrUndefined(B)||this.write(B,A),p.corked&&(p.corked=1,this.uncork()),!p.ending&&!p.finished&&U(this,p,M)};function Z(B,A){return A.ending&&A.length===0&&!A.finished&&!A.writing}function P(B,A){A.prefinished||(A.prefinished=!0,B.emit("prefinish"))}function Y(B,A){var M=Z(B,A);return M&&(A.pendingcb===0?(P(B,A),A.finished=!0,B.emit("finish")):P(B,A)),M}function U(B,A,M){A.ending=!0,Y(B,A),M&&(A.finished?S.nextTick(M):B.once("finish",M)),A.ended=!0}}).call(this,T("_process"))},{"./_stream_duplex":19,_process:73,buffer:7,"core-util-is":9,inherits:26,stream:82}],24:[function(T,K,_){(function(S){_=K.exports=T("./lib/_stream_readable.js"),_.Stream=T("stream"),_.Readable=_,_.Writable=T("./lib/_stream_writable.js"),_.Duplex=T("./lib/_stream_duplex.js"),_.Transform=T("./lib/_stream_transform.js"),_.PassThrough=T("./lib/_stream_passthrough.js"),!S.browser&&{}.READABLE_STREAM==="disable"&&(K.exports=T("stream"))}).call(this,T("_process"))},{"./lib/_stream_duplex.js":19,"./lib/_stream_passthrough.js":20,"./lib/_stream_readable.js":21,"./lib/_stream_transform.js":22,"./lib/_stream_writable.js":23,_process:73,stream:82}],25:[function(T,K,_){_.read=function(S,b,k,l,r){var e,n,t=r*8-l-1,i=(1<<t)-1,d=i>>1,c=-7,o=k?r-1:0,u=k?-1:1,m=S[b+o];for(o+=u,e=m&(1<<-c)-1,m>>=-c,c+=t;c>0;e=e*256+S[b+o],o+=u,c-=8);for(n=e&(1<<-c)-1,e>>=-c,c+=l;c>0;n=n*256+S[b+o],o+=u,c-=8);if(e===0)e=1-d;else{if(e===i)return n?NaN:(m?-1:1)*(1/0);n=n+Math.pow(2,l),e=e-d}return(m?-1:1)*n*Math.pow(2,e-l)},_.write=function(S,b,k,l,r,e){var n,t,i,d=e*8-r-1,c=(1<<d)-1,o=c>>1,u=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=l?0:e-1,N=l?1:-1,O=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(t=isNaN(b)?1:0,n=c):(n=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-n))<1&&(n--,i*=2),n+o>=1?b+=u/i:b+=u*Math.pow(2,1-o),b*i>=2&&(n++,i/=2),n+o>=c?(t=0,n=c):n+o>=1?(t=(b*i-1)*Math.pow(2,r),n=n+o):(t=b*Math.pow(2,o-1)*Math.pow(2,r),n=0));r>=8;S[k+m]=t&255,m+=N,t/=256,r-=8);for(n=n<<r|t,d+=r;d>0;S[k+m]=n&255,m+=N,n/=256,d-=8);S[k+m-N]|=O*128}},{}],26:[function(T,K,_){typeof Object.create=="function"?K.exports=function(b,k){b.super_=k,b.prototype=Object.create(k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:K.exports=function(b,k){b.super_=k;var l=function(){};l.prototype=k.prototype,b.prototype=new l,b.prototype.constructor=b}},{}],27:[function(T,K,_){function S(b){for(var k=new Array(b),l=0;l<b;++l)k[l]=l;return k}K.exports=S},{}],28:[function(T,K,_){K.exports=function(k){return k!=null&&(S(k)||b(k)||!!k._isBuffer)};function S(k){return!!k.constructor&&typeof k.constructor.isBuffer=="function"&&k.constructor.isBuffer(k)}function b(k){return typeof k.readFloatLE=="function"&&typeof k.slice=="function"&&S(k.slice(0,0))}},{}],29:[function(T,K,_){K.exports=Array.isArray||function(S){return Object.prototype.toString.call(S)=="[object Array]"}},{}],30:[function(T,K,_){var S=T("./lib/encoder"),b=T("./lib/decoder");K.exports={encode:S,decode:b}},{"./lib/decoder":31,"./lib/encoder":32}],31:[function(T,K,_){(function(S){var b=function(){var r=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,n=799,t=3406,i=2276,d=1567,c=3784,o=5793,u=2896;function m(){}function N(Z,P){for(var Y=0,U=[],B,A,M=16;M>0&&!Z[M-1];)M--;U.push({children:[],index:0});var p=U[0],C;for(B=0;B<M;B++){for(A=0;A<Z[B];A++){for(p=U.pop(),p.children[p.index]=P[Y];p.index>0;)p=U.pop();for(p.index++,U.push(p);U.length<=B;)U.push(C={children:[],index:0}),p.children[p.index]=C.children,p=C;Y++}B+1<M&&(U.push(C={children:[],index:0}),p.children[p.index]=C.children,p=C)}return U[0].children}function O(Z,P,Y,U,B,A,M,p,C){Y.precision,Y.samplesPerLine,Y.scanLines;var V=Y.mcusPerLine,h=Y.progressive;Y.maxH,Y.maxV;var a=P,w=0,H=0;function $(){if(H>0)return H--,w>>H&1;if(w=Z[P++],w==255){var ge=Z[P++];if(ge)throw new Error("unexpected marker: "+(w<<8|ge).toString(16))}return H=7,w>>>7}function F(ge){for(var ye=ge,we;(we=$())!==null;){if(ye=ye[we],typeof ye=="number")return ye;if(typeof ye!="object")throw new Error("invalid huffman sequence")}return null}function g(ge){for(var ye=0;ge>0;){var we=$();if(we===null)return;ye=ye<<1|we,ge--}return ye}function L(ge){var ye=g(ge);return ye>=1<<ge-1?ye:ye+(-1<<ge)+1}function G(ge,ye){var we=F(ge.huffmanTableDC),Se=we===0?0:L(we);ye[0]=ge.pred+=Se;for(var Le=1;Le<64;){var ke=F(ge.huffmanTableAC),Re=ke&15,Ne=ke>>4;if(Re===0){if(Ne<15)break;Le+=16;continue}Le+=Ne;var xe=r[Le];ye[xe]=L(Re),Le++}}function re(ge,ye){var we=F(ge.huffmanTableDC),Se=we===0?0:L(we)<<C;ye[0]=ge.pred+=Se}function le(ge,ye){ye[0]|=$()<<C}var ie=0;function ce(ge,ye){if(ie>0){ie--;return}for(var we=A,Se=M;we<=Se;){var Le=F(ge.huffmanTableAC),ke=Le&15,Re=Le>>4;if(ke===0){if(Re<15){ie=g(Re)+(1<<Re)-1;break}we+=16;continue}we+=Re;var Ne=r[we];ye[Ne]=L(ke)*(1<<C),we++}}var te=0,he;function z(ge,ye){for(var we=A,Se=M,Le=0;we<=Se;){var ke=r[we],Re=ye[ke]<0?-1:1;switch(te){case 0:var Ne=F(ge.huffmanTableAC),xe=Ne&15,Le=Ne>>4;if(xe===0)Le<15?(ie=g(Le)+(1<<Le),te=4):(Le=16,te=1);else{if(xe!==1)throw new Error("invalid ACn encoding");he=L(xe),te=Le?2:3}continue;case 1:case 2:ye[ke]?ye[ke]+=($()<<C)*Re:(Le--,Le===0&&(te=te==2?3:0));break;case 3:ye[ke]?ye[ke]+=($()<<C)*Re:(ye[ke]=he<<C,te=0);break;case 4:ye[ke]&&(ye[ke]+=($()<<C)*Re);break}we++}te===4&&(ie--,ie===0&&(te=0))}function R(ge,ye,we,Se,Le){var ke=we/V|0,Re=we%V,Ne=ke*ge.v+Se,xe=Re*ge.h+Le;ye(ge,ge.blocks[Ne][xe])}function J(ge,ye,we){var Se=we/ge.blocksPerLine|0,Le=we%ge.blocksPerLine;ye(ge,ge.blocks[Se][Le])}var ae=U.length,oe,ee,ve,x,f,v;h?A===0?v=p===0?re:le:v=p===0?ce:z:v=G;var y=0,X,ne;ae==1?ne=U[0].blocksPerLine*U[0].blocksPerColumn:ne=V*Y.mcusPerColumn,B||(B=ne);for(var se,Ee;y<ne;){for(ee=0;ee<ae;ee++)U[ee].pred=0;if(ie=0,ae==1)for(oe=U[0],f=0;f<B;f++)J(oe,v,y),y++;else for(f=0;f<B;f++){for(ee=0;ee<ae;ee++)for(oe=U[ee],se=oe.h,Ee=oe.v,ve=0;ve<Ee;ve++)for(x=0;x<se;x++)R(oe,v,y,ve,x);if(y++,y===ne)break}if(H=0,X=Z[P]<<8|Z[P+1],X<65280)throw new Error("marker was not found");if(X>=65488&&X<=65495)P+=2;else break}return P-a}function D(Z,P){var Y=[],U=P.blocksPerLine,B=P.blocksPerColumn,A=U<<3,M=new Int32Array(64),p=new Uint8Array(64);function C(L,G,re){var le=P.quantizationTable,ie,ce,te,he,z,R,J,ae,oe,ee=re,ve;for(ve=0;ve<64;ve++)ee[ve]=L[ve]*le[ve];for(ve=0;ve<8;++ve){var x=8*ve;if(ee[1+x]==0&&ee[2+x]==0&&ee[3+x]==0&&ee[4+x]==0&&ee[5+x]==0&&ee[6+x]==0&&ee[7+x]==0){oe=o*ee[0+x]+512>>10,ee[0+x]=oe,ee[1+x]=oe,ee[2+x]=oe,ee[3+x]=oe,ee[4+x]=oe,ee[5+x]=oe,ee[6+x]=oe,ee[7+x]=oe;continue}ie=o*ee[0+x]+128>>8,ce=o*ee[4+x]+128>>8,te=ee[2+x],he=ee[6+x],z=u*(ee[1+x]-ee[7+x])+128>>8,ae=u*(ee[1+x]+ee[7+x])+128>>8,R=ee[3+x]<<4,J=ee[5+x]<<4,oe=ie-ce+1>>1,ie=ie+ce+1>>1,ce=oe,oe=te*c+he*d+128>>8,te=te*d-he*c+128>>8,he=oe,oe=z-J+1>>1,z=z+J+1>>1,J=oe,oe=ae+R+1>>1,R=ae-R+1>>1,ae=oe,oe=ie-he+1>>1,ie=ie+he+1>>1,he=oe,oe=ce-te+1>>1,ce=ce+te+1>>1,te=oe,oe=z*i+ae*t+2048>>12,z=z*t-ae*i+2048>>12,ae=oe,oe=R*n+J*e+2048>>12,R=R*e-J*n+2048>>12,J=oe,ee[0+x]=ie+ae,ee[7+x]=ie-ae,ee[1+x]=ce+J,ee[6+x]=ce-J,ee[2+x]=te+R,ee[5+x]=te-R,ee[3+x]=he+z,ee[4+x]=he-z}for(ve=0;ve<8;++ve){var f=ve;if(ee[8+f]==0&&ee[16+f]==0&&ee[24+f]==0&&ee[32+f]==0&&ee[40+f]==0&&ee[48+f]==0&&ee[56+f]==0){oe=o*re[ve+0]+8192>>14,ee[0+f]=oe,ee[8+f]=oe,ee[16+f]=oe,ee[24+f]=oe,ee[32+f]=oe,ee[40+f]=oe,ee[48+f]=oe,ee[56+f]=oe;continue}ie=o*ee[0+f]+2048>>12,ce=o*ee[32+f]+2048>>12,te=ee[16+f],he=ee[48+f],z=u*(ee[8+f]-ee[56+f])+2048>>12,ae=u*(ee[8+f]+ee[56+f])+2048>>12,R=ee[24+f],J=ee[40+f],oe=ie-ce+1>>1,ie=ie+ce+1>>1,ce=oe,oe=te*c+he*d+2048>>12,te=te*d-he*c+2048>>12,he=oe,oe=z-J+1>>1,z=z+J+1>>1,J=oe,oe=ae+R+1>>1,R=ae-R+1>>1,ae=oe,oe=ie-he+1>>1,ie=ie+he+1>>1,he=oe,oe=ce-te+1>>1,ce=ce+te+1>>1,te=oe,oe=z*i+ae*t+2048>>12,z=z*t-ae*i+2048>>12,ae=oe,oe=R*n+J*e+2048>>12,R=R*e-J*n+2048>>12,J=oe,ee[0+f]=ie+ae,ee[56+f]=ie-ae,ee[8+f]=ce+J,ee[48+f]=ce-J,ee[16+f]=te+R,ee[40+f]=te-R,ee[24+f]=he+z,ee[32+f]=he-z}for(ve=0;ve<64;++ve){var v=128+(ee[ve]+8>>4);G[ve]=v<0?0:v>255?255:v}}for(var V,h,a=0;a<B;a++){var w=a<<3;for(V=0;V<8;V++)Y.push(new Uint8Array(A));for(var H=0;H<U;H++){C(P.blocks[a][H],p,M);var $=0,F=H<<3;for(h=0;h<8;h++){var g=Y[w+h];for(V=0;V<8;V++)g[F+V]=p[$++]}}}return Y}function E(Z){return Z<0?0:Z>255?255:Z}return m.prototype={load:function(P){var Y=new XMLHttpRequest;Y.open("GET",P,!0),Y.responseType="arraybuffer",Y.onload=(function(){var U=new Uint8Array(Y.response||Y.mozResponseArrayBuffer);this.parse(U),this.onload&&this.onload()}).bind(this),Y.send(null)},parse:function(P){var Y=0;P.length;function U(){var we=P[Y]<<8|P[Y+1];return Y+=2,we}function B(){var we=U(),Se=P.subarray(Y,Y+we-2);return Y+=Se.length,Se}function A(we){var Se=0,Le=0,ke,Re;for(Re in we.components)we.components.hasOwnProperty(Re)&&(ke=we.components[Re],Se<ke.h&&(Se=ke.h),Le<ke.v&&(Le=ke.v));var Ne=Math.ceil(we.samplesPerLine/8/Se),xe=Math.ceil(we.scanLines/8/Le);for(Re in we.components)if(we.components.hasOwnProperty(Re)){ke=we.components[Re];for(var W=Math.ceil(Math.ceil(we.samplesPerLine/8)*ke.h/Se),_e=Math.ceil(Math.ceil(we.scanLines/8)*ke.v/Le),me=Ne*ke.h,Te=xe*ke.v,q=[],pe=0;pe<Te;pe++){for(var I=[],be=0;be<me;be++)I.push(new Int32Array(64));q.push(I)}ke.blocksPerLine=W,ke.blocksPerColumn=_e,ke.blocks=q}we.maxH=Se,we.maxV=Le,we.mcusPerLine=Ne,we.mcusPerColumn=xe}var M=null,p=null,C,V,h=[],a=[],w=[],H=[],$=U();if($!=65496)throw new Error("SOI not found");for($=U();$!=65497;){var F,g;switch($){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=B();$===65504&&L[0]===74&&L[1]===70&&L[2]===73&&L[3]===70&&L[4]===0&&(M={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),$===65518&&L[0]===65&&L[1]===100&&L[2]===111&&L[3]===98&&L[4]===101&&L[5]===0&&(p={version:L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var G=U(),re=G+Y-2;Y<re;){var le=P[Y++],ie=new Int32Array(64);if(le>>4)if(le>>4===1)for(g=0;g<64;g++){var ce=r[g];ie[ce]=U()}else throw new Error("DQT: invalid table spec");else for(g=0;g<64;g++){var ce=r[g];ie[ce]=P[Y++]}h[le&15]=ie}break;case 65472:case 65473:case 65474:U(),C={},C.extended=$===65473,C.progressive=$===65474,C.precision=P[Y++],C.scanLines=U(),C.samplesPerLine=U(),C.components={},C.componentsOrder=[];var te=P[Y++],he;for(F=0;F<te;F++){he=P[Y];var z=P[Y+1]>>4,R=P[Y+1]&15,J=P[Y+2];C.componentsOrder.push(he),C.components[he]={h:z,v:R,quantizationIdx:J},Y+=3}A(C),a.push(C);break;case 65476:var ae=U();for(F=2;F<ae;){var oe=P[Y++],ee=new Uint8Array(16),ve=0;for(g=0;g<16;g++,Y++)ve+=ee[g]=P[Y];var x=new Uint8Array(ve);for(g=0;g<ve;g++,Y++)x[g]=P[Y];F+=17+ve,(oe>>4?w:H)[oe&15]=N(ee,x)}break;case 65501:U(),V=U();break;case 65498:U();var f=P[Y++],v=[],y;for(F=0;F<f;F++){y=C.components[P[Y++]];var X=P[Y++];y.huffmanTableDC=H[X>>4],y.huffmanTableAC=w[X&15],v.push(y)}var ne=P[Y++],se=P[Y++],Ee=P[Y++],ge=O(P,Y,C,v,V,ne,se,Ee>>4,Ee&15);Y+=ge;break;default:if(P[Y-3]==255&&P[Y-2]>=192&&P[Y-2]<=254){Y-=3;break}throw new Error("unknown JPEG marker "+$.toString(16))}$=U()}if(a.length!=1)throw new Error("only single frame JPEGs supported");for(var F=0;F<a.length;F++){var ye=a[F].components;for(var g in ye)ye[g].quantizationTable=h[ye[g].quantizationIdx],delete ye[g].quantizationIdx}this.width=C.samplesPerLine,this.height=C.scanLines,this.jfif=M,this.adobe=p,this.components=[];for(var F=0;F<C.componentsOrder.length;F++){var y=C.components[C.componentsOrder[F]];this.components.push({lines:D(C,y),scaleX:y.h/C.maxH,scaleY:y.v/C.maxV})}},getData:function(P,Y){var U=this.width/P,B=this.height/Y,A,M,p,C,V,h,a,w,H,$,F=0,g,L,G,re,le,ie,ce,te,he,z,R,J=P*Y*this.components.length,ae=new Uint8Array(J);switch(this.components.length){case 1:for(A=this.components[0],$=0;$<Y;$++)for(V=A.lines[0|$*A.scaleY*B],H=0;H<P;H++)g=V[0|H*A.scaleX*U],ae[F++]=g;break;case 2:for(A=this.components[0],M=this.components[1],$=0;$<Y;$++)for(V=A.lines[0|$*A.scaleY*B],h=M.lines[0|$*M.scaleY*B],H=0;H<P;H++)g=V[0|H*A.scaleX*U],ae[F++]=g,g=h[0|H*M.scaleX*U],ae[F++]=g;break;case 3:for(R=!0,this.adobe&&this.adobe.transformCode?R=!0:typeof this.colorTransform<"u"&&(R=!!this.colorTransform),A=this.components[0],M=this.components[1],p=this.components[2],$=0;$<Y;$++)for(V=A.lines[0|$*A.scaleY*B],h=M.lines[0|$*M.scaleY*B],a=p.lines[0|$*p.scaleY*B],H=0;H<P;H++)R?(g=V[0|H*A.scaleX*U],L=h[0|H*M.scaleX*U],G=a[0|H*p.scaleX*U],te=E(g+1.402*(G-128)),he=E(g-.3441363*(L-128)-.71413636*(G-128)),z=E(g+1.772*(L-128))):(te=V[0|H*A.scaleX*U],he=h[0|H*M.scaleX*U],z=a[0|H*p.scaleX*U]),ae[F++]=te,ae[F++]=he,ae[F++]=z;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(R=!1,this.adobe&&this.adobe.transformCode?R=!0:typeof this.colorTransform<"u"&&(R=!!this.colorTransform),A=this.components[0],M=this.components[1],p=this.components[2],C=this.components[3],$=0;$<Y;$++)for(V=A.lines[0|$*A.scaleY*B],h=M.lines[0|$*M.scaleY*B],a=p.lines[0|$*p.scaleY*B],w=C.lines[0|$*C.scaleY*B],H=0;H<P;H++)R?(g=V[0|H*A.scaleX*U],L=h[0|H*M.scaleX*U],G=a[0|H*p.scaleX*U],re=w[0|H*C.scaleX*U],le=255-E(g+1.402*(G-128)),ie=255-E(g-.3441363*(L-128)-.71413636*(G-128)),ce=255-E(g+1.772*(L-128))):(le=V[0|H*A.scaleX*U],ie=h[0|H*M.scaleX*U],ce=a[0|H*p.scaleX*U],re=w[0|H*C.scaleX*U]),ae[F++]=255-le,ae[F++]=255-ie,ae[F++]=255-ce,ae[F++]=255-re;break;default:throw"Unsupported color mode"}return ae},copyToImageData:function(P){var Y=P.width,U=P.height,B=P.data,A=this.getData(Y,U),M=0,p=0,C,V,h,a,w,H,$,F,g;switch(this.components.length){case 1:for(V=0;V<U;V++)for(C=0;C<Y;C++)h=A[M++],B[p++]=h,B[p++]=h,B[p++]=h,B[p++]=255;break;case 3:for(V=0;V<U;V++)for(C=0;C<Y;C++)$=A[M++],F=A[M++],g=A[M++],B[p++]=$,B[p++]=F,B[p++]=g,B[p++]=255;break;case 4:for(V=0;V<U;V++)for(C=0;C<Y;C++)w=A[M++],H=A[M++],h=A[M++],a=A[M++],$=255-E(w*(1-a/255)+a),F=255-E(H*(1-a/255)+a),g=255-E(h*(1-a/255)+a),B[p++]=$,B[p++]=F,B[p++]=g,B[p++]=255;break;default:throw"Unsupported color mode"}}},m}();K.exports=k;function k(l,r){var e=new Uint8Array(l),n=new b;n.parse(e);var t={width:n.width,height:n.height,data:r?new Uint8Array(n.width*n.height*4):new S(n.width*n.height*4)};return n.copyToImageData(t),t}}).call(this,T("buffer").Buffer)},{buffer:7}],32:[function(T,K,_){(function(S){function b(l){var r=Math.floor,e=new Array(64),n=new Array(64),t=new Array(64),i=new Array(64),d,c,o,u,m=new Array(65535),N=new Array(65535),O=new Array(64),D=new Array(64),E=[],Z=0,P=7,Y=new Array(64),U=new Array(64),B=new Array(64),A=new Array(256),M=new Array(2048),p,C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],h=[0,1,2,3,4,5,6,7,8,9,10,11],a=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],g=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(y){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var se=r((X[ne]*y+50)/100);se<1?se=1:se>255&&(se=255),e[C[ne]]=se}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var ye=r((Ee[ge]*y+50)/100);ye<1?ye=1:ye>255&&(ye=255),n[C[ge]]=ye}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Le=0;Le<8;Le++)for(var ke=0;ke<8;ke++)t[Se]=1/(e[C[Se]]*we[Le]*we[ke]*8),i[Se]=1/(n[C[Se]]*we[Le]*we[ke]*8),Se++}function G(y,X){for(var ne=0,se=0,Ee=new Array,ge=1;ge<=16;ge++){for(var ye=1;ye<=y[ge];ye++)Ee[X[se]]=[],Ee[X[se]][0]=ne,Ee[X[se]][1]=ge,se++,ne++;ne*=2}return Ee}function re(){d=G(V,h),c=G(H,$),o=G(a,w),u=G(F,g)}function le(){for(var y=1,X=2,ne=1;ne<=15;ne++){for(var se=y;se<X;se++)N[32767+se]=ne,m[32767+se]=[],m[32767+se][1]=ne,m[32767+se][0]=se;for(var Ee=-(X-1);Ee<=-y;Ee++)N[32767+Ee]=ne,m[32767+Ee]=[],m[32767+Ee][1]=ne,m[32767+Ee][0]=X-1+Ee;y<<=1,X<<=1}}function ie(){for(var y=0;y<256;y++)M[y]=19595*y,M[y+256>>0]=38470*y,M[y+512>>0]=7471*y+32768,M[y+768>>0]=-11059*y,M[y+1024>>0]=-21709*y,M[y+1280>>0]=32768*y+8421375,M[y+1536>>0]=-27439*y,M[y+1792>>0]=-5329*y}function ce(y){for(var X=y[0],ne=y[1]-1;ne>=0;)X&1<<ne&&(Z|=1<<P),ne--,P--,P<0&&(Z==255?(te(255),te(0)):te(Z),P=7,Z=0)}function te(y){E.push(y)}function he(y){te(y>>8&255),te(y&255)}function z(y,X){var ne,se,Ee,ge,ye,we,Se,Le,ke=0,Re,Ne=8,xe=64;for(Re=0;Re<Ne;++Re){ne=y[ke],se=y[ke+1],Ee=y[ke+2],ge=y[ke+3],ye=y[ke+4],we=y[ke+5],Se=y[ke+6],Le=y[ke+7];var W=ne+Le,_e=ne-Le,me=se+Se,Te=se-Se,q=Ee+we,pe=Ee-we,I=ge+ye,be=ge-ye,Me=W+I,s=W-I,ue=me+q,de=me-q;y[ke]=Me+ue,y[ke+4]=Me-ue;var j=(de+s)*.707106781;y[ke+2]=s+j,y[ke+6]=s-j,Me=be+pe,ue=pe+Te,de=Te+_e;var Q=(Me-de)*.382683433,fe=.5411961*Me+Q,Ie=1.306562965*de+Q,Ae=ue*.707106781,Ce=_e+Ae,Be=_e-Ae;y[ke+5]=Be+fe,y[ke+3]=Be-fe,y[ke+1]=Ce+Ie,y[ke+7]=Ce-Ie,ke+=8}for(ke=0,Re=0;Re<Ne;++Re){ne=y[ke],se=y[ke+8],Ee=y[ke+16],ge=y[ke+24],ye=y[ke+32],we=y[ke+40],Se=y[ke+48],Le=y[ke+56];var Ve=ne+Le,Oe=ne-Le,De=se+Se,Ue=se-Se,Pe=Ee+we,ze=Ee-we,Ge=ge+ye,Ye=ge-ye,je=Ve+Ge,Ze=Ve-Ge,Fe=De+Pe,We=De-Pe;y[ke]=je+Fe,y[ke+32]=je-Fe;var He=(We+Ze)*.707106781;y[ke+16]=Ze+He,y[ke+48]=Ze-He,je=Ye+ze,Fe=ze+Ue,We=Ue+Oe;var Xe=(je-We)*.382683433,Qe=.5411961*je+Xe,qe=1.306562965*We+Xe,et=Fe*.707106781,tt=Oe+et,rt=Oe-et;y[ke+40]=rt+Qe,y[ke+24]=rt-Qe,y[ke+8]=tt+qe,y[ke+56]=tt-qe,ke++}var $e;for(Re=0;Re<xe;++Re)$e=y[Re]*X[Re],O[Re]=$e>0?$e+.5|0:$e-.5|0;return O}function R(){he(65504),he(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),he(1),he(1),te(0),te(0)}function J(y,X){he(65472),he(17),te(8),he(X),he(y),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}function ae(){he(65499),he(132),te(0);for(var y=0;y<64;y++)te(e[y]);te(1);for(var X=0;X<64;X++)te(n[X])}function oe(){he(65476),he(418),te(0);for(var y=0;y<16;y++)te(V[y+1]);for(var X=0;X<=11;X++)te(h[X]);te(16);for(var ne=0;ne<16;ne++)te(a[ne+1]);for(var se=0;se<=161;se++)te(w[se]);te(1);for(var Ee=0;Ee<16;Ee++)te(H[Ee+1]);for(var ge=0;ge<=11;ge++)te($[ge]);te(17);for(var ye=0;ye<16;ye++)te(F[ye+1]);for(var we=0;we<=161;we++)te(g[we])}function ee(){he(65498),he(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0)}function ve(y,X,ne,se,Ee){for(var ge=Ee[0],ye=Ee[240],we,Se=16,Le=63,ke=64,Re=z(y,X),Ne=0;Ne<ke;++Ne)D[C[Ne]]=Re[Ne];var xe=D[0]-ne;ne=D[0],xe==0?ce(se[0]):(we=32767+xe,ce(se[N[we]]),ce(m[we]));for(var W=63;W>0&&D[W]==0;W--);if(W==0)return ce(ge),ne;for(var _e=1,me;_e<=W;){for(var Te=_e;D[_e]==0&&_e<=W;++_e);var q=_e-Te;if(q>=Se){me=q>>4;for(var pe=1;pe<=me;++pe)ce(ye);q=q&15}we=32767+D[_e],ce(Ee[(q<<4)+N[we]]),ce(m[we]),_e++}return W!=Le&&ce(ge),ne}function x(){for(var y=String.fromCharCode,X=0;X<256;X++)A[X]=y(X)}this.encode=function(y,X){new Date().getTime(),X&&f(X),E=new Array,Z=0,P=7,he(65496),R(),ae(),J(y.width,y.height),oe(),ee();var ne=0,se=0,Ee=0;Z=0,P=7,this.encode.displayName="_encode_";for(var ge=y.data,ye=y.width,we=y.height,Se=ye*4,Le,ke=0,Re,Ne,xe,W,_e,me,Te,q;ke<we;){for(Le=0;Le<Se;){for(W=Se*ke+Le,_e=W,me=-1,Te=0,q=0;q<64;q++)Te=q>>3,me=(q&7)*4,_e=W+Te*Se+me,ke+Te>=we&&(_e-=Se*(ke+1+Te-we)),Le+me>=Se&&(_e-=Le+me-Se+4),Re=ge[_e++],Ne=ge[_e++],xe=ge[_e++],Y[q]=(M[Re]+M[Ne+256>>0]+M[xe+512>>0]>>16)-128,U[q]=(M[Re+768>>0]+M[Ne+1024>>0]+M[xe+1280>>0]>>16)-128,B[q]=(M[Re+1280>>0]+M[Ne+1536>>0]+M[xe+1792>>0]>>16)-128;ne=ve(Y,t,ne,d,o),se=ve(U,i,se,c,u),Ee=ve(B,i,Ee,c,u),Le+=32}ke+=8}if(P>=0){var pe=[];pe[1]=P+1,pe[0]=(1<<P+1)-1,ce(pe)}return he(65497),new S(E)};function f(y){if(y<=0&&(y=1),y>100&&(y=100),p!=y){var X=0;y<50?X=Math.floor(5e3/y):X=Math.floor(200-y*2),L(X),p=y}}function v(){var y=new Date().getTime();l||(l=50),x(),re(),le(),ie(),f(l),new Date().getTime()-y}v()}K.exports=k;function k(l,r){typeof r>"u"&&(r=50);var e=new b(r),n=e.encode(l,r);return{data:n,width:l.width,height:l.height}}}).call(this,T("buffer").Buffer)},{buffer:7}],33:[function(T,K,_){var S=function(){function k(l){function r(i){return Object.prototype.toString.call(i)==="[object Array]"}if(this.ranges=[],typeof l=="string")this.parseString(l);else if(typeof l=="number")this.appendRange(l,l);else if(l instanceof k)this.ranges=l.getRanges();else if(r(l))for(var e=0,n=l;e<n.length;e++){var t=n[e];if(r(t))if(t.length===2)this.appendRange(t[0],t[1]);else throw new TypeError("Invalid array initializer");else if(typeof t=="number")this.append(t);else throw new TypeError("Invalid array initialzer")}else if(l!==void 0)throw new TypeError("Invalid input")}return k.prototype.parseString=function(l){function r(m){var N=m.match(/^\(?(\-?\d+)/);return parseInt(N[1],10)}var e=l.replace(/\s/g,"");if(e.length)for(var n,t=0,i=e.split(",");t<i.length;t++){var d=i[t];if(n=d.match(/^(\d+|\(\-?\d+\))$/)){var c=r(n[1]);this.appendRange(c,c)}else if(n=d.match(/^(\d+|\(\-?\d+\))?\-(\d+|\(\-?\d+\))?$/)){var o=n[1]===void 0?-1/0:r(n[1]),u=n[2]===void 0?1/0:r(n[2]);this.appendRange(o,u)}else throw new SyntaxError("Invalid input")}},k.prototype.clone=function(){return new k(this)},k.prototype.append=function(l){if(l===void 0)throw new TypeError("Invalid input");if(l instanceof k){for(var r=0,e=l.ranges;r<e.length;r++){var n=e[r];this.appendRange(n[0],n[1])}return this}else return this.append(new k(l))},k.prototype.appendRange=function(l,r){var e=[l,r];if(e[0]>e[1]&&(e=[e[1],e[0]]),e[0]===1/0&&e[1]===1/0||e[0]===-1/0&&e[1]===-1/0)throw new RangeError("Infinity can be used only within an unbounded range segment");var n=this.findOverlap(e);return this.ranges.splice(n.lo,n.count,n.union),this},k.prototype.subtract=function(l){if(l===void 0)throw new TypeError("Invalid input");if(l instanceof k){for(var r=0,e=l.ranges;r<e.length;r++){var n=e[r];this.subtractRange(n[0],n[1])}return this}else return this.subtract(new k(l))},k.prototype.subtractRange=function(l,r){var e=[l,r];e[0]>e[1]&&(e=[e[1],e[0]]);var n=this.findOverlap(e);if(n.count>0){var t=[];this.ranges[n.lo][0]<e[0]&&t.push([this.ranges[n.lo][0],e[0]-1]),e[1]<this.ranges[n.lo+n.count-1][1]&&t.push([e[1]+1,this.ranges[n.lo+n.count-1][1]]),this.ranges.splice.apply(this.ranges,[n.lo,n.count].concat(t))}return this},k.prototype.intersect=function(l){if(l===void 0)throw new TypeError("Invalid input");if(l instanceof k){for(var r=[],e=0,n=0;n<this.ranges.length;n++)for(var t=this.ranges[n],i=e;i<l.ranges.length;i++){var d=l.ranges[i];if(t[0]<=d[1]&&t[1]>=d[0]){e=i;var c=Math.max(t[0],d[0]),o=Math.min(t[1],d[1]);r.push([c,o])}else if(t[1]<d[0])break}return this.ranges=r,this}else return this.intersect(new k(l))},k.prototype.findOverlap=function(l){for(var r=this.ranges.length-1;r>=0;r--){var e=this.ranges[r],n=void 0;if(n=this.calcUnion(e,l)){for(var t=1,i=void 0;r-t>=0&&(i=this.calcUnion(n,this.ranges[r-t]));)n=i,t++;return{lo:r+1-t,count:t,union:n}}else if(e[1]<l[0])return{lo:r+1,count:0,union:l}}return{lo:0,count:0,union:l}},k.prototype.calcUnion=function(l,r){return l[1]+1<r[0]||l[0]-1>r[1]?null:[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},k.prototype.getRanges=function(){for(var l=[],r=0,e=this.ranges;r<e.length;r++){var n=e[r];l.push([n[0],n[1]])}return l},k.prototype.has=function(l){if(l===void 0)throw new TypeError("Invalid input");if(l instanceof k){for(var r=0,e=this.ranges.length,n=0,t=l.ranges;n<t.length;n++){var i=t[n],d=void 0;for(d=r;d<e;d++){var c=this.ranges[d];if(i[0]>=c[0]&&i[1]<=c[1]&&i[1]>=c[0]&&i[1]<=c[1])break}if(d===e)return!1}return!0}else return this.has(new k(l))},k.prototype.hasRange=function(l,r){return this.has(new k([[l,r]]))},k.prototype.segmentLength=function(){return this.ranges.length},k.prototype.length=function(){if(this.isUnbounded())return 1/0;for(var l=0,r=0,e=this.ranges;r<e.length;r++){var n=e[r];l+=n[1]-n[0]+1}return l},k.prototype.equals=function(l){if(l===void 0)throw new TypeError("Invalid input");if(l instanceof k){if(l===this)return!0;if(this.ranges.length!==l.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++)if(this.ranges[r][0]!==l.ranges[r][0]||this.ranges[r][1]!==l.ranges[r][1])return!1;return!0}else return this.equals(new k(l))},k.prototype.isUnbounded=function(){return this.ranges.length>0&&(this.ranges[0][0]===-1/0||this.ranges[this.ranges.length-1][1]===1/0)},k.prototype.min=function(){if(this.ranges.length!==0)return this.ranges[0][0]},k.prototype.max=function(){if(this.ranges.length!==0)return this.ranges[this.ranges.length-1][1]},k.prototype.shift=function(){var l=this.min();if(l===-1/0)throw new RangeError("shift() was invoked on an unbounded MultiRange which contains -Infinity");return l!==void 0&&this.subtract(l),l},k.prototype.pop=function(){var l=this.max();if(l===1/0)throw new RangeError("pop() was invoked on an unbounded MultiRange which contains +Infinity");return l!==void 0&&this.subtract(l),l},k.prototype.toString=function(){function l(i){return i>=0?String(i):"("+i+")"}for(var r=[],e=0,n=this.ranges;e<n.length;e++){var t=n[e];t[0]===-1/0?t[1]===1/0?r.push("-"):r.push("-"+l(t[1])):t[1]===1/0?r.push(l(t[0])+"-"):t[0]==t[1]?r.push(l(t[0])):r.push(l(t[0])+"-"+l(t[1]))}return r.join(",")},k.prototype.toArray=function(){if(this.isUnbounded())throw new RangeError("You cannot build an array from an unbounded range");for(var l=new Array(this.length()),r=0,e=0,n=this.ranges;e<n.length;e++)for(var t=n[e],i=t[0];i<=t[1];i++)l[r++]=i;return l},k.prototype.getIterator=function(){var l=this;if(this.isUnbounded())throw new RangeError("Unbounded ranges cannot be iterated over");var r=0,e=this.ranges[r],n=e?e[0]:void 0;return{next:function(){if(!e)return{done:!0};var t=n;return++n>e[1]&&(e=l.ranges[++r],n=e?e[0]:void 0),{value:t}}}},k}();_.MultiRange=S,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(S.prototype[Symbol.iterator]=S.prototype.getIterator);function b(k){return new S(k)}_.multirange=b},{}],34:[function(T,K,_){var S=T("cwise-compiler"),b={body:"",args:[],thisVars:[],localVars:[]};function k(o){if(!o)return b;for(var u=0;u<o.args.length;++u){var m=o.args[u];u===0?o.args[u]={name:m,lvalue:!0,rvalue:!!o.rvalue,count:o.count||1}:o.args[u]={name:m,lvalue:!1,rvalue:!0,count:1}}return o.thisVars||(o.thisVars=[]),o.localVars||(o.localVars=[]),o}function l(o){return S({args:o.args,pre:k(o.pre),body:k(o.body),post:k(o.proc),funcName:o.funcName})}function r(o){for(var u=[],m=0;m<o.args.length;++m)u.push("a"+m);var N=new Function("P",["return function ",o.funcName,"_ndarrayops(",u.join(","),") {P(",u.join(","),");return a0}"].join(""));return N(l(o))}var e={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var o in e){var u=e[o];_[o]=r({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+u+"c"},funcName:o}),_[o+"eq"]=r({args:["array","array"],body:{args:["a","b"],body:"a"+u+"=b"},rvalue:!0,funcName:o+"eq"}),_[o+"s"]=r({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+u+"s"},funcName:o+"s"}),_[o+"seq"]=r({args:["array","scalar"],body:{args:["a","s"],body:"a"+u+"=s"},rvalue:!0,funcName:o+"seq"})}})();var n={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var o in n){var u=n[o];_[o]=r({args:["array","array"],body:{args:["a","b"],body:"a="+u+"b"},funcName:o}),_[o+"eq"]=r({args:["array"],body:{args:["a"],body:"a="+u+"a"},rvalue:!0,count:2,funcName:o+"eq"})}})();var t={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var o in t){var u=t[o];_[o]=r({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+u+"c"},funcName:o}),_[o+"s"]=r({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+u+"s"},funcName:o+"s"}),_[o+"eq"]=r({args:["array","array"],body:{args:["a","b"],body:"a=a"+u+"b"},rvalue:!0,count:2,funcName:o+"eq"}),_[o+"seq"]=r({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+u+"s"},rvalue:!0,count:2,funcName:o+"seq"})}})();var i=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var o=0;o<i.length;++o){var u=i[o];_[u]=r({args:["array","array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:u}),_[u+"eq"]=r({args:["array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:u+"eq"})}})();var d=["max","min","atan2","pow"];(function(){for(var o=0;o<d.length;++o){var u=d[o];_[u]=r({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:u}),_[u+"s"]=r({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:u+"s"}),_[u+"eq"]=r({args:["array","array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:u+"eq"}),_[u+"seq"]=r({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:u+"seq"})}})();var c=["atan2","pow"];(function(){for(var o=0;o<c.length;++o){var u=c[o];_[u+"op"]=r({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:u+"op"}),_[u+"ops"]=r({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:u+"ops"}),_[u+"opeq"]=r({args:["array","array"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:u+"opeq"}),_[u+"opseq"]=r({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+u,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:u+"opseq"})}})(),_.any=S({args:["array"],pre:b,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),_.all=S({args:["array"],pre:b,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),_.sum=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),_.prod=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),_.norm2squared=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),_.norm2=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),_.norminf=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),_.norm1=S({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),_.sup=S({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),_.inf=S({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),_.argmin=S({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),_.argmax=S({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),_.random=r({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),_.assign=r({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),_.assigns=r({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),_.equals=S({args:["array","array"],pre:b,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":10}],35:[function(T,K,_){var S=T("ndarray"),b=T("./doConvert.js");K.exports=function(l,r){for(var e=[],n=l,t=1;Array.isArray(n);)e.push(n.length),t*=n.length,n=n[0];return e.length===0?S():(r||(r=S(new Float64Array(t),e)),b(r,l),r)}},{"./doConvert.js":36,ndarray:37}],36:[function(T,K,_){K.exports=T("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":10}],37:[function(T,K,_){var S=T("iota-array"),b=T("is-buffer"),k=typeof Float64Array<"u";function l(d,c){return d[0]-c[0]}function r(){var d=this.stride,c=new Array(d.length),o;for(o=0;o<c.length;++o)c[o]=[Math.abs(d[o]),o];c.sort(l);var u=new Array(c.length);for(o=0;o<u.length;++o)u[o]=c[o][1];return u}function e(d,c){var o=["View",c,"d",d].join("");c<0&&(o="View_Nil"+d);var u=d==="generic";if(c===-1){var m="function "+o+"(a){this.data=a;};var proto="+o+".prototype;proto.dtype='"+d+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+o+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+o+"(a){return new "+o+"(a);}",M=new Function(m);return M()}else if(c===0){var m="function "+o+"(a,d) {this.data = a;this.offset = d};var proto="+o+".prototype;proto.dtype='"+d+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+o+"_copy() {return new "+o+"(this.data,this.offset)};proto.pick=function "+o+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+o+"_get(){return "+(u?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+o+"_set(v){return "+(u?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+o+"(a,b,c,d){return new "+o+"(a,d)}",M=new Function("TrivialArray",m);return M(t[d][0])}var m=["'use strict'"],N=S(c),O=N.map(function(p){return"i"+p}),D="this.offset+"+N.map(function(p){return"this.stride["+p+"]*i"+p}).join("+"),E=N.map(function(p){return"b"+p}).join(","),Z=N.map(function(p){return"c"+p}).join(",");m.push("function "+o+"(a,"+E+","+Z+",d){this.data=a","this.shape=["+E+"]","this.stride=["+Z+"]","this.offset=d|0}","var proto="+o+".prototype","proto.dtype='"+d+"'","proto.dimension="+c),m.push("Object.defineProperty(proto,'size',{get:function "+o+"_size(){return "+N.map(function(p){return"this.shape["+p+"]"}).join("*"),"}})"),c===1?m.push("proto.order=[0]"):(m.push("Object.defineProperty(proto,'order',{get:"),c<4?(m.push("function "+o+"_order(){"),c===2?m.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):c===3&&m.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):m.push("ORDER})")),m.push("proto.set=function "+o+"_set("+O.join(",")+",v){"),u?m.push("return this.data.set("+D+",v)}"):m.push("return this.data["+D+"]=v}"),m.push("proto.get=function "+o+"_get("+O.join(",")+"){"),u?m.push("return this.data.get("+D+")}"):m.push("return this.data["+D+"]}"),m.push("proto.index=function "+o+"_index(",O.join(),"){return "+D+"}"),m.push("proto.hi=function "+o+"_hi("+O.join(",")+"){return new "+o+"(this.data,"+N.map(function(p){return["(typeof i",p,"!=='number'||i",p,"<0)?this.shape[",p,"]:i",p,"|0"].join("")}).join(",")+","+N.map(function(p){return"this.stride["+p+"]"}).join(",")+",this.offset)}");var P=N.map(function(p){return"a"+p+"=this.shape["+p+"]"}),Y=N.map(function(p){return"c"+p+"=this.stride["+p+"]"});m.push("proto.lo=function "+o+"_lo("+O.join(",")+"){var b=this.offset,d=0,"+P.join(",")+","+Y.join(","));for(var U=0;U<c;++U)m.push("if(typeof i"+U+"==='number'&&i"+U+">=0){d=i"+U+"|0;b+=c"+U+"*d;a"+U+"-=d}");m.push("return new "+o+"(this.data,"+N.map(function(p){return"a"+p}).join(",")+","+N.map(function(p){return"c"+p}).join(",")+",b)}"),m.push("proto.step=function "+o+"_step("+O.join(",")+"){var "+N.map(function(p){return"a"+p+"=this.shape["+p+"]"}).join(",")+","+N.map(function(p){return"b"+p+"=this.stride["+p+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var U=0;U<c;++U)m.push("if(typeof i"+U+"==='number'){d=i"+U+"|0;if(d<0){c+=b"+U+"*(a"+U+"-1);a"+U+"=ceil(-a"+U+"/d)}else{a"+U+"=ceil(a"+U+"/d)}b"+U+"*=d}");m.push("return new "+o+"(this.data,"+N.map(function(p){return"a"+p}).join(",")+","+N.map(function(p){return"b"+p}).join(",")+",c)}");for(var B=new Array(c),A=new Array(c),U=0;U<c;++U)B[U]="a[i"+U+"]",A[U]="b[i"+U+"]";m.push("proto.transpose=function "+o+"_transpose("+O+"){"+O.map(function(p,C){return p+"=("+p+"===undefined?"+C+":"+p+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+o+"(this.data,"+B.join(",")+","+A.join(",")+",this.offset)}"),m.push("proto.pick=function "+o+"_pick("+O+"){var a=[],b=[],c=this.offset");for(var U=0;U<c;++U)m.push("if(typeof i"+U+"==='number'&&i"+U+">=0){c=(c+this.stride["+U+"]*i"+U+")|0}else{a.push(this.shape["+U+"]);b.push(this.stride["+U+"])}");m.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),m.push("return function construct_"+o+"(data,shape,stride,offset){return new "+o+"(data,"+N.map(function(p){return"shape["+p+"]"}).join(",")+","+N.map(function(p){return"stride["+p+"]"}).join(",")+",offset)}");var M=new Function("CTOR_LIST","ORDER",m.join(`
`));return M(t[d],r)}function n(d){if(b(d))return"buffer";if(k)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(d)?"array":"generic"}var t={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};function i(d,c,o,u){if(d===void 0){var Z=t.array[0];return Z([])}else typeof d=="number"&&(d=[d]);c===void 0&&(c=[d.length]);var m=c.length;if(o===void 0){o=new Array(m);for(var N=m-1,O=1;N>=0;--N)o[N]=O,O*=c[N]}if(u===void 0){u=0;for(var N=0;N<m;++N)o[N]<0&&(u-=(c[N]-1)*o[N])}for(var D=n(d),E=t[D];E.length<=m+1;)E.push(e(D,E.length-1));var Z=E[m+1];return Z(d,c,o,u)}K.exports=i},{"iota-array":27,"is-buffer":28}],38:[function(T,K,_){function S(r,e,n,d){var i=0,d=d===void 0?{}:d,c=d.loop===void 0?null:d.loop,o=d.palette===void 0?null:d.palette;if(e<=0||n<=0||e>65535||n>65535)throw"Width/Height invalid.";function u(Y){var U=Y.length;if(U<2||U>256||U&U-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return U}r[i++]=71,r[i++]=73,r[i++]=70,r[i++]=56,r[i++]=57,r[i++]=97;var m=0,N=0;if(o!==null){for(var O=u(o);O>>=1;)++m;if(O=1<<m,--m,d.background!==void 0){if(N=d.background,N>=O)throw"Background index out of range.";if(N===0)throw"Background index explicitly passed as 0."}}if(r[i++]=e&255,r[i++]=e>>8&255,r[i++]=n&255,r[i++]=n>>8&255,r[i++]=(o!==null?128:0)|m,r[i++]=N,r[i++]=0,o!==null)for(var D=0,E=o.length;D<E;++D){var Z=o[D];r[i++]=Z>>16&255,r[i++]=Z>>8&255,r[i++]=Z&255}if(c!==null){if(c<0||c>65535)throw"Loop count invalid.";r[i++]=33,r[i++]=255,r[i++]=11,r[i++]=78,r[i++]=69,r[i++]=84,r[i++]=83,r[i++]=67,r[i++]=65,r[i++]=80,r[i++]=69,r[i++]=50,r[i++]=46,r[i++]=48,r[i++]=3,r[i++]=1,r[i++]=c&255,r[i++]=c>>8&255,r[i++]=0}var P=!1;this.addFrame=function(Y,U,B,A,M,p){if(P===!0&&(--i,P=!1),p=p===void 0?{}:p,Y<0||U<0||Y>65535||U>65535)throw"x/y invalid.";if(B<=0||A<=0||B>65535||A>65535)throw"Width/Height invalid.";if(M.length<B*A)throw"Not enough pixels for the frame size.";var C=!0,V=p.palette;if(V==null&&(C=!1,V=o),V==null)throw"Must supply either a local or global palette.";for(var h=u(V),a=0;h>>=1;)++a;h=1<<a;var w=p.delay===void 0?0:p.delay,H=p.disposal===void 0?0:p.disposal;if(H<0||H>3)throw"Disposal out of range.";var $=!1,F=0;if(p.transparent!==void 0&&p.transparent!==null&&($=!0,F=p.transparent,F<0||F>=h))throw"Transparent color index.";if((H!==0||$||w!==0)&&(r[i++]=33,r[i++]=249,r[i++]=4,r[i++]=H<<2|($===!0?1:0),r[i++]=w&255,r[i++]=w>>8&255,r[i++]=F,r[i++]=0),r[i++]=44,r[i++]=Y&255,r[i++]=Y>>8&255,r[i++]=U&255,r[i++]=U>>8&255,r[i++]=B&255,r[i++]=B>>8&255,r[i++]=A&255,r[i++]=A>>8&255,r[i++]=C===!0?128|a-1:0,C===!0)for(var g=0,L=V.length;g<L;++g){var G=V[g];r[i++]=G>>16&255,r[i++]=G>>8&255,r[i++]=G&255}i=b(r,i,a<2?2:a,M)},this.end=function(){return P===!1&&(r[i++]=59,P=!0),i}}function b(r,e,n,t){r[e++]=n;var i=e++,d=1<<n,c=d-1,o=d+1,u=o+1,m=n+1,N=0,O=0;function D(p){for(;N>=p;)r[e++]=O&255,O>>=8,N-=8,e===i+256&&(r[i]=255,i=e++)}function E(p){O|=p<<N,N+=m,D(8)}var Z=t[0]&c,P={};E(d);for(var Y=1,U=t.length;Y<U;++Y){var B=t[Y]&c,A=Z<<8|B,M=P[A];if(M===void 0){for(O|=Z<<N,N+=m;N>=8;)r[e++]=O&255,O>>=8,N-=8,e===i+256&&(r[i]=255,i=e++);u===4096?(E(d),u=o+1,m=n+1,P={}):(u>=1<<m&&++m,P[A]=u++),Z=B}else Z=M}return E(Z),E(o),D(1),i+1===e?r[i]=0:(r[i]=e-i-1,r[e++]=0),e}function k(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!==56||r[e++]!==97)throw"Invalid GIF 87a/89a header.";var n=r[e++]|r[e++]<<8,t=r[e++]|r[e++]<<8,i=r[e++],d=i>>7,c=i&7,o=1<<c+1;r[e++],r[e++];var u=null;d&&(u=e,e+=o*3);var m=!0,N=[],O=0,D=null,E=0,Z=null;for(this.width=n,this.height=t;m&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,Z=r[e++]|r[e++]<<8,e++;else for(e+=12;;){var P=r[e++];if(P===0)break;e+=P}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw"Invalid graphics extension block.";var Y=r[e++];O=r[e++]|r[e++]<<8,D=r[e++],Y&1||(D=null),E=Y>>2&7,e++;break;case 254:for(;;){var P=r[e++];if(P===0)break;e+=P}break;default:throw"Unknown graphic control label: 0x"+r[e-1].toString(16)}break;case 44:var U=r[e++]|r[e++]<<8,B=r[e++]|r[e++]<<8,A=r[e++]|r[e++]<<8,M=r[e++]|r[e++]<<8,p=r[e++],C=p>>7,V=p>>6&1,h=p&7,a=1<<h+1,w=u,H=!1;if(C){var H=!0;w=e,e+=a*3}var $=e;for(e++;;){var P=r[e++];if(P===0)break;e+=P}N.push({x:U,y:B,width:A,height:M,has_local_palette:H,palette_offset:w,data_offset:$,data_length:e-$,transparent_index:D,interlaced:!!V,delay:O,disposal:E});break;case 59:m=!1;break;default:throw"Unknown gif block: 0x"+r[e-1].toString(16)}this.numFrames=function(){return N.length},this.loopCount=function(){return Z},this.frameInfo=function(F){if(F<0||F>=N.length)throw"Frame index out of range.";return N[F]},this.decodeAndBlitFrameBGRA=function(F,g){var L=this.frameInfo(F),G=L.width*L.height,re=new Uint8Array(G);l(r,L.data_offset,re,G);var le=L.palette_offset,ie=L.transparent_index;ie===null&&(ie=256);var ce=L.width,te=n-ce,he=ce,z=(L.y*n+L.x)*4,R=((L.y+L.height)*n+L.x)*4,J=z,ae=te*4;L.interlaced===!0&&(ae+=n*4*7);for(var oe=8,ee=0,ve=re.length;ee<ve;++ee){var x=re[ee];if(he===0&&(J+=ae,he=ce,J>=R&&(ae=te*4+n*4*(oe-1),J=z+(ce+te)*(oe<<1),oe>>=1)),x===ie)J+=4;else{var f=r[le+x*3],v=r[le+x*3+1],y=r[le+x*3+2];g[J++]=y,g[J++]=v,g[J++]=f,g[J++]=255}--he}},this.decodeAndBlitFrameRGBA=function(F,g){var L=this.frameInfo(F),G=L.width*L.height,re=new Uint8Array(G);l(r,L.data_offset,re,G);var le=L.palette_offset,ie=L.transparent_index;ie===null&&(ie=256);var ce=L.width,te=n-ce,he=ce,z=(L.y*n+L.x)*4,R=((L.y+L.height)*n+L.x)*4,J=z,ae=te*4;L.interlaced===!0&&(ae+=n*4*7);for(var oe=8,ee=0,ve=re.length;ee<ve;++ee){var x=re[ee];if(he===0&&(J+=ae,he=ce,J>=R&&(ae=te*4+n*4*(oe-1),J=z+(ce+te)*(oe<<1),oe>>=1)),x===ie)J+=4;else{var f=r[le+x*3],v=r[le+x*3+1],y=r[le+x*3+2];g[J++]=f,g[J++]=v,g[J++]=y,g[J++]=255}--he}}}function l(r,e,n,t){for(var i=r[e++],d=1<<i,c=d+1,o=c+1,u=i+1,m=(1<<u)-1,N=0,O=0,D=0,E=r[e++],Z=new Int32Array(4096),P=null;;){for(;N<16&&E!==0;)O|=r[e++]<<N,N+=8,E===1?E=r[e++]:--E;if(N<u)break;var Y=O&m;if(O>>=u,N-=u,Y===d){o=c+1,u=i+1,m=(1<<u)-1,P=null;continue}else if(Y===c)break;for(var U=Y<o?Y:P,B=0,A=U;A>d;)A=Z[A]>>8,++B;var M=A,p=D+B+(U!==Y?1:0);if(p>t){console.log("Warning, gif stream longer than expected.");return}n[D++]=M,D+=B;var C=D;for(U!==Y&&(n[D++]=M),A=U;B--;)A=Z[A],n[--C]=A&255,A>>=8;P!==null&&o<4096&&(Z[o++]=P<<8|M,o>=m+1&&u<12&&(++u,m=m<<1|1)),P=Y}return D!==t&&console.log("Warning, gif stream shorter than expected."),n}try{_.GifWriter=S,_.GifReader=k}catch{}},{}],39:[function(T,K,_){var S=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function b(r,e){return Object.prototype.hasOwnProperty.call(r,e)}_.assign=function(r){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var t in n)b(n,t)&&(r[t]=n[t])}}return r},_.shrinkBuf=function(r,e){return r.length===e?r:r.subarray?r.subarray(0,e):(r.length=e,r)};var k={arraySet:function(r,e,n,t,i){if(e.subarray&&r.subarray){r.set(e.subarray(n,n+t),i);return}for(var d=0;d<t;d++)r[i+d]=e[n+d]},flattenChunks:function(r){var e,n,t,i,d,c;for(t=0,e=0,n=r.length;e<n;e++)t+=r[e].length;for(c=new Uint8Array(t),i=0,e=0,n=r.length;e<n;e++)d=r[e],c.set(d,i),i+=d.length;return c}},l={arraySet:function(r,e,n,t,i){for(var d=0;d<t;d++)r[i+d]=e[n+d]},flattenChunks:function(r){return[].concat.apply([],r)}};_.setTyped=function(r){r?(_.Buf8=Uint8Array,_.Buf16=Uint16Array,_.Buf32=Int32Array,_.assign(_,k)):(_.Buf8=Array,_.Buf16=Array,_.Buf32=Array,_.assign(_,l))},_.setTyped(S)},{}],40:[function(T,K,_){function S(b,k,l,r){for(var e=b&65535|0,n=b>>>16&65535|0,t=0;l!==0;){t=l>2e3?2e3:l,l-=t;do e=e+k[r++]|0,n=n+e|0;while(--t);e%=65521,n%=65521}return e|n<<16|0}K.exports=S},{}],41:[function(T,K,_){K.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],42:[function(T,K,_){function S(){for(var l,r=[],e=0;e<256;e++){l=e;for(var n=0;n<8;n++)l=l&1?3988292384^l>>>1:l>>>1;r[e]=l}return r}var b=S();function k(l,r,e,n){var t=b,i=n+e;l^=-1;for(var d=n;d<i;d++)l=l>>>8^t[(l^r[d])&255];return l^-1}K.exports=k},{}],43:[function(T,K,_){var S=T("../utils/common"),b=T("./trees"),k=T("./adler32"),l=T("./crc32"),r=T("./messages"),e=0,n=1,t=3,i=4,d=5,c=0,o=1,u=-2,m=-3,N=-5,O=-1,D=1,E=2,Z=3,P=4,Y=0,U=2,B=8,A=9,M=15,p=8,C=29,V=256,h=V+1+C,a=30,w=19,H=2*h+1,$=15,F=3,g=258,L=g+F+1,G=32,re=42,le=69,ie=73,ce=91,te=103,he=113,z=666,R=1,J=2,ae=3,oe=4,ee=3;function ve(s,ue){return s.msg=r[ue],ue}function x(s){return(s<<1)-(s>4?9:0)}function f(s){for(var ue=s.length;--ue>=0;)s[ue]=0}function v(s){var ue=s.state,de=ue.pending;de>s.avail_out&&(de=s.avail_out),de!==0&&(S.arraySet(s.output,ue.pending_buf,ue.pending_out,de,s.next_out),s.next_out+=de,ue.pending_out+=de,s.total_out+=de,s.avail_out-=de,ue.pending-=de,ue.pending===0&&(ue.pending_out=0))}function y(s,ue){b._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,ue),s.block_start=s.strstart,v(s.strm)}function X(s,ue){s.pending_buf[s.pending++]=ue}function ne(s,ue){s.pending_buf[s.pending++]=ue>>>8&255,s.pending_buf[s.pending++]=ue&255}function se(s,ue,de,j){var Q=s.avail_in;return Q>j&&(Q=j),Q===0?0:(s.avail_in-=Q,S.arraySet(ue,s.input,s.next_in,Q,de),s.state.wrap===1?s.adler=k(s.adler,ue,Q,de):s.state.wrap===2&&(s.adler=l(s.adler,ue,Q,de)),s.next_in+=Q,s.total_in+=Q,Q)}function Ee(s,ue){var de=s.max_chain_length,j=s.strstart,Q,fe,Ie=s.prev_length,Ae=s.nice_match,Ce=s.strstart>s.w_size-L?s.strstart-(s.w_size-L):0,Be=s.window,Ve=s.w_mask,Oe=s.prev,De=s.strstart+g,Ue=Be[j+Ie-1],Pe=Be[j+Ie];s.prev_length>=s.good_match&&(de>>=2),Ae>s.lookahead&&(Ae=s.lookahead);do if(Q=ue,!(Be[Q+Ie]!==Pe||Be[Q+Ie-1]!==Ue||Be[Q]!==Be[j]||Be[++Q]!==Be[j+1])){j+=2,Q++;do;while(Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&Be[++j]===Be[++Q]&&j<De);if(fe=g-(De-j),j=De-g,fe>Ie){if(s.match_start=ue,Ie=fe,fe>=Ae)break;Ue=Be[j+Ie-1],Pe=Be[j+Ie]}}while((ue=Oe[ue&Ve])>Ce&&--de!==0);return Ie<=s.lookahead?Ie:s.lookahead}function ge(s){var ue=s.w_size,de,j,Q,fe,Ie;do{if(fe=s.window_size-s.lookahead-s.strstart,s.strstart>=ue+(ue-L)){S.arraySet(s.window,s.window,ue,ue,0),s.match_start-=ue,s.strstart-=ue,s.block_start-=ue,j=s.hash_size,de=j;do Q=s.head[--de],s.head[de]=Q>=ue?Q-ue:0;while(--j);j=ue,de=j;do Q=s.prev[--de],s.prev[de]=Q>=ue?Q-ue:0;while(--j);fe+=ue}if(s.strm.avail_in===0)break;if(j=se(s.strm,s.window,s.strstart+s.lookahead,fe),s.lookahead+=j,s.lookahead+s.insert>=F)for(Ie=s.strstart-s.insert,s.ins_h=s.window[Ie],s.ins_h=(s.ins_h<<s.hash_shift^s.window[Ie+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[Ie+F-1])&s.hash_mask,s.prev[Ie&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=Ie,Ie++,s.insert--,!(s.lookahead+s.insert<F)););}while(s.lookahead<L&&s.strm.avail_in!==0)}function ye(s,ue){var de=65535;for(de>s.pending_buf_size-5&&(de=s.pending_buf_size-5);;){if(s.lookahead<=1){if(ge(s),s.lookahead===0&&ue===e)return R;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var j=s.block_start+de;if((s.strstart===0||s.strstart>=j)&&(s.lookahead=s.strstart-j,s.strstart=j,y(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-L&&(y(s,!1),s.strm.avail_out===0))return R}return s.insert=0,ue===i?(y(s,!0),s.strm.avail_out===0?ae:oe):(s.strstart>s.block_start&&(y(s,!1),s.strm.avail_out===0),R)}function we(s,ue){for(var de,j;;){if(s.lookahead<L){if(ge(s),s.lookahead<L&&ue===e)return R;if(s.lookahead===0)break}if(de=0,s.lookahead>=F&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+F-1])&s.hash_mask,de=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),de!==0&&s.strstart-de<=s.w_size-L&&(s.match_length=Ee(s,de)),s.match_length>=F)if(j=b._tr_tally(s,s.strstart-s.match_start,s.match_length-F),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=F){s.match_length--;do s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+F-1])&s.hash_mask,de=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else j=b._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(j&&(y(s,!1),s.strm.avail_out===0))return R}return s.insert=s.strstart<F-1?s.strstart:F-1,ue===i?(y(s,!0),s.strm.avail_out===0?ae:oe):s.last_lit&&(y(s,!1),s.strm.avail_out===0)?R:J}function Se(s,ue){for(var de,j,Q;;){if(s.lookahead<L){if(ge(s),s.lookahead<L&&ue===e)return R;if(s.lookahead===0)break}if(de=0,s.lookahead>=F&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+F-1])&s.hash_mask,de=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=F-1,de!==0&&s.prev_length<s.max_lazy_match&&s.strstart-de<=s.w_size-L&&(s.match_length=Ee(s,de),s.match_length<=5&&(s.strategy===D||s.match_length===F&&s.strstart-s.match_start>4096)&&(s.match_length=F-1)),s.prev_length>=F&&s.match_length<=s.prev_length){Q=s.strstart+s.lookahead-F,j=b._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-F),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=Q&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+F-1])&s.hash_mask,de=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=F-1,s.strstart++,j&&(y(s,!1),s.strm.avail_out===0))return R}else if(s.match_available){if(j=b._tr_tally(s,0,s.window[s.strstart-1]),j&&y(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return R}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(j=b._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<F-1?s.strstart:F-1,ue===i?(y(s,!0),s.strm.avail_out===0?ae:oe):s.last_lit&&(y(s,!1),s.strm.avail_out===0)?R:J}function Le(s,ue){for(var de,j,Q,fe,Ie=s.window;;){if(s.lookahead<=g){if(ge(s),s.lookahead<=g&&ue===e)return R;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=F&&s.strstart>0&&(Q=s.strstart-1,j=Ie[Q],j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q])){fe=s.strstart+g;do;while(j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&j===Ie[++Q]&&Q<fe);s.match_length=g-(fe-Q),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=F?(de=b._tr_tally(s,1,s.match_length-F),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(de=b._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),de&&(y(s,!1),s.strm.avail_out===0))return R}return s.insert=0,ue===i?(y(s,!0),s.strm.avail_out===0?ae:oe):s.last_lit&&(y(s,!1),s.strm.avail_out===0)?R:J}function ke(s,ue){for(var de;;){if(s.lookahead===0&&(ge(s),s.lookahead===0)){if(ue===e)return R;break}if(s.match_length=0,de=b._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,de&&(y(s,!1),s.strm.avail_out===0))return R}return s.insert=0,ue===i?(y(s,!0),s.strm.avail_out===0?ae:oe):s.last_lit&&(y(s,!1),s.strm.avail_out===0)?R:J}function Re(s,ue,de,j,Q){this.good_length=s,this.max_lazy=ue,this.nice_length=de,this.max_chain=j,this.func=Q}var Ne;Ne=[new Re(0,0,0,0,ye),new Re(4,4,8,4,we),new Re(4,5,16,8,we),new Re(4,6,32,32,we),new Re(4,4,16,16,Se),new Re(8,16,32,32,Se),new Re(8,16,128,128,Se),new Re(8,32,128,256,Se),new Re(32,128,258,1024,Se),new Re(32,258,258,4096,Se)];function xe(s){s.window_size=2*s.w_size,f(s.head),s.max_lazy_match=Ne[s.level].max_lazy,s.good_match=Ne[s.level].good_length,s.nice_match=Ne[s.level].nice_length,s.max_chain_length=Ne[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=F-1,s.match_available=0,s.ins_h=0}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(H*2),this.dyn_dtree=new S.Buf16((2*a+1)*2),this.bl_tree=new S.Buf16((2*w+1)*2),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16($+1),this.heap=new S.Buf16(2*h+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*h+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(s){var ue;return!s||!s.state?ve(s,u):(s.total_in=s.total_out=0,s.data_type=U,ue=s.state,ue.pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?re:he,s.adler=ue.wrap===2?0:1,ue.last_flush=e,b._tr_init(ue),c)}function me(s){var ue=_e(s);return ue===c&&xe(s.state),ue}function Te(s,ue){return!s||!s.state||s.state.wrap!==2?u:(s.state.gzhead=ue,c)}function q(s,ue,de,j,Q,fe){if(!s)return u;var Ie=1;if(ue===O&&(ue=6),j<0?(Ie=0,j=-j):j>15&&(Ie=2,j-=16),Q<1||Q>A||de!==B||j<8||j>15||ue<0||ue>9||fe<0||fe>P)return ve(s,u);j===8&&(j=9);var Ae=new W;return s.state=Ae,Ae.strm=s,Ae.wrap=Ie,Ae.gzhead=null,Ae.w_bits=j,Ae.w_size=1<<Ae.w_bits,Ae.w_mask=Ae.w_size-1,Ae.hash_bits=Q+7,Ae.hash_size=1<<Ae.hash_bits,Ae.hash_mask=Ae.hash_size-1,Ae.hash_shift=~~((Ae.hash_bits+F-1)/F),Ae.window=new S.Buf8(Ae.w_size*2),Ae.head=new S.Buf16(Ae.hash_size),Ae.prev=new S.Buf16(Ae.w_size),Ae.lit_bufsize=1<<Q+6,Ae.pending_buf_size=Ae.lit_bufsize*4,Ae.pending_buf=new S.Buf8(Ae.pending_buf_size),Ae.d_buf=1*Ae.lit_bufsize,Ae.l_buf=(1+2)*Ae.lit_bufsize,Ae.level=ue,Ae.strategy=fe,Ae.method=de,me(s)}function pe(s,ue){return q(s,ue,B,M,p,Y)}function I(s,ue){var de,j,Q,fe;if(!s||!s.state||ue>d||ue<0)return s?ve(s,u):u;if(j=s.state,!s.output||!s.input&&s.avail_in!==0||j.status===z&&ue!==i)return ve(s,s.avail_out===0?N:u);if(j.strm=s,de=j.last_flush,j.last_flush=ue,j.status===re)if(j.wrap===2)s.adler=0,X(j,31),X(j,139),X(j,8),j.gzhead?(X(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),X(j,j.gzhead.time&255),X(j,j.gzhead.time>>8&255),X(j,j.gzhead.time>>16&255),X(j,j.gzhead.time>>24&255),X(j,j.level===9?2:j.strategy>=E||j.level<2?4:0),X(j,j.gzhead.os&255),j.gzhead.extra&&j.gzhead.extra.length&&(X(j,j.gzhead.extra.length&255),X(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(s.adler=l(s.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=le):(X(j,0),X(j,0),X(j,0),X(j,0),X(j,0),X(j,j.level===9?2:j.strategy>=E||j.level<2?4:0),X(j,ee),j.status=he);else{var Ie=B+(j.w_bits-8<<4)<<8,Ae=-1;j.strategy>=E||j.level<2?Ae=0:j.level<6?Ae=1:j.level===6?Ae=2:Ae=3,Ie|=Ae<<6,j.strstart!==0&&(Ie|=G),Ie+=31-Ie%31,j.status=he,ne(j,Ie),j.strstart!==0&&(ne(j,s.adler>>>16),ne(j,s.adler&65535)),s.adler=1}if(j.status===le)if(j.gzhead.extra){for(Q=j.pending;j.gzindex<(j.gzhead.extra.length&65535)&&!(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),v(s),Q=j.pending,j.pending===j.pending_buf_size));)X(j,j.gzhead.extra[j.gzindex]&255),j.gzindex++;j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=ie)}else j.status=ie;if(j.status===ie)if(j.gzhead.name){Q=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),v(s),Q=j.pending,j.pending===j.pending_buf_size)){fe=1;break}j.gzindex<j.gzhead.name.length?fe=j.gzhead.name.charCodeAt(j.gzindex++)&255:fe=0,X(j,fe)}while(fe!==0);j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),fe===0&&(j.gzindex=0,j.status=ce)}else j.status=ce;if(j.status===ce)if(j.gzhead.comment){Q=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),v(s),Q=j.pending,j.pending===j.pending_buf_size)){fe=1;break}j.gzindex<j.gzhead.comment.length?fe=j.gzhead.comment.charCodeAt(j.gzindex++)&255:fe=0,X(j,fe)}while(fe!==0);j.gzhead.hcrc&&j.pending>Q&&(s.adler=l(s.adler,j.pending_buf,j.pending-Q,Q)),fe===0&&(j.status=te)}else j.status=te;if(j.status===te&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&v(s),j.pending+2<=j.pending_buf_size&&(X(j,s.adler&255),X(j,s.adler>>8&255),s.adler=0,j.status=he)):j.status=he),j.pending!==0){if(v(s),s.avail_out===0)return j.last_flush=-1,c}else if(s.avail_in===0&&x(ue)<=x(de)&&ue!==i)return ve(s,N);if(j.status===z&&s.avail_in!==0)return ve(s,N);if(s.avail_in!==0||j.lookahead!==0||ue!==e&&j.status!==z){var Ce=j.strategy===E?ke(j,ue):j.strategy===Z?Le(j,ue):Ne[j.level].func(j,ue);if((Ce===ae||Ce===oe)&&(j.status=z),Ce===R||Ce===ae)return s.avail_out===0&&(j.last_flush=-1),c;if(Ce===J&&(ue===n?b._tr_align(j):ue!==d&&(b._tr_stored_block(j,0,0,!1),ue===t&&(f(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),v(s),s.avail_out===0))return j.last_flush=-1,c}return ue!==i?c:j.wrap<=0?o:(j.wrap===2?(X(j,s.adler&255),X(j,s.adler>>8&255),X(j,s.adler>>16&255),X(j,s.adler>>24&255),X(j,s.total_in&255),X(j,s.total_in>>8&255),X(j,s.total_in>>16&255),X(j,s.total_in>>24&255)):(ne(j,s.adler>>>16),ne(j,s.adler&65535)),v(s),j.wrap>0&&(j.wrap=-j.wrap),j.pending!==0?c:o)}function be(s){var ue;return!s||!s.state?u:(ue=s.state.status,ue!==re&&ue!==le&&ue!==ie&&ue!==ce&&ue!==te&&ue!==he&&ue!==z?ve(s,u):(s.state=null,ue===he?ve(s,m):c))}function Me(s,ue){var de=ue.length,j,Q,fe,Ie,Ae,Ce,Be,Ve;if(!s||!s.state||(j=s.state,Ie=j.wrap,Ie===2||Ie===1&&j.status!==re||j.lookahead))return u;for(Ie===1&&(s.adler=k(s.adler,ue,de,0)),j.wrap=0,de>=j.w_size&&(Ie===0&&(f(j.head),j.strstart=0,j.block_start=0,j.insert=0),Ve=new S.Buf8(j.w_size),S.arraySet(Ve,ue,de-j.w_size,j.w_size,0),ue=Ve,de=j.w_size),Ae=s.avail_in,Ce=s.next_in,Be=s.input,s.avail_in=de,s.next_in=0,s.input=ue,ge(j);j.lookahead>=F;){Q=j.strstart,fe=j.lookahead-(F-1);do j.ins_h=(j.ins_h<<j.hash_shift^j.window[Q+F-1])&j.hash_mask,j.prev[Q&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=Q,Q++;while(--fe);j.strstart=Q,j.lookahead=F-1,ge(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=F-1,j.match_available=0,s.next_in=Ce,s.input=Be,s.avail_in=Ae,j.wrap=Ie,c}_.deflateInit=pe,_.deflateInit2=q,_.deflateReset=me,_.deflateResetKeep=_e,_.deflateSetHeader=Te,_.deflate=I,_.deflateEnd=be,_.deflateSetDictionary=Me,_.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":39,"./adler32":40,"./crc32":42,"./messages":47,"./trees":48}],44:[function(T,K,_){var S=30,b=12;K.exports=function(l,r){var e,n,t,i,d,c,o,u,m,N,O,D,E,Z,P,Y,U,B,A,M,p,C,V,h,a;e=l.state,n=l.next_in,h=l.input,t=n+(l.avail_in-5),i=l.next_out,a=l.output,d=i-(r-l.avail_out),c=i+(l.avail_out-257),o=e.dmax,u=e.wsize,m=e.whave,N=e.wnext,O=e.window,D=e.hold,E=e.bits,Z=e.lencode,P=e.distcode,Y=(1<<e.lenbits)-1,U=(1<<e.distbits)-1;e:do{E<15&&(D+=h[n++]<<E,E+=8,D+=h[n++]<<E,E+=8),B=Z[D&Y];t:for(;;){if(A=B>>>24,D>>>=A,E-=A,A=B>>>16&255,A===0)a[i++]=B&65535;else if(A&16){M=B&65535,A&=15,A&&(E<A&&(D+=h[n++]<<E,E+=8),M+=D&(1<<A)-1,D>>>=A,E-=A),E<15&&(D+=h[n++]<<E,E+=8,D+=h[n++]<<E,E+=8),B=P[D&U];r:for(;;){if(A=B>>>24,D>>>=A,E-=A,A=B>>>16&255,A&16){if(p=B&65535,A&=15,E<A&&(D+=h[n++]<<E,E+=8,E<A&&(D+=h[n++]<<E,E+=8)),p+=D&(1<<A)-1,p>o){l.msg="invalid distance too far back",e.mode=S;break e}if(D>>>=A,E-=A,A=i-d,p>A){if(A=p-A,A>m&&e.sane){l.msg="invalid distance too far back",e.mode=S;break e}if(C=0,V=O,N===0){if(C+=u-A,A<M){M-=A;do a[i++]=O[C++];while(--A);C=i-p,V=a}}else if(N<A){if(C+=u+N-A,A-=N,A<M){M-=A;do a[i++]=O[C++];while(--A);if(C=0,N<M){A=N,M-=A;do a[i++]=O[C++];while(--A);C=i-p,V=a}}}else if(C+=N-A,A<M){M-=A;do a[i++]=O[C++];while(--A);C=i-p,V=a}for(;M>2;)a[i++]=V[C++],a[i++]=V[C++],a[i++]=V[C++],M-=3;M&&(a[i++]=V[C++],M>1&&(a[i++]=V[C++]))}else{C=i-p;do a[i++]=a[C++],a[i++]=a[C++],a[i++]=a[C++],M-=3;while(M>2);M&&(a[i++]=a[C++],M>1&&(a[i++]=a[C++]))}}else if(A&64){l.msg="invalid distance code",e.mode=S;break e}else{B=P[(B&65535)+(D&(1<<A)-1)];continue r}break}}else if(A&64)if(A&32){e.mode=b;break e}else{l.msg="invalid literal/length code",e.mode=S;break e}else{B=Z[(B&65535)+(D&(1<<A)-1)];continue t}break}}while(n<t&&i<c);M=E>>3,n-=M,E-=M<<3,D&=(1<<E)-1,l.next_in=n,l.next_out=i,l.avail_in=n<t?5+(t-n):5-(n-t),l.avail_out=i<c?257+(c-i):257-(i-c),e.hold=D,e.bits=E}},{}],45:[function(T,K,_){var S=T("../utils/common"),b=T("./adler32"),k=T("./crc32"),l=T("./inffast"),r=T("./inftrees"),e=0,n=1,t=2,i=4,d=5,c=6,o=0,u=1,m=2,N=-2,O=-3,D=-4,E=-5,Z=8,P=1,Y=2,U=3,B=4,A=5,M=6,p=7,C=8,V=9,h=10,a=11,w=12,H=13,$=14,F=15,g=16,L=17,G=18,re=19,le=20,ie=21,ce=22,te=23,he=24,z=25,R=26,J=27,ae=28,oe=29,ee=30,ve=31,x=32,f=852,v=592,y=15,X=y;function ne(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function se(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ee(q){var pe;return!q||!q.state?N:(pe=q.state,q.total_in=q.total_out=pe.total=0,q.msg="",pe.wrap&&(q.adler=pe.wrap&1),pe.mode=P,pe.last=0,pe.havedict=0,pe.dmax=32768,pe.head=null,pe.hold=0,pe.bits=0,pe.lencode=pe.lendyn=new S.Buf32(f),pe.distcode=pe.distdyn=new S.Buf32(v),pe.sane=1,pe.back=-1,o)}function ge(q){var pe;return!q||!q.state?N:(pe=q.state,pe.wsize=0,pe.whave=0,pe.wnext=0,Ee(q))}function ye(q,pe){var I,be;return!q||!q.state||(be=q.state,pe<0?(I=0,pe=-pe):(I=(pe>>4)+1,pe<48&&(pe&=15)),pe&&(pe<8||pe>15))?N:(be.window!==null&&be.wbits!==pe&&(be.window=null),be.wrap=I,be.wbits=pe,ge(q))}function we(q,pe){var I,be;return q?(be=new se,q.state=be,be.window=null,I=ye(q,pe),I!==o&&(q.state=null),I):N}function Se(q){return we(q,X)}var Le=!0,ke,Re;function Ne(q){if(Le){var pe;for(ke=new S.Buf32(512),Re=new S.Buf32(32),pe=0;pe<144;)q.lens[pe++]=8;for(;pe<256;)q.lens[pe++]=9;for(;pe<280;)q.lens[pe++]=7;for(;pe<288;)q.lens[pe++]=8;for(r(n,q.lens,0,288,ke,0,q.work,{bits:9}),pe=0;pe<32;)q.lens[pe++]=5;r(t,q.lens,0,32,Re,0,q.work,{bits:5}),Le=!1}q.lencode=ke,q.lenbits=9,q.distcode=Re,q.distbits=5}function xe(q,pe,I,be){var Me,s=q.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new S.Buf8(s.wsize)),be>=s.wsize?(S.arraySet(s.window,pe,I-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(Me=s.wsize-s.wnext,Me>be&&(Me=be),S.arraySet(s.window,pe,I-be,Me,s.wnext),be-=Me,be?(S.arraySet(s.window,pe,I-be,be,0),s.wnext=be,s.whave=s.wsize):(s.wnext+=Me,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=Me))),0}function W(q,pe){var I,be,Me,s,ue,de,j,Q,fe,Ie,Ae,Ce,Be,Ve,Oe=0,De,Ue,Pe,ze,Ge,Ye,je,Ze,Fe=new S.Buf8(4),We,He,Xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return N;I=q.state,I.mode===w&&(I.mode=H),ue=q.next_out,Me=q.output,j=q.avail_out,s=q.next_in,be=q.input,de=q.avail_in,Q=I.hold,fe=I.bits,Ie=de,Ae=j,Ze=o;e:for(;;)switch(I.mode){case P:if(I.wrap===0){I.mode=H;break}for(;fe<16;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(I.wrap&2&&Q===35615){I.check=0,Fe[0]=Q&255,Fe[1]=Q>>>8&255,I.check=k(I.check,Fe,2,0),Q=0,fe=0,I.mode=Y;break}if(I.flags=0,I.head&&(I.head.done=!1),!(I.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){q.msg="incorrect header check",I.mode=ee;break}if((Q&15)!==Z){q.msg="unknown compression method",I.mode=ee;break}if(Q>>>=4,fe-=4,je=(Q&15)+8,I.wbits===0)I.wbits=je;else if(je>I.wbits){q.msg="invalid window size",I.mode=ee;break}I.dmax=1<<je,q.adler=I.check=1,I.mode=Q&512?h:w,Q=0,fe=0;break;case Y:for(;fe<16;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(I.flags=Q,(I.flags&255)!==Z){q.msg="unknown compression method",I.mode=ee;break}if(I.flags&57344){q.msg="unknown header flags set",I.mode=ee;break}I.head&&(I.head.text=Q>>8&1),I.flags&512&&(Fe[0]=Q&255,Fe[1]=Q>>>8&255,I.check=k(I.check,Fe,2,0)),Q=0,fe=0,I.mode=U;case U:for(;fe<32;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.head&&(I.head.time=Q),I.flags&512&&(Fe[0]=Q&255,Fe[1]=Q>>>8&255,Fe[2]=Q>>>16&255,Fe[3]=Q>>>24&255,I.check=k(I.check,Fe,4,0)),Q=0,fe=0,I.mode=B;case B:for(;fe<16;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.head&&(I.head.xflags=Q&255,I.head.os=Q>>8),I.flags&512&&(Fe[0]=Q&255,Fe[1]=Q>>>8&255,I.check=k(I.check,Fe,2,0)),Q=0,fe=0,I.mode=A;case A:if(I.flags&1024){for(;fe<16;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.length=Q,I.head&&(I.head.extra_len=Q),I.flags&512&&(Fe[0]=Q&255,Fe[1]=Q>>>8&255,I.check=k(I.check,Fe,2,0)),Q=0,fe=0}else I.head&&(I.head.extra=null);I.mode=M;case M:if(I.flags&1024&&(Ce=I.length,Ce>de&&(Ce=de),Ce&&(I.head&&(je=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),S.arraySet(I.head.extra,be,s,Ce,je)),I.flags&512&&(I.check=k(I.check,be,Ce,s)),de-=Ce,s+=Ce,I.length-=Ce),I.length))break e;I.length=0,I.mode=p;case p:if(I.flags&2048){if(de===0)break e;Ce=0;do je=be[s+Ce++],I.head&&je&&I.length<65536&&(I.head.name+=String.fromCharCode(je));while(je&&Ce<de);if(I.flags&512&&(I.check=k(I.check,be,Ce,s)),de-=Ce,s+=Ce,je)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=C;case C:if(I.flags&4096){if(de===0)break e;Ce=0;do je=be[s+Ce++],I.head&&je&&I.length<65536&&(I.head.comment+=String.fromCharCode(je));while(je&&Ce<de);if(I.flags&512&&(I.check=k(I.check,be,Ce,s)),de-=Ce,s+=Ce,je)break e}else I.head&&(I.head.comment=null);I.mode=V;case V:if(I.flags&512){for(;fe<16;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(Q!==(I.check&65535)){q.msg="header crc mismatch",I.mode=ee;break}Q=0,fe=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),q.adler=I.check=0,I.mode=w;break;case h:for(;fe<32;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}q.adler=I.check=ne(Q),Q=0,fe=0,I.mode=a;case a:if(I.havedict===0)return q.next_out=ue,q.avail_out=j,q.next_in=s,q.avail_in=de,I.hold=Q,I.bits=fe,m;q.adler=I.check=1,I.mode=w;case w:if(pe===d||pe===c)break e;case H:if(I.last){Q>>>=fe&7,fe-=fe&7,I.mode=J;break}for(;fe<3;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}switch(I.last=Q&1,Q>>>=1,fe-=1,Q&3){case 0:I.mode=$;break;case 1:if(Ne(I),I.mode=le,pe===c){Q>>>=2,fe-=2;break e}break;case 2:I.mode=L;break;case 3:q.msg="invalid block type",I.mode=ee}Q>>>=2,fe-=2;break;case $:for(Q>>>=fe&7,fe-=fe&7;fe<32;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if((Q&65535)!==(Q>>>16^65535)){q.msg="invalid stored block lengths",I.mode=ee;break}if(I.length=Q&65535,Q=0,fe=0,I.mode=F,pe===c)break e;case F:I.mode=g;case g:if(Ce=I.length,Ce){if(Ce>de&&(Ce=de),Ce>j&&(Ce=j),Ce===0)break e;S.arraySet(Me,be,s,Ce,ue),de-=Ce,s+=Ce,j-=Ce,ue+=Ce,I.length-=Ce;break}I.mode=w;break;case L:for(;fe<14;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(I.nlen=(Q&31)+257,Q>>>=5,fe-=5,I.ndist=(Q&31)+1,Q>>>=5,fe-=5,I.ncode=(Q&15)+4,Q>>>=4,fe-=4,I.nlen>286||I.ndist>30){q.msg="too many length or distance symbols",I.mode=ee;break}I.have=0,I.mode=G;case G:for(;I.have<I.ncode;){for(;fe<3;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.lens[Xe[I.have++]]=Q&7,Q>>>=3,fe-=3}for(;I.have<19;)I.lens[Xe[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,We={bits:I.lenbits},Ze=r(e,I.lens,0,19,I.lencode,0,I.work,We),I.lenbits=We.bits,Ze){q.msg="invalid code lengths set",I.mode=ee;break}I.have=0,I.mode=re;case re:for(;I.have<I.nlen+I.ndist;){for(;Oe=I.lencode[Q&(1<<I.lenbits)-1],De=Oe>>>24,Ue=Oe>>>16&255,Pe=Oe&65535,!(De<=fe);){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(Pe<16)Q>>>=De,fe-=De,I.lens[I.have++]=Pe;else{if(Pe===16){for(He=De+2;fe<He;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(Q>>>=De,fe-=De,I.have===0){q.msg="invalid bit length repeat",I.mode=ee;break}je=I.lens[I.have-1],Ce=3+(Q&3),Q>>>=2,fe-=2}else if(Pe===17){for(He=De+3;fe<He;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}Q>>>=De,fe-=De,je=0,Ce=3+(Q&7),Q>>>=3,fe-=3}else{for(He=De+7;fe<He;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}Q>>>=De,fe-=De,je=0,Ce=11+(Q&127),Q>>>=7,fe-=7}if(I.have+Ce>I.nlen+I.ndist){q.msg="invalid bit length repeat",I.mode=ee;break}for(;Ce--;)I.lens[I.have++]=je}}if(I.mode===ee)break;if(I.lens[256]===0){q.msg="invalid code -- missing end-of-block",I.mode=ee;break}if(I.lenbits=9,We={bits:I.lenbits},Ze=r(n,I.lens,0,I.nlen,I.lencode,0,I.work,We),I.lenbits=We.bits,Ze){q.msg="invalid literal/lengths set",I.mode=ee;break}if(I.distbits=6,I.distcode=I.distdyn,We={bits:I.distbits},Ze=r(t,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,We),I.distbits=We.bits,Ze){q.msg="invalid distances set",I.mode=ee;break}if(I.mode=le,pe===c)break e;case le:I.mode=ie;case ie:if(de>=6&&j>=258){q.next_out=ue,q.avail_out=j,q.next_in=s,q.avail_in=de,I.hold=Q,I.bits=fe,l(q,Ae),ue=q.next_out,Me=q.output,j=q.avail_out,s=q.next_in,be=q.input,de=q.avail_in,Q=I.hold,fe=I.bits,I.mode===w&&(I.back=-1);break}for(I.back=0;Oe=I.lencode[Q&(1<<I.lenbits)-1],De=Oe>>>24,Ue=Oe>>>16&255,Pe=Oe&65535,!(De<=fe);){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(Ue&&!(Ue&240)){for(ze=De,Ge=Ue,Ye=Pe;Oe=I.lencode[Ye+((Q&(1<<ze+Ge)-1)>>ze)],De=Oe>>>24,Ue=Oe>>>16&255,Pe=Oe&65535,!(ze+De<=fe);){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}Q>>>=ze,fe-=ze,I.back+=ze}if(Q>>>=De,fe-=De,I.back+=De,I.length=Pe,Ue===0){I.mode=R;break}if(Ue&32){I.back=-1,I.mode=w;break}if(Ue&64){q.msg="invalid literal/length code",I.mode=ee;break}I.extra=Ue&15,I.mode=ce;case ce:if(I.extra){for(He=I.extra;fe<He;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.length+=Q&(1<<I.extra)-1,Q>>>=I.extra,fe-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=te;case te:for(;Oe=I.distcode[Q&(1<<I.distbits)-1],De=Oe>>>24,Ue=Oe>>>16&255,Pe=Oe&65535,!(De<=fe);){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(!(Ue&240)){for(ze=De,Ge=Ue,Ye=Pe;Oe=I.distcode[Ye+((Q&(1<<ze+Ge)-1)>>ze)],De=Oe>>>24,Ue=Oe>>>16&255,Pe=Oe&65535,!(ze+De<=fe);){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}Q>>>=ze,fe-=ze,I.back+=ze}if(Q>>>=De,fe-=De,I.back+=De,Ue&64){q.msg="invalid distance code",I.mode=ee;break}I.offset=Pe,I.extra=Ue&15,I.mode=he;case he:if(I.extra){for(He=I.extra;fe<He;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}I.offset+=Q&(1<<I.extra)-1,Q>>>=I.extra,fe-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){q.msg="invalid distance too far back",I.mode=ee;break}I.mode=z;case z:if(j===0)break e;if(Ce=Ae-j,I.offset>Ce){if(Ce=I.offset-Ce,Ce>I.whave&&I.sane){q.msg="invalid distance too far back",I.mode=ee;break}Ce>I.wnext?(Ce-=I.wnext,Be=I.wsize-Ce):Be=I.wnext-Ce,Ce>I.length&&(Ce=I.length),Ve=I.window}else Ve=Me,Be=ue-I.offset,Ce=I.length;Ce>j&&(Ce=j),j-=Ce,I.length-=Ce;do Me[ue++]=Ve[Be++];while(--Ce);I.length===0&&(I.mode=ie);break;case R:if(j===0)break e;Me[ue++]=I.length,j--,I.mode=ie;break;case J:if(I.wrap){for(;fe<32;){if(de===0)break e;de--,Q|=be[s++]<<fe,fe+=8}if(Ae-=j,q.total_out+=Ae,I.total+=Ae,Ae&&(q.adler=I.check=I.flags?k(I.check,Me,Ae,ue-Ae):b(I.check,Me,Ae,ue-Ae)),Ae=j,(I.flags?Q:ne(Q))!==I.check){q.msg="incorrect data check",I.mode=ee;break}Q=0,fe=0}I.mode=ae;case ae:if(I.wrap&&I.flags){for(;fe<32;){if(de===0)break e;de--,Q+=be[s++]<<fe,fe+=8}if(Q!==(I.total&4294967295)){q.msg="incorrect length check",I.mode=ee;break}Q=0,fe=0}I.mode=oe;case oe:Ze=u;break e;case ee:Ze=O;break e;case ve:return D;case x:default:return N}return q.next_out=ue,q.avail_out=j,q.next_in=s,q.avail_in=de,I.hold=Q,I.bits=fe,(I.wsize||Ae!==q.avail_out&&I.mode<ee&&(I.mode<J||pe!==i))&&xe(q,q.output,q.next_out,Ae-q.avail_out),Ie-=q.avail_in,Ae-=q.avail_out,q.total_in+=Ie,q.total_out+=Ae,I.total+=Ae,I.wrap&&Ae&&(q.adler=I.check=I.flags?k(I.check,Me,Ae,q.next_out-Ae):b(I.check,Me,Ae,q.next_out-Ae)),q.data_type=I.bits+(I.last?64:0)+(I.mode===w?128:0)+(I.mode===le||I.mode===F?256:0),(Ie===0&&Ae===0||pe===i)&&Ze===o&&(Ze=E),Ze}function _e(q){if(!q||!q.state)return N;var pe=q.state;return pe.window&&(pe.window=null),q.state=null,o}function me(q,pe){var I;return!q||!q.state||(I=q.state,!(I.wrap&2))?N:(I.head=pe,pe.done=!1,o)}function Te(q,pe){var I=pe.length,be,Me,s;return!q||!q.state||(be=q.state,be.wrap!==0&&be.mode!==a)?N:be.mode===a&&(Me=1,Me=b(Me,pe,I,0),Me!==be.check)?O:(s=xe(q,pe,I,I),s?(be.mode=ve,D):(be.havedict=1,o))}_.inflateReset=ge,_.inflateReset2=ye,_.inflateResetKeep=Ee,_.inflateInit=Se,_.inflateInit2=we,_.inflate=W,_.inflateEnd=_e,_.inflateGetHeader=me,_.inflateSetDictionary=Te,_.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":39,"./adler32":40,"./crc32":42,"./inffast":44,"./inftrees":46}],46:[function(T,K,_){var S=T("../utils/common"),b=15,k=852,l=592,r=0,e=1,n=2,t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];K.exports=function(u,m,N,O,D,E,Z,P){var Y=P.bits,U=0,B=0,A=0,M=0,p=0,C=0,V=0,h=0,a=0,w=0,H,$,F,g,L,G=null,re=0,le,ie=new S.Buf16(b+1),ce=new S.Buf16(b+1),te=null,he=0,z,R,J;for(U=0;U<=b;U++)ie[U]=0;for(B=0;B<O;B++)ie[m[N+B]]++;for(p=Y,M=b;M>=1&&ie[M]===0;M--);if(p>M&&(p=M),M===0)return D[E++]=1<<24|64<<16|0,D[E++]=1<<24|64<<16|0,P.bits=1,0;for(A=1;A<M&&ie[A]===0;A++);for(p<A&&(p=A),h=1,U=1;U<=b;U++)if(h<<=1,h-=ie[U],h<0)return-1;if(h>0&&(u===r||M!==1))return-1;for(ce[1]=0,U=1;U<b;U++)ce[U+1]=ce[U]+ie[U];for(B=0;B<O;B++)m[N+B]!==0&&(Z[ce[m[N+B]]++]=B);if(u===r?(G=te=Z,le=19):u===e?(G=t,re-=257,te=i,he-=257,le=256):(G=d,te=c,le=-1),w=0,B=0,U=A,L=E,C=p,V=0,F=-1,a=1<<p,g=a-1,u===e&&a>k||u===n&&a>l)return 1;for(;;){z=U-V,Z[B]<le?(R=0,J=Z[B]):Z[B]>le?(R=te[he+Z[B]],J=G[re+Z[B]]):(R=32+64,J=0),H=1<<U-V,$=1<<C,A=$;do $-=H,D[L+(w>>V)+$]=z<<24|R<<16|J|0;while($!==0);for(H=1<<U-1;w&H;)H>>=1;if(H!==0?(w&=H-1,w+=H):w=0,B++,--ie[U]===0){if(U===M)break;U=m[N+Z[B]]}if(U>p&&(w&g)!==F){for(V===0&&(V=p),L+=A,C=U-V,h=1<<C;C+V<M&&(h-=ie[C+V],!(h<=0));)C++,h<<=1;if(a+=1<<C,u===e&&a>k||u===n&&a>l)return 1;F=w&g,D[F]=p<<24|C<<16|L-E|0}}return w!==0&&(D[L+w]=U-V<<24|64<<16|0),P.bits=p,0}},{"../utils/common":39}],47:[function(T,K,_){K.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],48:[function(T,K,_){var S=T("../utils/common"),b=4,k=0,l=1,r=2;function e(W){for(var _e=W.length;--_e>=0;)W[_e]=0}var n=0,t=1,i=2,d=3,c=258,o=29,u=256,m=u+1+o,N=30,O=19,D=2*m+1,E=15,Z=16,P=7,Y=256,U=16,B=17,A=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],p=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=512,a=new Array((m+2)*2);e(a);var w=new Array(N*2);e(w);var H=new Array(h);e(H);var $=new Array(c-d+1);e($);var F=new Array(o);e(F);var g=new Array(N);e(g);function L(W,_e,me,Te,q){this.static_tree=W,this.extra_bits=_e,this.extra_base=me,this.elems=Te,this.max_length=q,this.has_stree=W&&W.length}var G,re,le;function ie(W,_e){this.dyn_tree=W,this.max_code=0,this.stat_desc=_e}function ce(W){return W<256?H[W]:H[256+(W>>>7)]}function te(W,_e){W.pending_buf[W.pending++]=_e&255,W.pending_buf[W.pending++]=_e>>>8&255}function he(W,_e,me){W.bi_valid>Z-me?(W.bi_buf|=_e<<W.bi_valid&65535,te(W,W.bi_buf),W.bi_buf=_e>>Z-W.bi_valid,W.bi_valid+=me-Z):(W.bi_buf|=_e<<W.bi_valid&65535,W.bi_valid+=me)}function z(W,_e,me){he(W,me[_e*2],me[_e*2+1])}function R(W,_e){var me=0;do me|=W&1,W>>>=1,me<<=1;while(--_e>0);return me>>>1}function J(W){W.bi_valid===16?(te(W,W.bi_buf),W.bi_buf=0,W.bi_valid=0):W.bi_valid>=8&&(W.pending_buf[W.pending++]=W.bi_buf&255,W.bi_buf>>=8,W.bi_valid-=8)}function ae(W,_e){var me=_e.dyn_tree,Te=_e.max_code,q=_e.stat_desc.static_tree,pe=_e.stat_desc.has_stree,I=_e.stat_desc.extra_bits,be=_e.stat_desc.extra_base,Me=_e.stat_desc.max_length,s,ue,de,j,Q,fe,Ie=0;for(j=0;j<=E;j++)W.bl_count[j]=0;for(me[W.heap[W.heap_max]*2+1]=0,s=W.heap_max+1;s<D;s++)ue=W.heap[s],j=me[me[ue*2+1]*2+1]+1,j>Me&&(j=Me,Ie++),me[ue*2+1]=j,!(ue>Te)&&(W.bl_count[j]++,Q=0,ue>=be&&(Q=I[ue-be]),fe=me[ue*2],W.opt_len+=fe*(j+Q),pe&&(W.static_len+=fe*(q[ue*2+1]+Q)));if(Ie!==0){do{for(j=Me-1;W.bl_count[j]===0;)j--;W.bl_count[j]--,W.bl_count[j+1]+=2,W.bl_count[Me]--,Ie-=2}while(Ie>0);for(j=Me;j!==0;j--)for(ue=W.bl_count[j];ue!==0;)de=W.heap[--s],!(de>Te)&&(me[de*2+1]!==j&&(W.opt_len+=(j-me[de*2+1])*me[de*2],me[de*2+1]=j),ue--)}}function oe(W,_e,me){var Te=new Array(E+1),q=0,pe,I;for(pe=1;pe<=E;pe++)Te[pe]=q=q+me[pe-1]<<1;for(I=0;I<=_e;I++){var be=W[I*2+1];be!==0&&(W[I*2]=R(Te[be]++,be))}}function ee(){var W,_e,me,Te,q,pe=new Array(E+1);for(me=0,Te=0;Te<o-1;Te++)for(F[Te]=me,W=0;W<1<<M[Te];W++)$[me++]=Te;for($[me-1]=Te,q=0,Te=0;Te<16;Te++)for(g[Te]=q,W=0;W<1<<p[Te];W++)H[q++]=Te;for(q>>=7;Te<N;Te++)for(g[Te]=q<<7,W=0;W<1<<p[Te]-7;W++)H[256+q++]=Te;for(_e=0;_e<=E;_e++)pe[_e]=0;for(W=0;W<=143;)a[W*2+1]=8,W++,pe[8]++;for(;W<=255;)a[W*2+1]=9,W++,pe[9]++;for(;W<=279;)a[W*2+1]=7,W++,pe[7]++;for(;W<=287;)a[W*2+1]=8,W++,pe[8]++;for(oe(a,m+1,pe),W=0;W<N;W++)w[W*2+1]=5,w[W*2]=R(W,5);G=new L(a,M,u+1,m,E),re=new L(w,p,0,N,E),le=new L(new Array(0),C,0,O,P)}function ve(W){var _e;for(_e=0;_e<m;_e++)W.dyn_ltree[_e*2]=0;for(_e=0;_e<N;_e++)W.dyn_dtree[_e*2]=0;for(_e=0;_e<O;_e++)W.bl_tree[_e*2]=0;W.dyn_ltree[Y*2]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function x(W){W.bi_valid>8?te(W,W.bi_buf):W.bi_valid>0&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function f(W,_e,me,Te){x(W),Te&&(te(W,me),te(W,~me)),S.arraySet(W.pending_buf,W.window,_e,me,W.pending),W.pending+=me}function v(W,_e,me,Te){var q=_e*2,pe=me*2;return W[q]<W[pe]||W[q]===W[pe]&&Te[_e]<=Te[me]}function y(W,_e,me){for(var Te=W.heap[me],q=me<<1;q<=W.heap_len&&(q<W.heap_len&&v(_e,W.heap[q+1],W.heap[q],W.depth)&&q++,!v(_e,Te,W.heap[q],W.depth));)W.heap[me]=W.heap[q],me=q,q<<=1;W.heap[me]=Te}function X(W,_e,me){var Te,q,pe=0,I,be;if(W.last_lit!==0)do Te=W.pending_buf[W.d_buf+pe*2]<<8|W.pending_buf[W.d_buf+pe*2+1],q=W.pending_buf[W.l_buf+pe],pe++,Te===0?z(W,q,_e):(I=$[q],z(W,I+u+1,_e),be=M[I],be!==0&&(q-=F[I],he(W,q,be)),Te--,I=ce(Te),z(W,I,me),be=p[I],be!==0&&(Te-=g[I],he(W,Te,be)));while(pe<W.last_lit);z(W,Y,_e)}function ne(W,_e){var me=_e.dyn_tree,Te=_e.stat_desc.static_tree,q=_e.stat_desc.has_stree,pe=_e.stat_desc.elems,I,be,Me=-1,s;for(W.heap_len=0,W.heap_max=D,I=0;I<pe;I++)me[I*2]!==0?(W.heap[++W.heap_len]=Me=I,W.depth[I]=0):me[I*2+1]=0;for(;W.heap_len<2;)s=W.heap[++W.heap_len]=Me<2?++Me:0,me[s*2]=1,W.depth[s]=0,W.opt_len--,q&&(W.static_len-=Te[s*2+1]);for(_e.max_code=Me,I=W.heap_len>>1;I>=1;I--)y(W,me,I);s=pe;do I=W.heap[1],W.heap[1]=W.heap[W.heap_len--],y(W,me,1),be=W.heap[1],W.heap[--W.heap_max]=I,W.heap[--W.heap_max]=be,me[s*2]=me[I*2]+me[be*2],W.depth[s]=(W.depth[I]>=W.depth[be]?W.depth[I]:W.depth[be])+1,me[I*2+1]=me[be*2+1]=s,W.heap[1]=s++,y(W,me,1);while(W.heap_len>=2);W.heap[--W.heap_max]=W.heap[1],ae(W,_e),oe(me,Me,W.bl_count)}function se(W,_e,me){var Te,q=-1,pe,I=_e[0*2+1],be=0,Me=7,s=4;for(I===0&&(Me=138,s=3),_e[(me+1)*2+1]=65535,Te=0;Te<=me;Te++)pe=I,I=_e[(Te+1)*2+1],!(++be<Me&&pe===I)&&(be<s?W.bl_tree[pe*2]+=be:pe!==0?(pe!==q&&W.bl_tree[pe*2]++,W.bl_tree[U*2]++):be<=10?W.bl_tree[B*2]++:W.bl_tree[A*2]++,be=0,q=pe,I===0?(Me=138,s=3):pe===I?(Me=6,s=3):(Me=7,s=4))}function Ee(W,_e,me){var Te,q=-1,pe,I=_e[0*2+1],be=0,Me=7,s=4;for(I===0&&(Me=138,s=3),Te=0;Te<=me;Te++)if(pe=I,I=_e[(Te+1)*2+1],!(++be<Me&&pe===I)){if(be<s)do z(W,pe,W.bl_tree);while(--be!==0);else pe!==0?(pe!==q&&(z(W,pe,W.bl_tree),be--),z(W,U,W.bl_tree),he(W,be-3,2)):be<=10?(z(W,B,W.bl_tree),he(W,be-3,3)):(z(W,A,W.bl_tree),he(W,be-11,7));be=0,q=pe,I===0?(Me=138,s=3):pe===I?(Me=6,s=3):(Me=7,s=4)}}function ge(W){var _e;for(se(W,W.dyn_ltree,W.l_desc.max_code),se(W,W.dyn_dtree,W.d_desc.max_code),ne(W,W.bl_desc),_e=O-1;_e>=3&&W.bl_tree[V[_e]*2+1]===0;_e--);return W.opt_len+=3*(_e+1)+5+5+4,_e}function ye(W,_e,me,Te){var q;for(he(W,_e-257,5),he(W,me-1,5),he(W,Te-4,4),q=0;q<Te;q++)he(W,W.bl_tree[V[q]*2+1],3);Ee(W,W.dyn_ltree,_e-1),Ee(W,W.dyn_dtree,me-1)}function we(W){var _e=4093624447,me;for(me=0;me<=31;me++,_e>>>=1)if(_e&1&&W.dyn_ltree[me*2]!==0)return k;if(W.dyn_ltree[9*2]!==0||W.dyn_ltree[10*2]!==0||W.dyn_ltree[13*2]!==0)return l;for(me=32;me<u;me++)if(W.dyn_ltree[me*2]!==0)return l;return k}var Se=!1;function Le(W){Se||(ee(),Se=!0),W.l_desc=new ie(W.dyn_ltree,G),W.d_desc=new ie(W.dyn_dtree,re),W.bl_desc=new ie(W.bl_tree,le),W.bi_buf=0,W.bi_valid=0,ve(W)}function ke(W,_e,me,Te){he(W,(n<<1)+(Te?1:0),3),f(W,_e,me,!0)}function Re(W){he(W,t<<1,3),z(W,Y,a),J(W)}function Ne(W,_e,me,Te){var q,pe,I=0;W.level>0?(W.strm.data_type===r&&(W.strm.data_type=we(W)),ne(W,W.l_desc),ne(W,W.d_desc),I=ge(W),q=W.opt_len+3+7>>>3,pe=W.static_len+3+7>>>3,pe<=q&&(q=pe)):q=pe=me+5,me+4<=q&&_e!==-1?ke(W,_e,me,Te):W.strategy===b||pe===q?(he(W,(t<<1)+(Te?1:0),3),X(W,a,w)):(he(W,(i<<1)+(Te?1:0),3),ye(W,W.l_desc.max_code+1,W.d_desc.max_code+1,I+1),X(W,W.dyn_ltree,W.dyn_dtree)),ve(W),Te&&x(W)}function xe(W,_e,me){return W.pending_buf[W.d_buf+W.last_lit*2]=_e>>>8&255,W.pending_buf[W.d_buf+W.last_lit*2+1]=_e&255,W.pending_buf[W.l_buf+W.last_lit]=me&255,W.last_lit++,_e===0?W.dyn_ltree[me*2]++:(W.matches++,_e--,W.dyn_ltree[($[me]+u+1)*2]++,W.dyn_dtree[ce(_e)*2]++),W.last_lit===W.lit_bufsize-1}_._tr_init=Le,_._tr_stored_block=ke,_._tr_flush_block=Ne,_._tr_tally=xe,_._tr_align=Re},{"../utils/common":39}],49:[function(T,K,_){function S(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}K.exports=S},{}],50:[function(T,K,_){(function(S){function b(n,t){for(var i=0,d=n.length-1;d>=0;d--){var c=n[d];c==="."?n.splice(d,1):c===".."?(n.splice(d,1),i++):i&&(n.splice(d,1),i--)}if(t)for(;i--;i)n.unshift("..");return n}var k=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,l=function(n){return k.exec(n).slice(1)};_.resolve=function(){for(var n="",t=!1,i=arguments.length-1;i>=-1&&!t;i--){var d=i>=0?arguments[i]:S.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!d)continue;n=d+"/"+n,t=d.charAt(0)==="/"}return n=b(r(n.split("/"),function(c){return!!c}),!t).join("/"),(t?"/":"")+n||"."},_.normalize=function(n){var t=_.isAbsolute(n),i=e(n,-1)==="/";return n=b(r(n.split("/"),function(d){return!!d}),!t).join("/"),!n&&!t&&(n="."),n&&i&&(n+="/"),(t?"/":"")+n},_.isAbsolute=function(n){return n.charAt(0)==="/"},_.join=function(){var n=Array.prototype.slice.call(arguments,0);return _.normalize(r(n,function(t,i){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},_.relative=function(n,t){n=_.resolve(n).substr(1),t=_.resolve(t).substr(1);function i(O){for(var D=0;D<O.length&&O[D]==="";D++);for(var E=O.length-1;E>=0&&O[E]==="";E--);return D>E?[]:O.slice(D,E-D+1)}for(var d=i(n.split("/")),c=i(t.split("/")),o=Math.min(d.length,c.length),u=o,m=0;m<o;m++)if(d[m]!==c[m]){u=m;break}for(var N=[],m=u;m<d.length;m++)N.push("..");return N=N.concat(c.slice(u)),N.join("/")},_.sep="/",_.delimiter=":",_.dirname=function(n){var t=l(n),i=t[0],d=t[1];return!i&&!d?".":(d&&(d=d.substr(0,d.length-1)),i+d)},_.basename=function(n,t){var i=l(n)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},_.extname=function(n){return l(n)[3]};function r(n,t){if(n.filter)return n.filter(t);for(var i=[],d=0;d<n.length;d++)t(n[d],d,n)&&i.push(n[d]);return i}var e="ab".substr(-1)==="b"?function(n,t,i){return n.substr(t,i)}:function(n,t,i){return t<0&&(t=n.length+t),n.substr(t,i)}}).call(this,T("_process"))},{_process:73}],51:[function(T,K,_){(function(S){var b=T("./interlace"),k={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};function l(n,t){var i=[],d=0;function c(){if(d===n.length)throw new Error("Ran out of data");var o=n[d];d++;var u,m,N,O,D,E,Z,P;switch(t){default:throw new Error("unrecognised depth");case 16:Z=n[d],d++,i.push((o<<8)+Z);break;case 4:Z=o&15,P=o>>4,i.push(P,Z);break;case 2:D=o&3,E=o>>2&3,Z=o>>4&3,P=o>>6&3,i.push(P,Z,E,D);break;case 1:u=o&1,m=o>>1&1,N=o>>2&1,O=o>>3&1,D=o>>4&1,E=o>>5&1,Z=o>>6&1,P=o>>7&1,i.push(P,Z,E,D,O,N,m,u);break}}return{get:function(o){for(;i.length<o;)c();var u=i.slice(0,o);return i=i.slice(o),u},resetAfterLine:function(){i.length=0},end:function(){if(d!==n.length)throw new Error("extra data found")}}}function r(n,t,i,d,c,o){for(var u=n.width,m=n.height,N=n.index,O=0;O<m;O++)for(var D=0;D<u;D++){for(var E=i(D,O,N),Z=0;Z<4;Z++){var P=k[d][Z];if(Z===c.length)throw new Error("Ran out of data");t[E+Z]=P!==255?c[P+o]:255}o+=d}return o}function e(n,t,i,d,c,o){for(var u=n.width,m=n.height,N=n.index,O=0;O<m;O++){for(var D=0;D<u;D++)for(var E=c.get(d),Z=i(D,O,N),P=0;P<4;P++){var Y=k[d][P];t[Z+P]=Y!==255?E[Y]:o}c.resetAfterLine()}}_.dataToBitMap=function(n,t){var i=t.width,d=t.height,c=t.depth,o=t.bpp,u=t.interlace;if(c!==8)var m=l(n,c);var N;c<=8?N=new S(i*d*4):N=new Uint16Array(i*d*4);var O=Math.pow(2,c)-1,D=0,E,Z;if(u)E=b.getImagePasses(i,d),Z=b.getInterlaceIterator(i,d);else{var P=0;Z=function(){var U=P;return P+=4,U},E=[{width:i,height:d}]}for(var Y=0;Y<E.length;Y++)c===8?D=r(E[Y],N,Z,o,n,D):e(E[Y],N,Z,o,m,O);if(c===8){if(D!==n.length)throw new Error("extra data found")}else m.end();return N}}).call(this,T("buffer").Buffer)},{"./interlace":61,buffer:7}],52:[function(T,K,_){(function(S){var b=T("./constants");K.exports=function(k,l,r,e){var n=e.colorType===b.COLORTYPE_COLOR_ALPHA;if(e.inputHasAlpha&&n||!e.inputHasAlpha&&!n)return k;var t=n?4:3,i=new S(l*r*t),d=e.inputHasAlpha?4:3,c=0,o=0,u=e.bgColor||{};u.red===void 0&&(u.red=255),u.green===void 0&&(u.green=255),u.blue===void 0&&(u.blue=255);for(var m=0;m<r;m++)for(var N=0;N<l;N++){var O=k[c],D=k[c+1],E=k[c+2],Z;e.inputHasAlpha?(Z=k[c+3],n||(Z/=255,O=Math.min(Math.max(Math.round((1-Z)*u.red+Z*O),0),255),D=Math.min(Math.max(Math.round((1-Z)*u.green+Z*D),0),255),E=Math.min(Math.max(Math.round((1-Z)*u.blue+Z*E),0),255))):Z=255,i[o]=O,i[o+1]=D,i[o+2]=E,n&&(i[o+3]=Z),c+=d,o+=t}return i}}).call(this,T("buffer").Buffer)},{"./constants":54,buffer:7}],53:[function(T,K,_){(function(S,b){var k=T("util"),l=T("stream"),r=K.exports=function(){l.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};k.inherits(r,l),r.prototype.read=function(e,n){this._reads.push({length:Math.abs(e),allowLess:e<0,func:n}),S.nextTick((function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},r.prototype.write=function(e,n){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;var t;return b.isBuffer(e)?t=e:t=new b(e,n||this._encoding),this._buffers.push(t),this._buffered+=t.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused},r.prototype.end=function(e,n){e&&this.write(e,n),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))},r.prototype.destroySoon=r.prototype.end,r.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waitng on finished stream")),this.destroy()},r.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},r.prototype._processReadAllowingLess=function(e){this._reads.shift();var n=this._buffers[0];n.length>e.length?(this._buffered-=e.length,this._buffers[0]=n.slice(e.length),e.func.call(this,n.slice(0,e.length))):(this._buffered-=n.length,this._buffers.shift(),e.func.call(this,n))},r.prototype._processRead=function(e){this._reads.shift();for(var n=0,t=0,i=new b(e.length);n<e.length;){var d=this._buffers[t++],c=Math.min(d.length,e.length-n);d.copy(i,n,0,c),n+=c,c!==d.length&&(this._buffers[--t]=d.slice(c))}t>0&&this._buffers.splice(0,t),this._buffered-=e.length,e.func.call(this,i)},r.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&this._buffers.length>0&&this._buffers[0]===null&&this._end()}catch(n){this.emit("error",n)}}}).call(this,T("_process"),T("buffer").Buffer)},{_process:73,buffer:7,stream:82,util:104}],54:[function(T,K,_){K.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],55:[function(T,K,_){var S=[];(function(){for(var k=0;k<256;k++){for(var l=k,r=0;r<8;r++)l&1?l=3988292384^l>>>1:l=l>>>1;S[k]=l}})();var b=K.exports=function(){this._crc=-1};b.prototype.write=function(k){for(var l=0;l<k.length;l++)this._crc=S[(this._crc^k[l])&255]^this._crc>>>8;return!0},b.prototype.crc32=function(){return this._crc^-1},b.crc32=function(k){for(var l=-1,r=0;r<k.length;r++)l=S[(l^k[r])&255]^l>>>8;return l^-1}},{}],56:[function(T,K,_){(function(S){var b=T("./paeth-predictor");function k(N,O,D,E,Z){N.copy(E,Z,O,O+D)}function l(N,O,D){for(var E=0,Z=O+D,P=O;P<Z;P++)E+=Math.abs(N[P]);return E}function r(N,O,D,E,Z,P){for(var Y=0;Y<D;Y++){var U=Y>=P?N[O+Y-P]:0,B=N[O+Y]-U;E[Z+Y]=B}}function e(N,O,D,E){for(var Z=0,P=0;P<D;P++){var Y=P>=E?N[O+P-E]:0,U=N[O+P]-Y;Z+=Math.abs(U)}return Z}function n(N,O,D,E,Z){for(var P=0;P<D;P++){var Y=O>0?N[O+P-D]:0,U=N[O+P]-Y;E[Z+P]=U}}function t(N,O,D){for(var E=0,Z=O+D,P=O;P<Z;P++){var Y=O>0?N[P-D]:0,U=N[P]-Y;E+=Math.abs(U)}return E}function i(N,O,D,E,Z,P){for(var Y=0;Y<D;Y++){var U=Y>=P?N[O+Y-P]:0,B=O>0?N[O+Y-D]:0,A=N[O+Y]-(U+B>>1);E[Z+Y]=A}}function d(N,O,D,E){for(var Z=0,P=0;P<D;P++){var Y=P>=E?N[O+P-E]:0,U=O>0?N[O+P-D]:0,B=N[O+P]-(Y+U>>1);Z+=Math.abs(B)}return Z}function c(N,O,D,E,Z,P){for(var Y=0;Y<D;Y++){var U=Y>=P?N[O+Y-P]:0,B=O>0?N[O+Y-D]:0,A=O>0&&Y>=P?N[O+Y-(D+P)]:0,M=N[O+Y]-b(U,B,A);E[Z+Y]=M}}function o(N,O,D,E){for(var Z=0,P=0;P<D;P++){var Y=P>=E?N[O+P-E]:0,U=O>0?N[O+P-D]:0,B=O>0&&P>=E?N[O+P-(D+E)]:0,A=N[O+P]-b(Y,U,B);Z+=Math.abs(A)}return Z}var u={0:k,1:r,2:n,3:i,4:c},m={0:l,1:e,2:t,3:d,4:o};K.exports=function(N,O,D,E,Z){var P;if(!("filterType"in E)||E.filterType===-1)P=[0,1,2,3,4];else if(typeof E.filterType=="number")P=[E.filterType];else throw new Error("unrecognised filter types");for(var Y=O*Z,U=0,B=0,A=new S((Y+1)*D),M=P[0],p=0;p<D;p++){if(P.length>1)for(var C=1/0,V=0;V<P.length;V++){var h=m[P[V]](N,B,Y,Z);h<C&&(M=P[V],C=h)}A[U]=M,U++,u[M](N,B,Y,A,U,Z),U+=Y,B+=Y}return A}}).call(this,T("buffer").Buffer)},{"./paeth-predictor":65,buffer:7}],57:[function(T,K,_){(function(S){var b=T("util"),k=T("./chunkstream"),l=T("./filter-parse"),r=K.exports=function(e){k.call(this);var n=[],t=this;this._filter=new l(e,{read:this.read.bind(this),write:function(i){n.push(i)},complete:function(){t.emit("complete",S.concat(n))}}),this._filter.start()};b.inherits(r,k)}).call(this,T("buffer").Buffer)},{"./chunkstream":53,"./filter-parse":59,buffer:7,util:104}],58:[function(T,K,_){(function(S){var b=T("./sync-reader"),k=T("./filter-parse");_.process=function(l,r){var e=[],n=new b(l),t=new k(r,{read:n.read.bind(n),write:function(i){e.push(i)},complete:function(){}});return t.start(),n.process(),S.concat(e)}}).call(this,T("buffer").Buffer)},{"./filter-parse":59,"./sync-reader":71,buffer:7}],59:[function(T,K,_){(function(S){var b=T("./interlace"),k=T("./paeth-predictor");function l(e,n,t){var i=e*n;return t!==8&&(i=Math.ceil(i/(8/t))),i}var r=K.exports=function(e,n){var t=e.width,i=e.height,d=e.interlace,c=e.bpp,o=e.depth;if(this.read=n.read,this.write=n.write,this.complete=n.complete,this._imageIndex=0,this._images=[],d)for(var u=b.getImagePasses(t,i),m=0;m<u.length;m++)this._images.push({byteWidth:l(u[m].width,c,o),height:u[m].height,lineIndex:0});else this._images.push({byteWidth:l(t,c,o),height:i,lineIndex:0});o===8?this._xComparison=c:o===16?this._xComparison=c*2:this._xComparison=1};r.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},r.prototype._unFilterType1=function(e,n,t){for(var i=this._xComparison,d=i-1,c=0;c<t;c++){var o=e[1+c],u=c>d?n[c-i]:0;n[c]=o+u}},r.prototype._unFilterType2=function(e,n,t){for(var i=this._lastLine,d=0;d<t;d++){var c=e[1+d],o=i?i[d]:0;n[d]=c+o}},r.prototype._unFilterType3=function(e,n,t){for(var i=this._xComparison,d=i-1,c=this._lastLine,o=0;o<t;o++){var u=e[1+o],m=c?c[o]:0,N=o>d?n[o-i]:0,O=Math.floor((N+m)/2);n[o]=u+O}},r.prototype._unFilterType4=function(e,n,t){for(var i=this._xComparison,d=i-1,c=this._lastLine,o=0;o<t;o++){var u=e[1+o],m=c?c[o]:0,N=o>d?n[o-i]:0,O=o>d&&c?c[o-i]:0,D=k(N,m,O);n[o]=u+D}},r.prototype._reverseFilterLine=function(e){var n=e[0],t,i=this._images[this._imageIndex],d=i.byteWidth;if(n===0)t=e.slice(1,d+1);else switch(t=new S(d),n){case 1:this._unFilterType1(e,t,d);break;case 2:this._unFilterType2(e,t,d);break;case 3:this._unFilterType3(e,t,d);break;case 4:this._unFilterType4(e,t,d);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,T("buffer").Buffer)},{"./interlace":61,"./paeth-predictor":65,buffer:7}],60:[function(T,K,_){(function(S){function b(r,e,n,t,i){for(var d=0,c=0;c<t;c++)for(var o=0;o<n;o++){var u=i[r[d]];if(!u)throw new Error("index "+r[d]+" not in palette");for(var m=0;m<4;m++)e[d+m]=u[m];d+=4}}function k(r,e,n,t,i){for(var d=0,c=0;c<t;c++)for(var o=0;o<n;o++){var u=!1;if(i.length===1?i[0]===r[d]&&(u=!0):i[0]===r[d]&&i[1]===r[d+1]&&i[2]===r[d+2]&&(u=!0),u)for(var m=0;m<4;m++)e[d+m]=0;d+=4}}function l(r,e,n,t,i){for(var d=255,c=Math.pow(2,i)-1,o=0,u=0;u<t;u++)for(var m=0;m<n;m++){for(var N=0;N<4;N++)e[o+N]=Math.floor(r[o+N]*d/c+.5);o+=4}}K.exports=function(r,e){var n=e.depth,t=e.width,i=e.height,d=e.colorType,c=e.transColor,o=e.palette,u=r;return d===3?b(r,u,t,i,o):(c&&k(r,u,t,i,c),n!==8&&(n===16&&(u=new S(t*i*4)),l(r,u,t,i,n))),u}}).call(this,T("buffer").Buffer)},{buffer:7}],61:[function(T,K,_){var S=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];_.getImagePasses=function(b,k){for(var l=[],r=b%8,e=k%8,n=(b-r)/8,t=(k-e)/8,i=0;i<S.length;i++){for(var d=S[i],c=n*d.x.length,o=t*d.y.length,u=0;u<d.x.length&&d.x[u]<r;u++)c++;for(u=0;u<d.y.length&&d.y[u]<e;u++)o++;c>0&&o>0&&l.push({width:c,height:o,index:i})}return l},_.getInterlaceIterator=function(b){return function(k,l,r){var e=k%S[r].x.length,n=(k-e)/S[r].x.length*8+S[r].x[e],t=l%S[r].y.length,i=(l-t)/S[r].y.length*8+S[r].y[t];return n*4+i*b*4}}},{}],62:[function(T,K,_){(function(S){var b=T("util"),k=T("stream"),l=T("./constants"),r=T("./packer"),e=K.exports=function(n){k.call(this);var t=n||{};this._packer=new r(t),this._deflate=this._packer.createDeflate(),this.readable=!0};b.inherits(e,k),e.prototype.pack=function(n,t,i,d){this.emit("data",new S(l.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,i)),d&&this.emit("data",this._packer.packGAMA(d));var c=this._packer.filterData(n,t,i);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(o){this.emit("data",this._packer.packIDAT(o))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(c)}}).call(this,T("buffer").Buffer)},{"./constants":54,"./packer":64,buffer:7,stream:82,util:104}],63:[function(T,K,_){(function(S){var b=!0,k=T("zlib");k.deflateSync||(b=!1);var l=T("./constants"),r=T("./packer");K.exports=function(e,n){if(!b)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var t=n||{},i=new r(t),d=[];d.push(new S(l.PNG_SIGNATURE)),d.push(i.packIHDR(e.width,e.height)),e.gamma&&d.push(i.packGAMA(e.gamma));var c=i.filterData(e.data,e.width,e.height),o=k.deflateSync(c,i.getDeflateOptions());if(c=null,!o||!o.length)throw new Error("bad png - invalid compressed data response");return d.push(i.packIDAT(o)),d.push(i.packIEND()),S.concat(d)}}).call(this,T("buffer").Buffer)},{"./constants":54,"./packer":64,buffer:7,zlib:6}],64:[function(T,K,_){(function(S){var b=T("./constants"),k=T("./crc"),l=T("./bitpacker"),r=T("./filter-pack"),e=T("zlib"),n=K.exports=function(t){if(this._options=t,t.deflateChunkSize=t.deflateChunkSize||32*1024,t.deflateLevel=t.deflateLevel!=null?t.deflateLevel:9,t.deflateStrategy=t.deflateStrategy!=null?t.deflateStrategy:3,t.inputHasAlpha=t.inputHasAlpha!=null?t.inputHasAlpha:!0,t.deflateFactory=t.deflateFactory||e.createDeflate,t.bitDepth=t.bitDepth||8,t.colorType=typeof t.colorType=="number"?t.colorType:b.COLORTYPE_COLOR_ALPHA,t.colorType!==b.COLORTYPE_COLOR&&t.colorType!==b.COLORTYPE_COLOR_ALPHA)throw new Error("option color type:"+t.colorType+" is not supported at present");if(t.bitDepth!==8)throw new Error("option bit depth:"+t.bitDepth+" is not supported at present")};n.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},n.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},n.prototype.filterData=function(t,i,d){var c=l(t,i,d,this._options),o=b.COLORTYPE_TO_BPP_MAP[this._options.colorType],u=r(c,i,d,this._options,o);return u},n.prototype._packChunk=function(t,i){var d=i?i.length:0,c=new S(d+12);return c.writeUInt32BE(d,0),c.writeUInt32BE(t,4),i&&i.copy(c,8),c.writeInt32BE(k.crc32(c.slice(4,c.length-4)),c.length-4),c},n.prototype.packGAMA=function(t){var i=new S(4);return i.writeUInt32BE(Math.floor(t*b.GAMMA_DIVISION),0),this._packChunk(b.TYPE_gAMA,i)},n.prototype.packIHDR=function(t,i){var d=new S(13);return d.writeUInt32BE(t,0),d.writeUInt32BE(i,4),d[8]=this._options.bitDepth,d[9]=this._options.colorType,d[10]=0,d[11]=0,d[12]=0,this._packChunk(b.TYPE_IHDR,d)},n.prototype.packIDAT=function(t){return this._packChunk(b.TYPE_IDAT,t)},n.prototype.packIEND=function(){return this._packChunk(b.TYPE_IEND,null)}}).call(this,T("buffer").Buffer)},{"./bitpacker":52,"./constants":54,"./crc":55,"./filter-pack":56,buffer:7,zlib:6}],65:[function(T,K,_){K.exports=function(b,k,l){var r=b+k-l,e=Math.abs(r-b),n=Math.abs(r-k),t=Math.abs(r-l);return e<=n&&e<=t?b:n<=t?k:l}},{}],66:[function(T,K,_){var S=T("util"),b=T("zlib"),k=T("./chunkstream"),l=T("./filter-parse-async"),r=T("./parser"),e=T("./bitmapper"),n=T("./format-normaliser"),t=K.exports=function(i){k.call(this),this._parser=new r(i,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=i,this.writable=!0,this._parser.start()};S.inherits(t,k),t.prototype._handleError=function(i){this.emit("error",i),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},t.prototype._inflateData=function(i){this._inflate||(this._inflate=b.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(i)},t.prototype._handleMetaData=function(i){this.emit("metadata",i),this._bitmapInfo=Object.create(i),this._filter=new l(this._bitmapInfo)},t.prototype._handleTransColor=function(i){this._bitmapInfo.transColor=i},t.prototype._handlePalette=function(i){this._bitmapInfo.palette=i},t.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},t.prototype._complete=function(i){if(!this.errord){try{var d=e.dataToBitMap(i,this._bitmapInfo),c=n(d,this._bitmapInfo);d=null}catch(o){this._handleError(o);return}this.emit("parsed",c)}}},{"./bitmapper":51,"./chunkstream":53,"./filter-parse-async":57,"./format-normaliser":60,"./parser":68,util:104,zlib:6}],67:[function(T,K,_){(function(S){var b=!0,k=T("zlib");k.deflateSync||(b=!1);var l=T("./sync-reader"),r=T("./filter-parse-sync"),e=T("./parser"),n=T("./bitmapper"),t=T("./format-normaliser");K.exports=function(i,d){if(!b)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var c;function o(V){c=V}var u;function m(V){u=V}function N(V){u.transColor=V}function O(V){u.palette=V}var D;function E(V){D=V}var Z=[];function P(V){Z.push(V)}var Y=new l(i),U=new e(d,{read:Y.read.bind(Y),error:o,metadata:m,gamma:E,palette:O,transColor:N,inflateData:P});if(U.start(),Y.process(),c)throw c;var B=S.concat(Z);Z.length=0;var A=k.inflateSync(B);if(B=null,!A||!A.length)throw new Error("bad png - invalid inflate data response");var M=r.process(A,u);B=null;var p=n.dataToBitMap(M,u);M=null;var C=t(p,u);return u.data=C,u.gamma=D||0,u}}).call(this,T("buffer").Buffer)},{"./bitmapper":51,"./filter-parse-sync":58,"./format-normaliser":60,"./parser":68,"./sync-reader":71,buffer:7,zlib:6}],68:[function(T,K,_){(function(S){var b=T("./constants"),k=T("./crc"),l=K.exports=function(r,e){this._options=r,r.checkCRC=r.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[b.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[b.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[b.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[b.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[b.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[b.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.inflateData=e.inflateData,this.finished=e.finished};l.prototype.start=function(){this.read(b.PNG_SIGNATURE.length,this._parseSignature.bind(this))},l.prototype._parseSignature=function(r){for(var e=b.PNG_SIGNATURE,n=0;n<e.length;n++)if(r[n]!==e[n]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},l.prototype._parseChunkBegin=function(r){for(var e=r.readUInt32BE(0),n=r.readUInt32BE(4),t="",i=4;i<8;i++)t+=String.fromCharCode(r[i]);var d=!!(r[4]&32);if(!this._hasIHDR&&n!==b.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new k,this._crc.write(new S(t)),this._chunks[n])return this._chunks[n](e);if(!d){this.error(new Error("Unsupported critical chunk type "+t));return}this.read(e+4,this._skipChunk.bind(this))},l.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},l.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},l.prototype._parseChunkEnd=function(r){var e=r.readInt32BE(0),n=this._crc.crc32();if(this._options.checkCRC&&n!==e){this.error(new Error("Crc error - "+e+" - "+n));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},l.prototype._handleIHDR=function(r){this.read(r,this._parseIHDR.bind(this))},l.prototype._parseIHDR=function(r){this._crc.write(r);var e=r.readUInt32BE(0),n=r.readUInt32BE(4),t=r[8],i=r[9],d=r[10],c=r[11],o=r[12];if(t!==8&&t!==4&&t!==2&&t!==1&&t!==16){this.error(new Error("Unsupported bit depth "+t));return}if(!(i in b.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(d!==0){this.error(new Error("Unsupported compression method"));return}if(c!==0){this.error(new Error("Unsupported filter method"));return}if(o!==0&&o!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=i;var u=b.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:n,depth:t,interlace:!!o,palette:!!(i&b.COLORTYPE_PALETTE),color:!!(i&b.COLORTYPE_COLOR),alpha:!!(i&b.COLORTYPE_ALPHA),bpp:u,colorType:i}),this._handleChunkEnd()},l.prototype._handlePLTE=function(r){this.read(r,this._parsePLTE.bind(this))},l.prototype._parsePLTE=function(r){this._crc.write(r);for(var e=Math.floor(r.length/3),n=0;n<e;n++)this._palette.push([r[n*3],r[n*3+1],r[n*3+2],255]);this.palette(this._palette),this._handleChunkEnd()},l.prototype._handleTRNS=function(r){this.read(r,this._parseTRNS.bind(this))},l.prototype._parseTRNS=function(r){if(this._crc.write(r),this._colorType===b.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(r.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(var e=0;e<r.length;e++)this._palette[e][3]=r[e];this.palette(this._palette)}this._colorType===b.COLORTYPE_GRAYSCALE&&this.transColor([r.readUInt16BE(0)]),this._colorType===b.COLORTYPE_COLOR&&this.transColor([r.readUInt16BE(0),r.readUInt16BE(2),r.readUInt16BE(4)]),this._handleChunkEnd()},l.prototype._handleGAMA=function(r){this.read(r,this._parseGAMA.bind(this))},l.prototype._parseGAMA=function(r){this._crc.write(r),this.gamma(r.readUInt32BE(0)/b.GAMMA_DIVISION),this._handleChunkEnd()},l.prototype._handleIDAT=function(r){this.read(-r,this._parseIDAT.bind(this,r))},l.prototype._parseIDAT=function(r,e){if(this._crc.write(e),this._colorType===b.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(e);var n=r-e.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},l.prototype._handleIEND=function(r){this.read(r,this._parseIEND.bind(this))},l.prototype._parseIEND=function(r){this._crc.write(r),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,T("buffer").Buffer)},{"./constants":54,"./crc":55,buffer:7}],69:[function(T,K,_){var S=T("./parser-sync"),b=T("./packer-sync");_.read=function(k,l){return S(k,l||{})},_.write=function(k){return b(k)}},{"./packer-sync":63,"./parser-sync":67}],70:[function(T,K,_){(function(S,b){var k=T("util"),l=T("stream"),r=T("./parser-async"),e=T("./packer-async"),n=T("./png-sync"),t=_.PNG=function(i){l.call(this),i=i||{},this.width=i.width||0,this.height=i.height||0,this.data=this.width>0&&this.height>0?new b(4*this.width*this.height):null,i.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new r(i),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(d){this.data=d,this.emit("parsed",d)}).bind(this)),this._packer=new e(i),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};k.inherits(t,l),t.sync=n,t.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(S.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this)},t.prototype.parse=function(i,d){if(d){var c,o;c=(function(u){this.removeListener("error",o),this.data=u,d(null,this)}).bind(this),o=(function(u){this.removeListener("parsed",c),d(u,null)}).bind(this),this.once("parsed",c),this.once("error",o)}return this.end(i),this},t.prototype.write=function(i){return this._parser.write(i),!0},t.prototype.end=function(i){this._parser.end(i)},t.prototype._metadata=function(i){this.width=i.width,this.height=i.height,this.emit("metadata",i)},t.prototype._gamma=function(i){this.gamma=i},t.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")},t.bitblt=function(i,d,c,o,u,m,N,O){if(c>i.width||o>i.height||c+u>i.width||o+m>i.height)throw new Error("bitblt reading outside image");if(N>d.width||O>d.height||N+u>d.width||O+m>d.height)throw new Error("bitblt writing outside image");for(var D=0;D<m;D++)i.data.copy(d.data,(O+D)*d.width+N<<2,(o+D)*i.width+c<<2,(o+D)*i.width+c+u<<2)},t.prototype.bitblt=function(i,d,c,o,u,m,N){return t.bitblt(this,i,d,c,o,u,m,N),this},t.adjustGamma=function(i){if(i.gamma){for(var d=0;d<i.height;d++)for(var c=0;c<i.width;c++)for(var o=i.width*d+c<<2,u=0;u<3;u++){var m=i.data[o+u]/255;m=Math.pow(m,1/2.2/i.gamma),i.data[o+u]=Math.round(m*255)}i.gamma=0}},t.prototype.adjustGamma=function(){t.adjustGamma(this)}}).call(this,T("_process"),T("buffer").Buffer)},{"./packer-async":62,"./parser-async":66,"./png-sync":69,_process:73,buffer:7,stream:82,util:104}],71:[function(T,K,_){var S=K.exports=function(b){this._buffer=b,this._reads=[]};S.prototype.read=function(b,k){this._reads.push({length:Math.abs(b),allowLess:b<0,func:k})},S.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var b=this._reads[0];if(this._buffer.length&&(this._buffer.length>=b.length||b.allowLess)){this._reads.shift();var k=this._buffer;this._buffer=k.slice(b.length),b.func.call(this,k.slice(0,b.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")}},{}],72:[function(T,K,_){(function(S){!S.version||S.version.indexOf("v0.")===0||S.version.indexOf("v1.")===0&&S.version.indexOf("v1.8.")!==0?K.exports=b:K.exports=S.nextTick;function b(k,l,r,e){if(typeof k!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,t,i;switch(n){case 0:case 1:return S.nextTick(k);case 2:return S.nextTick(function(){k.call(null,l)});case 3:return S.nextTick(function(){k.call(null,l,r)});case 4:return S.nextTick(function(){k.call(null,l,r,e)});default:for(t=new Array(n-1),i=0;i<t.length;)t[i++]=arguments[i];return S.nextTick(function(){k.apply(null,t)})}}}).call(this,T("_process"))},{_process:73}],73:[function(T,K,_){var S=K.exports={},b,k;function l(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?b=setTimeout:b=l}catch{b=l}try{typeof clearTimeout=="function"?k=clearTimeout:k=r}catch{k=r}})();function e(O){if(b===setTimeout)return setTimeout(O,0);if((b===l||!b)&&setTimeout)return b=setTimeout,setTimeout(O,0);try{return b(O,0)}catch{try{return b.call(null,O,0)}catch{return b.call(this,O,0)}}}function n(O){if(k===clearTimeout)return clearTimeout(O);if((k===r||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(O);try{return k(O)}catch{try{return k.call(null,O)}catch{return k.call(this,O)}}}var t=[],i=!1,d,c=-1;function o(){!i||!d||(i=!1,d.length?t=d.concat(t):c=-1,t.length&&u())}function u(){if(!i){var O=e(o);i=!0;for(var D=t.length;D;){for(d=t,t=[];++c<D;)d&&d[c].run();c=-1,D=t.length}d=null,i=!1,n(O)}}S.nextTick=function(O){var D=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)D[E-1]=arguments[E];t.push(new m(O,D)),t.length===1&&!i&&e(u)};function m(O,D){this.fun=O,this.array=D}m.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={};function N(){}S.on=N,S.addListener=N,S.once=N,S.off=N,S.removeListener=N,S.removeAllListeners=N,S.emit=N,S.prependListener=N,S.prependOnceListener=N,S.listeners=function(O){return[]},S.binding=function(O){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(O){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],74:[function(T,K,_){arguments[4][19][0].apply(_,arguments)},{"./_stream_readable":76,"./_stream_writable":78,_process:73,"core-util-is":9,dup:19,inherits:26}],75:[function(T,K,_){arguments[4][20][0].apply(_,arguments)},{"./_stream_transform":77,"core-util-is":9,dup:20,inherits:26}],76:[function(T,K,_){(function(S){K.exports=i;var b=T("isarray"),k=T("buffer").Buffer;i.ReadableState=t;var l=T("events").EventEmitter;l.listenerCount||(l.listenerCount=function(h,a){return h.listeners(a).length});var r=T("stream"),e=T("core-util-is");e.inherits=T("inherits");var n;e.inherits(i,r);function t(h,a){h=h||{};var w=h.highWaterMark;this.highWaterMark=w||w===0?w:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!h.objectMode,this.defaultEncoding=h.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,h.encoding&&(n||(n=T("string_decoder/").StringDecoder),this.decoder=new n(h.encoding),this.encoding=h.encoding)}function i(h){if(!(this instanceof i))return new i(h);this._readableState=new t(h),this.readable=!0,r.call(this)}i.prototype.push=function(h,a){var w=this._readableState;return typeof h=="string"&&!w.objectMode&&(a=a||w.defaultEncoding,a!==w.encoding&&(h=new k(h,a),a="")),d(this,w,h,a,!1)},i.prototype.unshift=function(h){var a=this._readableState;return d(this,a,h,"",!0)};function d(h,a,w,H,$){var F=N(a,w);if(F)h.emit("error",F);else if(w==null)a.reading=!1,a.ended||O(h,a);else if(a.objectMode||w&&w.length>0)if(a.ended&&!$){var g=new Error("stream.push() after EOF");h.emit("error",g)}else if(a.endEmitted&&$){var g=new Error("stream.unshift() after end event");h.emit("error",g)}else a.decoder&&!$&&!H&&(w=a.decoder.write(w)),a.length+=a.objectMode?1:w.length,$?a.buffer.unshift(w):(a.reading=!1,a.buffer.push(w)),a.needReadable&&D(h),Z(h,a);else $||(a.reading=!1);return c(a)}function c(h){return!h.ended&&(h.needReadable||h.length<h.highWaterMark||h.length===0)}i.prototype.setEncoding=function(h){n||(n=T("string_decoder/").StringDecoder),this._readableState.decoder=new n(h),this._readableState.encoding=h};var o=8388608;function u(h){if(h>=o)h=o;else{h--;for(var a=1;a<32;a<<=1)h|=h>>a;h++}return h}function m(h,a){return a.length===0&&a.ended?0:a.objectMode?h===0?0:1:h===null||isNaN(h)?a.flowing&&a.buffer.length?a.buffer[0].length:a.length:h<=0?0:(h>a.highWaterMark&&(a.highWaterMark=u(h)),h>a.length?a.ended?a.length:(a.needReadable=!0,0):h)}i.prototype.read=function(h){var a=this._readableState;a.calledRead=!0;var w=h,H;if((typeof h!="number"||h>0)&&(a.emittedReadable=!1),h===0&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return D(this),null;if(h=m(h,a),h===0&&a.ended)return H=null,a.length>0&&a.decoder&&(H=M(h,a),a.length-=H.length),a.length===0&&p(this),H;var $=a.needReadable;return a.length-h<=a.highWaterMark&&($=!0),(a.ended||a.reading)&&($=!1),$&&(a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1),$&&!a.reading&&(h=m(w,a)),h>0?H=M(h,a):H=null,H===null&&(a.needReadable=!0,h=0),a.length-=h,a.length===0&&!a.ended&&(a.needReadable=!0),a.ended&&!a.endEmitted&&a.length===0&&p(this),H};function N(h,a){var w=null;return!k.isBuffer(a)&&typeof a!="string"&&a!==null&&a!==void 0&&!h.objectMode&&(w=new TypeError("Invalid non-string/buffer chunk")),w}function O(h,a){if(a.decoder&&!a.ended){var w=a.decoder.end();w&&w.length&&(a.buffer.push(w),a.length+=a.objectMode?1:w.length)}a.ended=!0,a.length>0?D(h):p(h)}function D(h){var a=h._readableState;a.needReadable=!1,!a.emittedReadable&&(a.emittedReadable=!0,a.sync?S.nextTick(function(){E(h)}):E(h))}function E(h){h.emit("readable")}function Z(h,a){a.readingMore||(a.readingMore=!0,S.nextTick(function(){P(h,a)}))}function P(h,a){for(var w=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(h.read(0),w!==a.length);)w=a.length;a.readingMore=!1}i.prototype._read=function(h){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(h,a){var w=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=h;break;case 1:H.pipes=[H.pipes,h];break;default:H.pipes.push(h);break}H.pipesCount+=1;var $=(!a||a.end!==!1)&&h!==S.stdout&&h!==S.stderr,F=$?L:re;H.endEmitted?S.nextTick(F):w.once("end",F),h.on("unpipe",g);function g(he){he===w&&re()}function L(){h.end()}var G=Y(w);h.on("drain",G);function re(){h.removeListener("close",ie),h.removeListener("finish",ce),h.removeListener("drain",G),h.removeListener("error",le),h.removeListener("unpipe",g),w.removeListener("end",L),w.removeListener("end",re),(!h._writableState||h._writableState.needDrain)&&G()}function le(he){te(),h.removeListener("error",le),l.listenerCount(h,"error")===0&&h.emit("error",he)}!h._events||!h._events.error?h.on("error",le):b(h._events.error)?h._events.error.unshift(le):h._events.error=[le,h._events.error];function ie(){h.removeListener("finish",ce),te()}h.once("close",ie);function ce(){h.removeListener("close",ie),te()}h.once("finish",ce);function te(){w.unpipe(h)}return h.emit("pipe",w),H.flowing||(this.on("readable",B),H.flowing=!0,S.nextTick(function(){U(w)})),h};function Y(h){return function(){var a=h._readableState;a.awaitDrain--,a.awaitDrain===0&&U(h)}}function U(h){var a=h._readableState,w;a.awaitDrain=0;function H($,F,g){var L=$.write(w);L===!1&&a.awaitDrain++}for(;a.pipesCount&&(w=h.read())!==null;)if(a.pipesCount===1?H(a.pipes):C(a.pipes,H),h.emit("data",w),a.awaitDrain>0)return;if(a.pipesCount===0){a.flowing=!1,l.listenerCount(h,"data")>0&&A(h);return}a.ranOut=!0}function B(){this._readableState.ranOut&&(this._readableState.ranOut=!1,U(this))}i.prototype.unpipe=function(h){var a=this._readableState;if(a.pipesCount===0)return this;if(a.pipesCount===1)return h&&h!==a.pipes?this:(h||(h=a.pipes),a.pipes=null,a.pipesCount=0,this.removeListener("readable",B),a.flowing=!1,h&&h.emit("unpipe",this),this);if(!h){var w=a.pipes,H=a.pipesCount;a.pipes=null,a.pipesCount=0,this.removeListener("readable",B),a.flowing=!1;for(var $=0;$<H;$++)w[$].emit("unpipe",this);return this}var $=V(a.pipes,h);return $===-1?this:(a.pipes.splice($,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),h.emit("unpipe",this),this)},i.prototype.on=function(h,a){var w=r.prototype.on.call(this,h,a);if(h==="data"&&!this._readableState.flowing&&A(this),h==="readable"&&this.readable){var H=this._readableState;H.readableListening||(H.readableListening=!0,H.emittedReadable=!1,H.needReadable=!0,H.reading?H.length&&D(this):this.read(0))}return w},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){A(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){A(this,!0),this.emit("pause")};function A(h,a){var w=h._readableState;if(w.flowing)throw new Error("Cannot switch to old mode now.");var H=a||!1,$=!1;h.readable=!0,h.pipe=r.prototype.pipe,h.on=h.addListener=r.prototype.on,h.on("readable",function(){$=!0;for(var F;!H&&(F=h.read())!==null;)h.emit("data",F);F===null&&($=!1,h._readableState.needReadable=!0)}),h.pause=function(){H=!0,this.emit("pause")},h.resume=function(){H=!1,$?S.nextTick(function(){h.emit("readable")}):this.read(0),this.emit("resume")},h.emit("readable")}i.prototype.wrap=function(h){var a=this._readableState,w=!1,H=this;h.on("end",function(){if(a.decoder&&!a.ended){var g=a.decoder.end();g&&g.length&&H.push(g)}H.push(null)}),h.on("data",function(g){if(a.decoder&&(g=a.decoder.write(g)),!(a.objectMode&&g==null)&&!(!a.objectMode&&(!g||!g.length))){var L=H.push(g);L||(w=!0,h.pause())}});for(var $ in h)typeof h[$]=="function"&&typeof this[$]>"u"&&(this[$]=function(g){return function(){return h[g].apply(h,arguments)}}($));var F=["error","close","destroy","pause","resume"];return C(F,function(g){h.on(g,H.emit.bind(H,g))}),H._read=function(g){w&&(w=!1,h.resume())},H},i._fromList=M;function M(h,a){var w=a.buffer,H=a.length,$=!!a.decoder,F=!!a.objectMode,g;if(w.length===0)return null;if(H===0)g=null;else if(F)g=w.shift();else if(!h||h>=H)$?g=w.join(""):g=k.concat(w,H),w.length=0;else if(h<w[0].length){var L=w[0];g=L.slice(0,h),w[0]=L.slice(h)}else if(h===w[0].length)g=w.shift();else{$?g="":g=new k(h);for(var G=0,re=0,le=w.length;re<le&&G<h;re++){var L=w[0],ie=Math.min(h-G,L.length);$?g+=L.slice(0,ie):L.copy(g,G,0,ie),ie<L.length?w[0]=L.slice(ie):w.shift(),G+=ie}}return g}function p(h){var a=h._readableState;if(a.length>0)throw new Error("endReadable called on non-empty stream");!a.endEmitted&&a.calledRead&&(a.ended=!0,S.nextTick(function(){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,h.readable=!1,h.emit("end"))}))}function C(h,a){for(var w=0,H=h.length;w<H;w++)a(h[w],w)}function V(h,a){for(var w=0,H=h.length;w<H;w++)if(h[w]===a)return w;return-1}}).call(this,T("_process"))},{_process:73,buffer:7,"core-util-is":9,events:14,inherits:26,isarray:29,stream:82,"string_decoder/":98}],77:[function(T,K,_){K.exports=r;var S=T("./_stream_duplex"),b=T("core-util-is");b.inherits=T("inherits"),b.inherits(r,S);function k(n,t){this.afterTransform=function(i,d){return l(t,i,d)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function l(n,t,i){var d=n._transformState;d.transforming=!1;var c=d.writecb;if(!c)return n.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i!=null&&n.push(i),c&&c(t);var o=n._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&n._read(o.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);S.call(this,n),this._transformState=new k(n,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(i){e(t,i)}):e(t)})}r.prototype.push=function(n,t){return this._transformState.needTransform=!1,S.prototype.push.call(this,n,t)},r.prototype._transform=function(n,t,i){throw new Error("not implemented")},r.prototype._write=function(n,t,i){var d=this._transformState;if(d.writecb=i,d.writechunk=n,d.writeencoding=t,!d.transforming){var c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},r.prototype._read=function(n){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function e(n,t){if(t)return n.emit("error",t);var i=n._writableState;n._readableState;var d=n._transformState;if(i.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return n.push(null)}},{"./_stream_duplex":74,"core-util-is":9,inherits:26}],78:[function(T,K,_){(function(S){K.exports=n;var b=T("buffer").Buffer;n.WritableState=e;var k=T("core-util-is");k.inherits=T("inherits");var l=T("stream");k.inherits(n,l);function r(U,B,A){this.chunk=U,this.encoding=B,this.callback=A}function e(U,B){U=U||{};var A=U.highWaterMark;this.highWaterMark=A||A===0?A:16*1024,this.objectMode=!!U.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var M=U.decodeStrings===!1;this.decodeStrings=!M,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(p){N(B,p)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function n(U){var B=T("./_stream_duplex");if(!(this instanceof n)&&!(this instanceof B))return new n(U);this._writableState=new e(U,this),this.writable=!0,l.call(this)}n.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function t(U,B,A){var M=new Error("write after end");U.emit("error",M),S.nextTick(function(){A(M)})}function i(U,B,A,M){var p=!0;if(!b.isBuffer(A)&&typeof A!="string"&&A!==null&&A!==void 0&&!B.objectMode){var C=new TypeError("Invalid non-string/buffer chunk");U.emit("error",C),S.nextTick(function(){M(C)}),p=!1}return p}n.prototype.write=function(U,B,A){var M=this._writableState,p=!1;return typeof B=="function"&&(A=B,B=null),b.isBuffer(U)?B="buffer":B||(B=M.defaultEncoding),typeof A!="function"&&(A=function(){}),M.ended?t(this,M,A):i(this,M,U,A)&&(p=c(this,M,U,B,A)),p};function d(U,B,A){return!U.objectMode&&U.decodeStrings!==!1&&typeof B=="string"&&(B=new b(B,A)),B}function c(U,B,A,M,p){A=d(B,A,M),b.isBuffer(A)&&(M="buffer");var C=B.objectMode?1:A.length;B.length+=C;var V=B.length<B.highWaterMark;return V||(B.needDrain=!0),B.writing?B.buffer.push(new r(A,M,p)):o(U,B,C,A,M,p),V}function o(U,B,A,M,p,C){B.writelen=A,B.writecb=C,B.writing=!0,B.sync=!0,U._write(M,p,B.onwrite),B.sync=!1}function u(U,B,A,M,p){A?S.nextTick(function(){p(M)}):p(M),U._writableState.errorEmitted=!0,U.emit("error",M)}function m(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function N(U,B){var A=U._writableState,M=A.sync,p=A.writecb;if(m(A),B)u(U,A,M,B,p);else{var C=Z(U,A);!C&&!A.bufferProcessing&&A.buffer.length&&E(U,A),M?S.nextTick(function(){O(U,A,C,p)}):O(U,A,C,p)}}function O(U,B,A,M){A||D(U,B),M(),A&&P(U,B)}function D(U,B){B.length===0&&B.needDrain&&(B.needDrain=!1,U.emit("drain"))}function E(U,B){B.bufferProcessing=!0;for(var A=0;A<B.buffer.length;A++){var M=B.buffer[A],p=M.chunk,C=M.encoding,V=M.callback,h=B.objectMode?1:p.length;if(o(U,B,h,p,C,V),B.writing){A++;break}}B.bufferProcessing=!1,A<B.buffer.length?B.buffer=B.buffer.slice(A):B.buffer.length=0}n.prototype._write=function(U,B,A){A(new Error("not implemented"))},n.prototype.end=function(U,B,A){var M=this._writableState;typeof U=="function"?(A=U,U=null,B=null):typeof B=="function"&&(A=B,B=null),typeof U<"u"&&U!==null&&this.write(U,B),!M.ending&&!M.finished&&Y(this,M,A)};function Z(U,B){return B.ending&&B.length===0&&!B.finished&&!B.writing}function P(U,B){var A=Z(U,B);return A&&(B.finished=!0,U.emit("finish")),A}function Y(U,B,A){B.ending=!0,P(U,B),A&&(B.finished?S.nextTick(A):U.once("finish",A)),B.ended=!0}}).call(this,T("_process"))},{"./_stream_duplex":74,_process:73,buffer:7,"core-util-is":9,inherits:26,stream:82}],79:[function(T,K,_){(function(S){var b=T("stream");_=K.exports=T("./lib/_stream_readable.js"),_.Stream=b,_.Readable=_,_.Writable=T("./lib/_stream_writable.js"),_.Duplex=T("./lib/_stream_duplex.js"),_.Transform=T("./lib/_stream_transform.js"),_.PassThrough=T("./lib/_stream_passthrough.js"),!S.browser&&{}.READABLE_STREAM==="disable"&&(K.exports=T("stream"))}).call(this,T("_process"))},{"./lib/_stream_duplex.js":74,"./lib/_stream_passthrough.js":75,"./lib/_stream_readable.js":76,"./lib/_stream_transform.js":77,"./lib/_stream_writable.js":78,_process:73,stream:82}],80:[function(T,K,_){var S=T("buffer"),b=S.Buffer;function k(r,e){for(var n in r)e[n]=r[n]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?K.exports=S:(k(S,_),_.Buffer=l);function l(r,e,n){return b(r,e,n)}k(b,l),l.from=function(r,e,n){if(typeof r=="number")throw new TypeError("Argument must not be a number");return b(r,e,n)},l.alloc=function(r,e,n){if(typeof r!="number")throw new TypeError("Argument must be a number");var t=b(r);return e!==void 0?typeof n=="string"?t.fill(e,n):t.fill(e):t.fill(0),t},l.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return b(r)},l.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return S.SlowBuffer(r)}},{buffer:7}],81:[function(T,K,_){(function(S){var b=T("contentstream"),k=T("gif-encoder"),l=T("jpeg-js"),r=T("pngjs-nozlib").PNG,e=T("ndarray"),n=T("ndarray-ops"),t=T("through");function i(c,o,u){if(c.shape.length===4)return i(c.pick(u),o,0);if(c.shape.length===3)if(c.shape[2]===3)n.assign(e(o,[c.shape[0],c.shape[1],3],[4,4*c.shape[0],1]),c),n.assigns(e(o,[c.shape[0]*c.shape[1]],[4],3),255);else if(c.shape[2]===4)n.assign(e(o,[c.shape[0],c.shape[1],4],[4,c.shape[0]*4,1]),c);else if(c.shape[2]===1)n.assign(e(o,[c.shape[0],c.shape[1],3],[4,4*c.shape[0],1]),e(c.data,[c.shape[0],c.shape[1],3],[c.stride[0],c.stride[1],0],c.offset)),n.assigns(e(o,[c.shape[0]*c.shape[1]],[4],3),255);else return new Error("Incompatible array shape");else if(c.shape.length===2)n.assign(e(o,[c.shape[0],c.shape[1],3],[4,4*c.shape[0],1]),e(c.data,[c.shape[0],c.shape[1],3],[c.stride[0],c.stride[1],0],c.offset)),n.assigns(e(o,[c.shape[0]*c.shape[1]],[4],3),255);else return new Error("Incompatible array shape");return o}function d(c){var o=t();return o.emit("error",c),o}K.exports=function(o,u,m){switch(m=m||{},u.toUpperCase()){case"JPG":case".JPG":case"JPEG":case".JPEG":case"JPE":case".JPE":var E=o.shape[0],Z=o.shape[1],p=new S(E*Z*4);p=i(o,p);var N={data:p,width:E,height:Z},O=l.encode(N,m.quality);return new b(O.data);case"GIF":case".GIF":var D=o.shape.length===4?o.shape[0]:1,E=o.shape.length===4?o.shape[1]:o.shape[0],Z=o.shape.length===4?o.shape[2]:o.shape[1],p=new S(E*Z*4),P=new k(E,Z);P.writeHeader();for(var Y=0;Y<D;Y++)p=i(o,p,Y),P.addFrame(p);return P.finish(),P;case"PNG":case".PNG":var U=new r({width:o.shape[0],height:o.shape[1]}),p=i(o,U.data);return typeof p=="Error"?d(p):(U.data=p,U.pack());case"CANVAS":var B=document.createElement("canvas"),A=B.getContext("2d");B.width=o.shape[0],B.height=o.shape[1];var M=A.getImageData(0,0,B.width,B.height),p=M.data;return p=i(o,p),typeof p=="Error"?d(p):(A.putImageData(M,0,0),B);default:return d(new Error("Unsupported file type: "+u))}}}).call(this,T("buffer").Buffer)},{buffer:7,contentstream:8,"gif-encoder":16,"jpeg-js":30,ndarray:37,"ndarray-ops":34,"pngjs-nozlib":70,through:99}],82:[function(T,K,_){K.exports=k;var S=T("events").EventEmitter,b=T("inherits");b(k,S),k.Readable=T("readable-stream/readable.js"),k.Writable=T("readable-stream/writable.js"),k.Duplex=T("readable-stream/duplex.js"),k.Transform=T("readable-stream/transform.js"),k.PassThrough=T("readable-stream/passthrough.js"),k.Stream=k;function k(){S.call(this)}k.prototype.pipe=function(l,r){var e=this;function n(m){l.writable&&l.write(m)===!1&&e.pause&&e.pause()}e.on("data",n);function t(){e.readable&&e.resume&&e.resume()}l.on("drain",t),!l._isStdio&&(!r||r.end!==!1)&&(e.on("end",d),e.on("close",c));var i=!1;function d(){i||(i=!0,l.end())}function c(){i||(i=!0,typeof l.destroy=="function"&&l.destroy())}function o(m){if(u(),S.listenerCount(this,"error")===0)throw m}e.on("error",o),l.on("error",o);function u(){e.removeListener("data",n),l.removeListener("drain",t),e.removeListener("end",d),e.removeListener("close",c),e.removeListener("error",o),l.removeListener("error",o),e.removeListener("end",u),e.removeListener("close",u),l.removeListener("close",u)}return e.on("end",u),e.on("close",u),l.on("close",u),l.emit("pipe",e),l}},{events:14,inherits:26,"readable-stream/duplex.js":84,"readable-stream/passthrough.js":93,"readable-stream/readable.js":94,"readable-stream/transform.js":95,"readable-stream/writable.js":96}],83:[function(T,K,_){var S={}.toString;K.exports=Array.isArray||function(b){return S.call(b)=="[object Array]"}},{}],84:[function(T,K,_){K.exports=T("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":85}],85:[function(T,K,_){var S=T("process-nextick-args"),b=Object.keys||function(o){var u=[];for(var m in o)u.push(m);return u};K.exports=i;var k=T("core-util-is");k.inherits=T("inherits");var l=T("./_stream_readable"),r=T("./_stream_writable");k.inherits(i,l);for(var e=b(r.prototype),n=0;n<e.length;n++){var t=e[n];i.prototype[t]||(i.prototype[t]=r.prototype[t])}function i(o){if(!(this instanceof i))return new i(o);l.call(this,o),r.call(this,o),o&&o.readable===!1&&(this.readable=!1),o&&o.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,o&&o.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||S(c,this)}function c(o){o.end()}Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}}),i.prototype._destroy=function(o,u){this.push(null),this.end(),S(u,o)}},{"./_stream_readable":87,"./_stream_writable":89,"core-util-is":9,inherits:26,"process-nextick-args":72}],86:[function(T,K,_){K.exports=k;var S=T("./_stream_transform"),b=T("core-util-is");b.inherits=T("inherits"),b.inherits(k,S);function k(l){if(!(this instanceof k))return new k(l);S.call(this,l)}k.prototype._transform=function(l,r,e){e(null,l)}},{"./_stream_transform":88,"core-util-is":9,inherits:26}],87:[function(T,K,_){(function(S){var b=T("process-nextick-args");K.exports=Z;var k=T("isarray"),l;Z.ReadableState=E,T("events").EventEmitter;var r=function(z,R){return z.listeners(R).length},e=T("./internal/streams/stream"),n=T("safe-buffer").Buffer;function t(z){return n.from(z)}function i(z){return Object.prototype.toString.call(z)==="[object Uint8Array]"||n.isBuffer(z)}var d=T("core-util-is");d.inherits=T("inherits");var c=T("util"),o=void 0;c&&c.debuglog?o=c.debuglog("stream"):o=function(){};var u=T("./internal/streams/BufferList"),m=T("./internal/streams/destroy"),N;d.inherits(Z,e);var O=["error","close","destroy","pause","resume"];function D(z,R,J){if(typeof z.prependListener=="function")return z.prependListener(R,J);!z._events||!z._events[R]?z.on(R,J):k(z._events[R])?z._events[R].unshift(J):z._events[R]=[J,z._events[R]]}function E(z,R){l=l||T("./_stream_duplex"),z=z||{},this.objectMode=!!z.objectMode,R instanceof l&&(this.objectMode=this.objectMode||!!z.readableObjectMode);var J=z.highWaterMark,ae=this.objectMode?16:16*1024;this.highWaterMark=J||J===0?J:ae,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(N||(N=T("string_decoder/").StringDecoder),this.decoder=new N(z.encoding),this.encoding=z.encoding)}function Z(z){if(l=l||T("./_stream_duplex"),!(this instanceof Z))return new Z(z);this._readableState=new E(z,this),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),e.call(this)}Object.defineProperty(Z.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),Z.prototype.destroy=m.destroy,Z.prototype._undestroy=m.undestroy,Z.prototype._destroy=function(z,R){this.push(null),R(z)},Z.prototype.push=function(z,R){var J=this._readableState,ae;return J.objectMode?ae=!0:typeof z=="string"&&(R=R||J.defaultEncoding,R!==J.encoding&&(z=n.from(z,R),R=""),ae=!0),P(this,z,R,!1,ae)},Z.prototype.unshift=function(z){return P(this,z,null,!0,!1)};function P(z,R,J,ae,oe){var ee=z._readableState;if(R===null)ee.reading=!1,C(z,ee);else{var ve;oe||(ve=U(ee,R)),ve?z.emit("error",ve):ee.objectMode||R&&R.length>0?(typeof R!="string"&&Object.getPrototypeOf(R)!==n.prototype&&!ee.objectMode&&(R=t(R)),ae?ee.endEmitted?z.emit("error",new Error("stream.unshift() after end event")):Y(z,ee,R,!0):ee.ended?z.emit("error",new Error("stream.push() after EOF")):(ee.reading=!1,ee.decoder&&!J?(R=ee.decoder.write(R),ee.objectMode||R.length!==0?Y(z,ee,R,!1):a(z,ee)):Y(z,ee,R,!1))):ae||(ee.reading=!1)}return B(ee)}function Y(z,R,J,ae){R.flowing&&R.length===0&&!R.sync?(z.emit("data",J),z.read(0)):(R.length+=R.objectMode?1:J.length,ae?R.buffer.unshift(J):R.buffer.push(J),R.needReadable&&V(z)),a(z,R)}function U(z,R){var J;return!i(R)&&typeof R!="string"&&R!==void 0&&!z.objectMode&&(J=new TypeError("Invalid non-string/buffer chunk")),J}function B(z){return!z.ended&&(z.needReadable||z.length<z.highWaterMark||z.length===0)}Z.prototype.isPaused=function(){return this._readableState.flowing===!1},Z.prototype.setEncoding=function(z){return N||(N=T("string_decoder/").StringDecoder),this._readableState.decoder=new N(z),this._readableState.encoding=z,this};var A=8388608;function M(z){return z>=A?z=A:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}function p(z,R){return z<=0||R.length===0&&R.ended?0:R.objectMode?1:z!==z?R.flowing&&R.length?R.buffer.head.data.length:R.length:(z>R.highWaterMark&&(R.highWaterMark=M(z)),z<=R.length?z:R.ended?R.length:(R.needReadable=!0,0))}Z.prototype.read=function(z){o("read",z),z=parseInt(z,10);var R=this._readableState,J=z;if(z!==0&&(R.emittedReadable=!1),z===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return o("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?ce(this):V(this),null;if(z=p(z,R),z===0&&R.ended)return R.length===0&&ce(this),null;var ae=R.needReadable;o("need readable",ae),(R.length===0||R.length-z<R.highWaterMark)&&(ae=!0,o("length less than watermark",ae)),R.ended||R.reading?(ae=!1,o("reading or ended",ae)):ae&&(o("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(z=p(J,R)));var oe;return z>0?oe=G(z,R):oe=null,oe===null?(R.needReadable=!0,z=0):R.length-=z,R.length===0&&(R.ended||(R.needReadable=!0),J!==z&&R.ended&&ce(this)),oe!==null&&this.emit("data",oe),oe};function C(z,R){if(!R.ended){if(R.decoder){var J=R.decoder.end();J&&J.length&&(R.buffer.push(J),R.length+=R.objectMode?1:J.length)}R.ended=!0,V(z)}}function V(z){var R=z._readableState;R.needReadable=!1,R.emittedReadable||(o("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?b(h,z):h(z))}function h(z){o("emit readable"),z.emit("readable"),L(z)}function a(z,R){R.readingMore||(R.readingMore=!0,b(w,z,R))}function w(z,R){for(var J=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(o("maybeReadMore read 0"),z.read(0),J!==R.length);)J=R.length;R.readingMore=!1}Z.prototype._read=function(z){this.emit("error",new Error("_read() is not implemented"))},Z.prototype.pipe=function(z,R){var J=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=z;break;case 1:ae.pipes=[ae.pipes,z];break;default:ae.pipes.push(z);break}ae.pipesCount+=1,o("pipe count=%d opts=%j",ae.pipesCount,R);var oe=(!R||R.end!==!1)&&z!==S.stdout&&z!==S.stderr,ee=oe?x:ye;ae.endEmitted?b(ee):J.once("end",ee),z.on("unpipe",ve);function ve(we,Se){o("onunpipe"),we===J&&Se&&Se.hasUnpiped===!1&&(Se.hasUnpiped=!0,y())}function x(){o("onend"),z.end()}var f=H(J);z.on("drain",f);var v=!1;function y(){o("cleanup"),z.removeListener("close",Ee),z.removeListener("finish",ge),z.removeListener("drain",f),z.removeListener("error",se),z.removeListener("unpipe",ve),J.removeListener("end",x),J.removeListener("end",ye),J.removeListener("data",ne),v=!0,ae.awaitDrain&&(!z._writableState||z._writableState.needDrain)&&f()}var X=!1;J.on("data",ne);function ne(we){o("ondata"),X=!1;var Se=z.write(we);Se===!1&&!X&&((ae.pipesCount===1&&ae.pipes===z||ae.pipesCount>1&&he(ae.pipes,z)!==-1)&&!v&&(o("false write response, pause",J._readableState.awaitDrain),J._readableState.awaitDrain++,X=!0),J.pause())}function se(we){o("onerror",we),ye(),z.removeListener("error",se),r(z,"error")===0&&z.emit("error",we)}D(z,"error",se);function Ee(){z.removeListener("finish",ge),ye()}z.once("close",Ee);function ge(){o("onfinish"),z.removeListener("close",Ee),ye()}z.once("finish",ge);function ye(){o("unpipe"),J.unpipe(z)}return z.emit("pipe",J),ae.flowing||(o("pipe resume"),J.resume()),z};function H(z){return function(){var R=z._readableState;o("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&r(z,"data")&&(R.flowing=!0,L(z))}}Z.prototype.unpipe=function(z){var R=this._readableState,J={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return z&&z!==R.pipes?this:(z||(z=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,z&&z.emit("unpipe",this,J),this);if(!z){var ae=R.pipes,oe=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var ee=0;ee<oe;ee++)ae[ee].emit("unpipe",this,J);return this}var ve=he(R.pipes,z);return ve===-1?this:(R.pipes.splice(ve,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),z.emit("unpipe",this,J),this)},Z.prototype.on=function(z,R){var J=e.prototype.on.call(this,z,R);if(z==="data")this._readableState.flowing!==!1&&this.resume();else if(z==="readable"){var ae=this._readableState;!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.emittedReadable=!1,ae.reading?ae.length&&V(this):b($,this))}return J},Z.prototype.addListener=Z.prototype.on;function $(z){o("readable nexttick read 0"),z.read(0)}Z.prototype.resume=function(){var z=this._readableState;return z.flowing||(o("resume"),z.flowing=!0,F(this,z)),this};function F(z,R){R.resumeScheduled||(R.resumeScheduled=!0,b(g,z,R))}function g(z,R){R.reading||(o("resume read 0"),z.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,z.emit("resume"),L(z),R.flowing&&!R.reading&&z.read(0)}Z.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function L(z){var R=z._readableState;for(o("flow",R.flowing);R.flowing&&z.read()!==null;);}Z.prototype.wrap=function(z){var R=this._readableState,J=!1,ae=this;z.on("end",function(){if(o("wrapped end"),R.decoder&&!R.ended){var ve=R.decoder.end();ve&&ve.length&&ae.push(ve)}ae.push(null)}),z.on("data",function(ve){if(o("wrapped data"),R.decoder&&(ve=R.decoder.write(ve)),!(R.objectMode&&ve==null)&&!(!R.objectMode&&(!ve||!ve.length))){var x=ae.push(ve);x||(J=!0,z.pause())}});for(var oe in z)this[oe]===void 0&&typeof z[oe]=="function"&&(this[oe]=function(ve){return function(){return z[ve].apply(z,arguments)}}(oe));for(var ee=0;ee<O.length;ee++)z.on(O[ee],ae.emit.bind(ae,O[ee]));return ae._read=function(ve){o("wrapped _read",ve),J&&(J=!1,z.resume())},ae},Z._fromList=G;function G(z,R){if(R.length===0)return null;var J;return R.objectMode?J=R.buffer.shift():!z||z>=R.length?(R.decoder?J=R.buffer.join(""):R.buffer.length===1?J=R.buffer.head.data:J=R.buffer.concat(R.length),R.buffer.clear()):J=re(z,R.buffer,R.decoder),J}function re(z,R,J){var ae;return z<R.head.data.length?(ae=R.head.data.slice(0,z),R.head.data=R.head.data.slice(z)):z===R.head.data.length?ae=R.shift():ae=J?le(z,R):ie(z,R),ae}function le(z,R){var J=R.head,ae=1,oe=J.data;for(z-=oe.length;J=J.next;){var ee=J.data,ve=z>ee.length?ee.length:z;if(ve===ee.length?oe+=ee:oe+=ee.slice(0,z),z-=ve,z===0){ve===ee.length?(++ae,J.next?R.head=J.next:R.head=R.tail=null):(R.head=J,J.data=ee.slice(ve));break}++ae}return R.length-=ae,oe}function ie(z,R){var J=n.allocUnsafe(z),ae=R.head,oe=1;for(ae.data.copy(J),z-=ae.data.length;ae=ae.next;){var ee=ae.data,ve=z>ee.length?ee.length:z;if(ee.copy(J,J.length-z,0,ve),z-=ve,z===0){ve===ee.length?(++oe,ae.next?R.head=ae.next:R.head=R.tail=null):(R.head=ae,ae.data=ee.slice(ve));break}++oe}return R.length-=oe,J}function ce(z){var R=z._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,b(te,R,z))}function te(z,R){!z.endEmitted&&z.length===0&&(z.endEmitted=!0,R.readable=!1,R.emit("end"))}function he(z,R){for(var J=0,ae=z.length;J<ae;J++)if(z[J]===R)return J;return-1}}).call(this,T("_process"))},{"./_stream_duplex":85,"./internal/streams/BufferList":90,"./internal/streams/destroy":91,"./internal/streams/stream":92,_process:73,"core-util-is":9,events:14,inherits:26,isarray:83,"process-nextick-args":72,"safe-buffer":80,"string_decoder/":97,util:4}],88:[function(T,K,_){K.exports=r;var S=T("./_stream_duplex"),b=T("core-util-is");b.inherits=T("inherits"),b.inherits(r,S);function k(n){this.afterTransform=function(t,i){return l(n,t,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function l(n,t,i){var d=n._transformState;d.transforming=!1;var c=d.writecb;if(!c)return n.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,i!=null&&n.push(i),c(t);var o=n._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&n._read(o.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);S.call(this,n),this._transformState=new k(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(i,d){e(t,i,d)}):e(t)})}r.prototype.push=function(n,t){return this._transformState.needTransform=!1,S.prototype.push.call(this,n,t)},r.prototype._transform=function(n,t,i){throw new Error("_transform() is not implemented")},r.prototype._write=function(n,t,i){var d=this._transformState;if(d.writecb=i,d.writechunk=n,d.writeencoding=t,!d.transforming){var c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},r.prototype._read=function(n){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(n,t){var i=this;S.prototype._destroy.call(this,n,function(d){t(d),i.emit("close")})};function e(n,t,i){if(t)return n.emit("error",t);i!=null&&n.push(i);var d=n._writableState,c=n._transformState;if(d.length)throw new Error("Calling transform done when ws.length != 0");if(c.transforming)throw new Error("Calling transform done when still transforming");return n.push(null)}},{"./_stream_duplex":85,"core-util-is":9,inherits:26}],89:[function(T,K,_){(function(S){var b=T("process-nextick-args");K.exports=O;function k(F){var g=this;this.next=null,this.entry=null,this.finish=function(){$(g,F)}}var l=!S.browser&&["v0.10","v0.9."].indexOf(S.version.slice(0,5))>-1?setImmediate:b,r;O.WritableState=m;var e=T("core-util-is");e.inherits=T("inherits");var n={deprecate:T("util-deprecate")},t=T("./internal/streams/stream"),i=T("safe-buffer").Buffer;function d(F){return i.from(F)}function c(F){return Object.prototype.toString.call(F)==="[object Uint8Array]"||i.isBuffer(F)}var o=T("./internal/streams/destroy");e.inherits(O,t);function u(){}function m(F,g){r=r||T("./_stream_duplex"),F=F||{},this.objectMode=!!F.objectMode,g instanceof r&&(this.objectMode=this.objectMode||!!F.writableObjectMode);var L=F.highWaterMark,G=this.objectMode?16:16*1024;this.highWaterMark=L||L===0?L:G,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=F.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){A(g,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}m.prototype.getBuffer=function(){for(var g=this.bufferedRequest,L=[];g;)L.push(g),g=g.next;return L},function(){try{Object.defineProperty(m.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(F){return N.call(this,F)?!0:F&&F._writableState instanceof m}})):N=function(F){return F instanceof this};function O(F){if(r=r||T("./_stream_duplex"),!N.call(O,this)&&!(this instanceof r))return new O(F);this._writableState=new m(F,this),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),t.call(this)}O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function D(F,g){var L=new Error("write after end");F.emit("error",L),b(g,L)}function E(F,g,L,G){var re=!0,le=!1;return L===null?le=new TypeError("May not write null values to stream"):typeof L!="string"&&L!==void 0&&!g.objectMode&&(le=new TypeError("Invalid non-string/buffer chunk")),le&&(F.emit("error",le),b(G,le),re=!1),re}O.prototype.write=function(F,g,L){var G=this._writableState,re=!1,le=c(F)&&!G.objectMode;return le&&!i.isBuffer(F)&&(F=d(F)),typeof g=="function"&&(L=g,g=null),le?g="buffer":g||(g=G.defaultEncoding),typeof L!="function"&&(L=u),G.ended?D(this,L):(le||E(this,G,F,L))&&(G.pendingcb++,re=P(this,G,le,F,g,L)),re},O.prototype.cork=function(){var F=this._writableState;F.corked++},O.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,!F.writing&&!F.corked&&!F.finished&&!F.bufferProcessing&&F.bufferedRequest&&C(this,F))},O.prototype.setDefaultEncoding=function(g){if(typeof g=="string"&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+g);return this._writableState.defaultEncoding=g,this};function Z(F,g,L){return!F.objectMode&&F.decodeStrings!==!1&&typeof g=="string"&&(g=i.from(g,L)),g}function P(F,g,L,G,re,le){if(!L){var ie=Z(g,G,re);G!==ie&&(L=!0,re="buffer",G=ie)}var ce=g.objectMode?1:G.length;g.length+=ce;var te=g.length<g.highWaterMark;if(te||(g.needDrain=!0),g.writing||g.corked){var he=g.lastBufferedRequest;g.lastBufferedRequest={chunk:G,encoding:re,isBuf:L,callback:le,next:null},he?he.next=g.lastBufferedRequest:g.bufferedRequest=g.lastBufferedRequest,g.bufferedRequestCount+=1}else Y(F,g,!1,ce,G,re,le);return te}function Y(F,g,L,G,re,le,ie){g.writelen=G,g.writecb=ie,g.writing=!0,g.sync=!0,L?F._writev(re,g.onwrite):F._write(re,le,g.onwrite),g.sync=!1}function U(F,g,L,G,re){--g.pendingcb,L?(b(re,G),b(w,F,g),F._writableState.errorEmitted=!0,F.emit("error",G)):(re(G),F._writableState.errorEmitted=!0,F.emit("error",G),w(F,g))}function B(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}function A(F,g){var L=F._writableState,G=L.sync,re=L.writecb;if(B(L),g)U(F,L,G,g,re);else{var le=V(L);!le&&!L.corked&&!L.bufferProcessing&&L.bufferedRequest&&C(F,L),G?l(M,F,L,le,re):M(F,L,le,re)}}function M(F,g,L,G){L||p(F,g),g.pendingcb--,G(),w(F,g)}function p(F,g){g.length===0&&g.needDrain&&(g.needDrain=!1,F.emit("drain"))}function C(F,g){g.bufferProcessing=!0;var L=g.bufferedRequest;if(F._writev&&L&&L.next){var G=g.bufferedRequestCount,re=new Array(G),le=g.corkedRequestsFree;le.entry=L;for(var ie=0,ce=!0;L;)re[ie]=L,L.isBuf||(ce=!1),L=L.next,ie+=1;re.allBuffers=ce,Y(F,g,!0,g.length,re,"",le.finish),g.pendingcb++,g.lastBufferedRequest=null,le.next?(g.corkedRequestsFree=le.next,le.next=null):g.corkedRequestsFree=new k(g)}else{for(;L;){var te=L.chunk,he=L.encoding,z=L.callback,R=g.objectMode?1:te.length;if(Y(F,g,!1,R,te,he,z),L=L.next,g.writing)break}L===null&&(g.lastBufferedRequest=null)}g.bufferedRequestCount=0,g.bufferedRequest=L,g.bufferProcessing=!1}O.prototype._write=function(F,g,L){L(new Error("_write() is not implemented"))},O.prototype._writev=null,O.prototype.end=function(F,g,L){var G=this._writableState;typeof F=="function"?(L=F,F=null,g=null):typeof g=="function"&&(L=g,g=null),F!=null&&this.write(F,g),G.corked&&(G.corked=1,this.uncork()),!G.ending&&!G.finished&&H(this,G,L)};function V(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function h(F,g){F._final(function(L){g.pendingcb--,L&&F.emit("error",L),g.prefinished=!0,F.emit("prefinish"),w(F,g)})}function a(F,g){!g.prefinished&&!g.finalCalled&&(typeof F._final=="function"?(g.pendingcb++,g.finalCalled=!0,b(h,F,g)):(g.prefinished=!0,F.emit("prefinish")))}function w(F,g){var L=V(g);return L&&(a(F,g),g.pendingcb===0&&(g.finished=!0,F.emit("finish"))),L}function H(F,g,L){g.ending=!0,w(F,g),L&&(g.finished?b(L):F.once("finish",L)),g.ended=!0,F.writable=!1}function $(F,g,L){var G=F.entry;for(F.entry=null;G;){var re=G.callback;g.pendingcb--,re(L),G=G.next}g.corkedRequestsFree?g.corkedRequestsFree.next=F:g.corkedRequestsFree=F}Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),O.prototype.destroy=o.destroy,O.prototype._undestroy=o.undestroy,O.prototype._destroy=function(F,g){this.end(),g(F)}}).call(this,T("_process"))},{"./_stream_duplex":85,"./internal/streams/destroy":91,"./internal/streams/stream":92,_process:73,"core-util-is":9,inherits:26,"process-nextick-args":72,"safe-buffer":80,"util-deprecate":101}],90:[function(T,K,_){function S(l,r){if(!(l instanceof r))throw new TypeError("Cannot call a class as a function")}var b=T("safe-buffer").Buffer;function k(l,r,e){l.copy(r,e)}K.exports=function(){function l(){S(this,l),this.head=null,this.tail=null,this.length=0}return l.prototype.push=function(e){var n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},l.prototype.unshift=function(e){var n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},l.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},l.prototype.clear=function(){this.head=this.tail=null,this.length=0},l.prototype.join=function(e){if(this.length===0)return"";for(var n=this.head,t=""+n.data;n=n.next;)t+=e+n.data;return t},l.prototype.concat=function(e){if(this.length===0)return b.alloc(0);if(this.length===1)return this.head.data;for(var n=b.allocUnsafe(e>>>0),t=this.head,i=0;t;)k(t.data,n,i),i+=t.data.length,t=t.next;return n},l}()},{"safe-buffer":80}],91:[function(T,K,_){var S=T("process-nextick-args");function b(r,e){var n=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(t||i){e?e(r):r&&(!this._writableState||!this._writableState.errorEmitted)&&S(l,this,r);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(d){!e&&d?(S(l,n,d),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(d)})}function k(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(r,e){r.emit("error",e)}K.exports={destroy:b,undestroy:k}},{"process-nextick-args":72}],92:[function(T,K,_){K.exports=T("events").EventEmitter},{events:14}],93:[function(T,K,_){K.exports=T("./readable").PassThrough},{"./readable":94}],94:[function(T,K,_){_=K.exports=T("./lib/_stream_readable.js"),_.Stream=_,_.Readable=_,_.Writable=T("./lib/_stream_writable.js"),_.Duplex=T("./lib/_stream_duplex.js"),_.Transform=T("./lib/_stream_transform.js"),_.PassThrough=T("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":85,"./lib/_stream_passthrough.js":86,"./lib/_stream_readable.js":87,"./lib/_stream_transform.js":88,"./lib/_stream_writable.js":89}],95:[function(T,K,_){K.exports=T("./readable").Transform},{"./readable":94}],96:[function(T,K,_){K.exports=T("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":89}],97:[function(T,K,_){var S=T("safe-buffer").Buffer,b=S.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(E){if(!E)return"utf8";for(var Z;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(Z)return;E=(""+E).toLowerCase(),Z=!0}}function l(E){var Z=k(E);if(typeof Z!="string"&&(S.isEncoding===b||!b(E)))throw new Error("Unknown encoding: "+E);return Z||E}_.StringDecoder=r;function r(E){this.encoding=l(E);var Z;switch(this.encoding){case"utf16le":this.text=o,this.end=u,Z=4;break;case"utf8":this.fillLast=i,Z=4;break;case"base64":this.text=m,this.end=N,Z=3;break;default:this.write=O,this.end=D;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=S.allocUnsafe(Z)}r.prototype.write=function(E){if(E.length===0)return"";var Z,P;if(this.lastNeed){if(Z=this.fillLast(E),Z===void 0)return"";P=this.lastNeed,this.lastNeed=0}else P=0;return P<E.length?Z?Z+this.text(E,P):this.text(E,P):Z||""},r.prototype.end=c,r.prototype.text=d,r.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function e(E){return E<=127?0:E>>5===6?2:E>>4===14?3:E>>3===30?4:-1}function n(E,Z,P){var Y=Z.length-1;if(Y<P)return 0;var U=e(Z[Y]);return U>=0?(U>0&&(E.lastNeed=U-1),U):--Y<P?0:(U=e(Z[Y]),U>=0?(U>0&&(E.lastNeed=U-2),U):--Y<P?0:(U=e(Z[Y]),U>=0?(U>0&&(U===2?U=0:E.lastNeed=U-3),U):0))}function t(E,Z,P){if((Z[0]&192)!==128)return E.lastNeed=0,"�".repeat(P);if(E.lastNeed>1&&Z.length>1){if((Z[1]&192)!==128)return E.lastNeed=1,"�".repeat(P+1);if(E.lastNeed>2&&Z.length>2&&(Z[2]&192)!==128)return E.lastNeed=2,"�".repeat(P+2)}}function i(E){var Z=this.lastTotal-this.lastNeed,P=t(this,E,Z);if(P!==void 0)return P;if(this.lastNeed<=E.length)return E.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,Z,0,E.length),this.lastNeed-=E.length}function d(E,Z){var P=n(this,E,Z);if(!this.lastNeed)return E.toString("utf8",Z);this.lastTotal=P;var Y=E.length-(P-this.lastNeed);return E.copy(this.lastChar,0,Y),E.toString("utf8",Z,Y)}function c(E){var Z=E&&E.length?this.write(E):"";return this.lastNeed?Z+"�".repeat(this.lastTotal-this.lastNeed):Z}function o(E,Z){if((E.length-Z)%2===0){var P=E.toString("utf16le",Z);if(P){var Y=P.charCodeAt(P.length-1);if(Y>=55296&&Y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],P.slice(0,-1)}return P}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",Z,E.length-1)}function u(E){var Z=E&&E.length?this.write(E):"";if(this.lastNeed){var P=this.lastTotal-this.lastNeed;return Z+this.lastChar.toString("utf16le",0,P)}return Z}function m(E,Z){var P=(E.length-Z)%3;return P===0?E.toString("base64",Z):(this.lastNeed=3-P,this.lastTotal=3,P===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",Z,E.length-P))}function N(E){var Z=E&&E.length?this.write(E):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function O(E){return E.toString(this.encoding)}function D(E){return E&&E.length?this.write(E):""}},{"safe-buffer":80}],98:[function(T,K,_){var S=T("buffer").Buffer,b=S.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(t){if(t&&!b(t))throw new Error("Unknown encoding: "+t)}var l=_.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),k(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=e;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=n;break;default:this.write=r;return}this.charBuffer=new S(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var i="";this.charLength;){var d=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,d),this.charReceived+=d,this.charReceived<this.charLength)return"";t=t.slice(d,t.length),i=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=i.charCodeAt(i.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,i="";continue}if(this.charReceived=this.charLength=0,t.length===0)return i;break}this.detectIncompleteChar(t);var c=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,c),c-=this.charReceived),i+=t.toString(this.encoding,0,c);var c=i.length-1,o=i.charCodeAt(c);if(o>=55296&&o<=56319){var u=this.surrogateSize;return this.charLength+=u,this.charReceived+=u,this.charBuffer.copy(this.charBuffer,u,0,u),t.copy(this.charBuffer,0,0,u),i.substring(0,c)}return i},l.prototype.detectIncompleteChar=function(t){for(var i=t.length>=3?3:t.length;i>0;i--){var d=t[t.length-i];if(i==1&&d>>5==6){this.charLength=2;break}if(i<=2&&d>>4==14){this.charLength=3;break}if(i<=3&&d>>3==30){this.charLength=4;break}}this.charReceived=i},l.prototype.end=function(t){var i="";if(t&&t.length&&(i=this.write(t)),this.charReceived){var d=this.charReceived,c=this.charBuffer,o=this.encoding;i+=c.slice(0,d).toString(o)}return i};function r(t){return t.toString(this.encoding)}function e(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function n(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}},{buffer:7}],99:[function(T,K,_){(function(S){var b=T("stream");K.exports=k,k.through=k;function k(l,r,e){l=l||function(m){this.queue(m)},r=r||function(){this.queue(null)};var n=!1,t=!1,i=[],d=!1,c=new b;c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(e&&e.autoDestroy===!1),c.write=function(m){return l.call(this,m),!c.paused};function o(){for(;i.length&&!c.paused;){var m=i.shift();if(m===null)return c.emit("end");c.emit("data",m)}}c.queue=c.push=function(m){return d||(m===null&&(d=!0),i.push(m),o()),c},c.on("end",function(){c.readable=!1,!c.writable&&c.autoDestroy&&S.nextTick(function(){c.destroy()})});function u(){c.writable=!1,r.call(c),!c.readable&&c.autoDestroy&&c.destroy()}return c.end=function(m){if(!n)return n=!0,arguments.length&&c.write(m),u(),c},c.destroy=function(){if(!t)return t=!0,n=!0,i.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),o(),c.paused||c.emit("drain"),c},c}}).call(this,T("_process"))},{_process:73,stream:82}],100:[function(T,K,_){function S(l,r){for(var e=1,n=l.length,t=l[0],i=l[0],d=1;d<n;++d)if(i=t,t=l[d],r(t,i)){if(d===e){e++;continue}l[e++]=t}return l.length=e,l}function b(l){for(var r=1,e=l.length,n=l[0],t=l[0],i=1;i<e;++i,t=n)if(t=n,n=l[i],n!==t){if(i===r){r++;continue}l[r++]=n}return l.length=r,l}function k(l,r,e){return l.length===0?l:r?(e||l.sort(r),S(l,r)):(e||l.sort(),b(l))}K.exports=k},{}],101:[function(T,K,_){(function(S){K.exports=b;function b(l,r){if(k("noDeprecation"))return l;var e=!1;function n(){if(!e){if(k("throwDeprecation"))throw new Error(r);k("traceDeprecation")?console.trace(r):console.warn(r),e=!0}return l.apply(this,arguments)}return n}function k(l){try{if(!S.localStorage)return!1}catch{return!1}var r=S.localStorage[l];return r==null?!1:String(r).toLowerCase()==="true"}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],102:[function(T,K,_){arguments[4][26][0].apply(_,arguments)},{dup:26}],103:[function(T,K,_){K.exports=function(b){return b&&typeof b=="object"&&typeof b.copy=="function"&&typeof b.fill=="function"&&typeof b.readUInt8=="function"}},{}],104:[function(T,K,_){(function(S,b){var k=/%[sdj%]/g;_.format=function(g){if(!Y(g)){for(var L=[],G=0;G<arguments.length;G++)L.push(e(arguments[G]));return L.join(" ")}for(var G=1,re=arguments,le=re.length,ie=String(g).replace(k,function(te){if(te==="%%")return"%";if(G>=le)return te;switch(te){case"%s":return String(re[G++]);case"%d":return Number(re[G++]);case"%j":try{return JSON.stringify(re[G++])}catch{return"[Circular]"}default:return te}}),ce=re[G];G<le;ce=re[++G])E(ce)||!M(ce)?ie+=" "+ce:ie+=" "+e(ce);return ie},_.deprecate=function(g,L){if(B(b.process))return function(){return _.deprecate(g,L).apply(this,arguments)};if(S.noDeprecation===!0)return g;var G=!1;function re(){if(!G){if(S.throwDeprecation)throw new Error(L);S.traceDeprecation?console.trace(L):console.error(L),G=!0}return g.apply(this,arguments)}return re};var l={},r;_.debuglog=function(g){if(B(r)&&(r={}.NODE_DEBUG||""),g=g.toUpperCase(),!l[g])if(new RegExp("\\b"+g+"\\b","i").test(r)){var L=S.pid;l[g]=function(){var G=_.format.apply(_,arguments);console.error("%s %d: %s",g,L,G)}}else l[g]=function(){};return l[g]};function e(g,L){var G={seen:[],stylize:t};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),D(L)?G.showHidden=L:L&&_._extend(G,L),B(G.showHidden)&&(G.showHidden=!1),B(G.depth)&&(G.depth=2),B(G.colors)&&(G.colors=!1),B(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=n),d(G,g,G.depth)}_.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(g,L){var G=e.styles[L];return G?"\x1B["+e.colors[G][0]+"m"+g+"\x1B["+e.colors[G][1]+"m":g}function t(g,L){return g}function i(g){var L={};return g.forEach(function(G,re){L[G]=!0}),L}function d(g,L,G){if(g.customInspect&&L&&V(L.inspect)&&L.inspect!==_.inspect&&!(L.constructor&&L.constructor.prototype===L)){var re=L.inspect(G,g);return Y(re)||(re=d(g,re,G)),re}var le=c(g,L);if(le)return le;var ie=Object.keys(L),ce=i(ie);if(g.showHidden&&(ie=Object.getOwnPropertyNames(L)),C(L)&&(ie.indexOf("message")>=0||ie.indexOf("description")>=0))return o(L);if(ie.length===0){if(V(L)){var te=L.name?": "+L.name:"";return g.stylize("[Function"+te+"]","special")}if(A(L))return g.stylize(RegExp.prototype.toString.call(L),"regexp");if(p(L))return g.stylize(Date.prototype.toString.call(L),"date");if(C(L))return o(L)}var he="",z=!1,R=["{","}"];if(O(L)&&(z=!0,R=["[","]"]),V(L)){var J=L.name?": "+L.name:"";he=" [Function"+J+"]"}if(A(L)&&(he=" "+RegExp.prototype.toString.call(L)),p(L)&&(he=" "+Date.prototype.toUTCString.call(L)),C(L)&&(he=" "+o(L)),ie.length===0&&(!z||L.length==0))return R[0]+he+R[1];if(G<0)return A(L)?g.stylize(RegExp.prototype.toString.call(L),"regexp"):g.stylize("[Object]","special");g.seen.push(L);var ae;return z?ae=u(g,L,G,ce,ie):ae=ie.map(function(oe){return m(g,L,G,ce,oe,z)}),g.seen.pop(),N(ae,he,R)}function c(g,L){if(B(L))return g.stylize("undefined","undefined");if(Y(L)){var G="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return g.stylize(G,"string")}if(P(L))return g.stylize(""+L,"number");if(D(L))return g.stylize(""+L,"boolean");if(E(L))return g.stylize("null","null")}function o(g){return"["+Error.prototype.toString.call(g)+"]"}function u(g,L,G,re,le){for(var ie=[],ce=0,te=L.length;ce<te;++ce)F(L,String(ce))?ie.push(m(g,L,G,re,String(ce),!0)):ie.push("");return le.forEach(function(he){he.match(/^\d+$/)||ie.push(m(g,L,G,re,he,!0))}),ie}function m(g,L,G,re,le,ie){var ce,te,he;if(he=Object.getOwnPropertyDescriptor(L,le)||{value:L[le]},he.get?he.set?te=g.stylize("[Getter/Setter]","special"):te=g.stylize("[Getter]","special"):he.set&&(te=g.stylize("[Setter]","special")),F(re,le)||(ce="["+le+"]"),te||(g.seen.indexOf(he.value)<0?(E(G)?te=d(g,he.value,null):te=d(g,he.value,G-1),te.indexOf(`
`)>-1&&(ie?te=te.split(`
`).map(function(z){return"  "+z}).join(`
`).substr(2):te=`
`+te.split(`
`).map(function(z){return"   "+z}).join(`
`))):te=g.stylize("[Circular]","special")),B(ce)){if(ie&&le.match(/^\d+$/))return te;ce=JSON.stringify(""+le),ce.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ce=ce.substr(1,ce.length-2),ce=g.stylize(ce,"name")):(ce=ce.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ce=g.stylize(ce,"string"))}return ce+": "+te}function N(g,L,G){var re=g.reduce(function(le,ie){return ie.indexOf(`
`)>=0,le+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0);return re>60?G[0]+(L===""?"":L+`
 `)+" "+g.join(`,
  `)+" "+G[1]:G[0]+L+" "+g.join(", ")+" "+G[1]}function O(g){return Array.isArray(g)}_.isArray=O;function D(g){return typeof g=="boolean"}_.isBoolean=D;function E(g){return g===null}_.isNull=E;function Z(g){return g==null}_.isNullOrUndefined=Z;function P(g){return typeof g=="number"}_.isNumber=P;function Y(g){return typeof g=="string"}_.isString=Y;function U(g){return typeof g=="symbol"}_.isSymbol=U;function B(g){return g===void 0}_.isUndefined=B;function A(g){return M(g)&&a(g)==="[object RegExp]"}_.isRegExp=A;function M(g){return typeof g=="object"&&g!==null}_.isObject=M;function p(g){return M(g)&&a(g)==="[object Date]"}_.isDate=p;function C(g){return M(g)&&(a(g)==="[object Error]"||g instanceof Error)}_.isError=C;function V(g){return typeof g=="function"}_.isFunction=V;function h(g){return g===null||typeof g=="boolean"||typeof g=="number"||typeof g=="string"||typeof g=="symbol"||typeof g>"u"}_.isPrimitive=h,_.isBuffer=T("./support/isBuffer");function a(g){return Object.prototype.toString.call(g)}function w(g){return g<10?"0"+g.toString(10):g.toString(10)}var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $(){var g=new Date,L=[w(g.getHours()),w(g.getMinutes()),w(g.getSeconds())].join(":");return[g.getDate(),H[g.getMonth()],L].join(" ")}_.log=function(){console.log("%s - %s",$(),_.format.apply(_,arguments))},_.inherits=T("inherits"),_._extend=function(g,L){if(!L||!M(L))return g;for(var G=Object.keys(L),re=G.length;re--;)g[G[re]]=L[G[re]];return g};function F(g,L){return Object.prototype.hasOwnProperty.call(g,L)}}).call(this,T("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":103,_process:73,inherits:102}]},{},[1])(1)});(function(){const K=document.getElementById("memeResult"),_=document.getElementById("canvas"),S=document.getElementById("canvasPlaceholder"),b=_.getContext("2d"),k=document.getElementById("addTextboxBtn"),l=document.getElementById("inputsContainer"),r=document.getElementById("generateMemeBtn"),e=document.getElementById("downloadMemeBtn"),n=document.getElementById("downloadMemePreview");document.getElementById("shareSection"),document.getElementById("shareBtn");const t=document.getElementById("gifImage"),i=document.getElementById("loading"),d=document.getElementById("result-loading"),c=document.getElementById("show_gif"),o=document.getElementById("canvas-cont"),u=o.querySelector(".canvas-image");let m=null;const N={text:"",fillColor:"#ffffff",shadowColor:"#000000",font:"Impact",fontSize:40,textAlign:"center",shadowBlur:3,offsetY:0,offsetX:0,allCaps:!0};var O=[],D=[],E=0,Z=0,P=!1,Y=null;const U=[Object.assign({},N),Object.assign({},N)];function B(){for(var G=new GIF({workers:2,quality:8,workerScript:"/themes/default/js/gif.worker.js"}),re=0;re<D.length;re++)G.addFrame(D[re].frame,{delay:D[re].delay});G.on("finished",function(le){if(P){var ie=URL.createObjectURL(le);n.src=ie,n.addEventListener("load",function(ce){d.classList.remove("d-flex"),d.classList.add("d-none"),n.classList.remove("d-none"),e.classList.remove("d-none"),e.download="meme.png",e.href=ie})}}),G.render()}function A(){d.classList.add("d-flex"),d.classList.remove("d-none");var G=O.length;D=[];for(var re=0;re<G;re++){var le=document.createElement("canvas"),ie=le.getContext("2d"),ce=le.width=E,te=le.height=Z,he=O[re].frame;ie.clearRect(0,0,ce,te),ie.drawImage(he,0,0,ce,te),ie.drawImage(_,0,0),D.push({frame:le,delay:O[re].delay})}B()}function M(){b.clearRect(0,0,_.width,_.height),U.forEach(function(G,re){b.font=`${G.fontSize}px ${G.font}`;const le=re+1,ie=b.measureText("M").width+20,ce=G.textAlign==="center"||!G.textAlign?_.width/2:G.textAlign==="left"?0:_.width,te=Number.isNaN(Number(G.shadowBlur))?3:Number(G.shadowBlur),he=G.allCaps===!0?G.text.toUpperCase():G.text;b.fillStyle=G.fillColor,b.textAlign=G.textAlign,b.save(),te!==0&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=te,b.shadowColor=G.shadowColor),b.fillText(he,ce+Number(G.offsetX),re===1?_.height-20+Number(G.offsetY):ie*(le-1||1)+Number(G.offsetY)),b.restore()})}function p(){c.classList.remove("d-none"),M(),gifFrames({url:Y,frames:"all",outputType:"canvas",cumulative:!0},function(G,re){if(G)throw G;O=[],re.forEach(function(le){return O.push({frame:le.getImage(),delay:le.frameInfo.delay*10}),0})})}function C(){d.classList.remove("d-flex"),d.classList.add("d-none"),e.classList.add("d-none"),e.download="",e.href="",n.classList.add("d-none"),n.src="",n.onload=function(){}}function V(){t.src=""}function h(){if(C(),P)A();else{const G=_.toDataURL("image/png").replace("image/png","image/octet-stream");e.classList.remove("d-none"),e.download="meme.png",e.href=G,n.src=G,n.classList.remove("d-none")}K.classList.remove("d-none"),setTimeout(()=>document.querySelector(".meme-results-wrapper").scrollIntoView({behavior:"smooth",block:"start"}),100)}function a(G,re){let te=G,he=re;te>he?te>1e3&&(he*=1e3/te,te=1e3):he>1e3&&(te*=1e3/he,he=1e3);let z=te,R=he;te>600&&(R*=600/z,z=600),_.width=E=te,_.height=Z=he,_.style.width=z+"px",_.style.height=R+"px",u.style.width=z+"px",u.style.height=R+"px"}function w(G){a(G.target.width,G.target.height),P?p():L(G.target),m=G.target,o.classList.remove("d-none"),i.classList.add("d-none")}function H(G){if(m)return;V();const re=G[0];var le=re.name,ie=le.substr(le.lastIndexOf(".")+1);P=ie=="gif",S.classList.add("d-none"),i.classList.add("d-flex"),i.classList.remove("d-none");const ce=P?t:new Image,te=new FileReader;te.addEventListener("load",function(he){Y=he.target.result,ce.addEventListener("load",w),ce.src=Y}),te.readAsDataURL(re)}function $(G,re,le){U[re][le]=G.type==="checkbox"?G.checked:G.value,P?M():L(m)}function F(G){const re=`
    <div class="input-group input-group-lg mb-3 mt-lg-0 mt-sm-3">
      <input class="form-control" type="text" data-input="text" autocomplete="off" placeholder="${G===0?"Top Text":G===1?"Bottom Text":`Text #${G+1}`}">
      <button class="btn btn-outline-secondary dropdown-toggle" tabindex="-1" data-button="settings" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
        <svg width="22" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.8529 4.81589C12.9434 4.92564 12.992 5.06437 12.9899 5.20706V6.87527C12.992 7.01796 12.9434 7.15669 12.8529 7.26644C12.7676 7.37975 12.647 7.4608 12.5104 7.49654L11.8367 7.68062C11.7728 7.70092 11.7141 7.73515 11.6648 7.78088C11.6154 7.82661 11.5767 7.88272 11.5513 7.94523C11.5203 8.00569 11.5041 8.07276 11.5041 8.14082C11.5041 8.20888 11.5203 8.27595 11.5513 8.3364L11.8938 8.95767C11.9659 9.07855 11.9941 9.22084 11.9738 9.36034C11.96 9.49689 11.9041 9.62566 11.8139 9.7285L10.6722 10.879C10.5741 10.9878 10.4403 11.0573 10.2954 11.0746C10.1572 11.0885 10.018 11.0604 9.89576 10.994L9.2678 10.6489C9.2078 10.6176 9.14124 10.6013 9.0737 10.6013C9.00615 10.6013 8.93959 10.6176 8.8796 10.6489C8.82065 10.6661 8.76588 10.6955 8.71872 10.7351C8.67157 10.7747 8.63305 10.8237 8.60558 10.879L8.43431 11.5463C8.406 11.6872 8.32916 11.8135 8.21738 11.9029C8.10557 11.9875 7.96895 12.032 7.82918 12.0295H6.16222C6.02218 12.0339 5.88498 11.9891 5.77402 11.9029C5.65871 11.8148 5.57787 11.6885 5.54567 11.5463L5.36299 10.879C5.34887 10.8121 5.31855 10.7498 5.27472 10.6976C5.23089 10.6454 5.17492 10.605 5.1118 10.5799C5.04237 10.5611 4.96975 10.5575 4.89884 10.5694C4.82794 10.5813 4.76039 10.6084 4.70077 10.6489L4.11847 11.0056C3.99621 11.0719 3.85705 11.1 3.71885 11.0861C3.56828 11.0685 3.42975 10.9946 3.33066 10.879L2.1889 9.7285C2.08816 9.62568 2.02394 9.49222 2.00622 9.34884C1.9805 9.20925 2.00912 9.06505 2.08614 8.94617L2.42867 8.34791C2.45914 8.28319 2.47494 8.21245 2.47494 8.14082C2.47494 8.06919 2.45914 7.99845 2.42867 7.93373C2.4054 7.86737 2.36769 7.80709 2.3183 7.75732C2.26891 7.70755 2.20909 7.66955 2.14323 7.64611L1.46959 7.48504C1.33184 7.45195 1.21035 7.37035 1.12707 7.25494C1.03656 7.14519 0.987967 7.00645 0.990055 6.86377V5.20706C0.987967 5.06437 1.03656 4.92564 1.12707 4.81589C1.21035 4.70048 1.33184 4.61887 1.46959 4.58579L2.14323 4.42472C2.20698 4.39985 2.26454 4.36121 2.31188 4.31151C2.35922 4.26182 2.39519 4.20229 2.41725 4.1371C2.44772 4.07238 2.46352 4.00164 2.46352 3.93001C2.46352 3.85837 2.44772 3.78764 2.41725 3.72292L2.07472 3.12466C1.99771 3.00578 1.96908 2.86157 1.9948 2.72199C2.01253 2.57861 2.07674 2.44514 2.17748 2.34232L3.31924 1.19183C3.41733 1.083 3.55113 1.01354 3.69602 0.996243C3.83421 0.982339 3.97338 1.01038 4.09563 1.07678L4.67793 1.43343C4.74412 1.46434 4.8162 1.48035 4.88916 1.48035C4.96211 1.48035 5.03419 1.46434 5.10038 1.43343C5.1635 1.40834 5.21947 1.36789 5.2633 1.31569C5.30713 1.2635 5.33746 1.20118 5.35157 1.1343L5.54567 0.52454C5.57787 0.38233 5.65871 0.256072 5.77402 0.167886C5.8839 0.0784095 6.02094 0.0296716 6.16222 0.0298267H7.79493C7.94692 0.0281611 8.09529 0.0766468 8.21738 0.167886C8.32916 0.257276 8.406 0.383599 8.43431 0.52454L8.60558 1.19183C8.62461 1.25993 8.65936 1.32252 8.70698 1.37451C8.75461 1.42649 8.81375 1.4664 8.8796 1.49096C8.94383 1.52166 9.01403 1.53758 9.08511 1.53758C9.1562 1.53758 9.2264 1.52166 9.29063 1.49096L9.88434 1.1343C10.0066 1.06791 10.1458 1.03986 10.284 1.05377C10.4288 1.07106 10.5627 1.14052 10.6607 1.24935L11.8025 2.39985C11.9032 2.50267 11.9675 2.63613 11.9852 2.77951C12.0055 2.91901 11.9773 3.06131 11.9053 3.18218L11.5513 3.74593C11.5203 3.80638 11.5041 3.87345 11.5041 3.94151C11.5041 4.00957 11.5203 4.07664 11.5513 4.1371C11.5762 4.2007 11.6164 4.2571 11.6682 4.30126C11.72 4.34543 11.7818 4.37598 11.8482 4.3902L12.5218 4.58579C12.6542 4.62383 12.7706 4.70468 12.8529 4.81589V4.81589ZM8.76542 9.15325C9.30993 8.84393 9.76005 8.39036 10.067 7.84169C10.3928 7.2967 10.5627 6.67159 10.558 6.03541C10.5627 5.39923 10.3928 4.77413 10.067 4.22914C9.75468 3.68459 9.30583 3.2323 8.76542 2.91757C8.22789 2.59138 7.61176 2.42025 6.98428 2.42286C6.35609 2.41476 5.7385 2.5863 5.20314 2.91757C4.65854 3.2307 4.20561 3.68313 3.89012 4.22914C3.57421 4.77776 3.40872 5.40113 3.41058 6.03541C3.40563 6.66495 3.56721 7.28445 3.8787 7.83019C4.18568 8.37886 4.6358 8.83242 5.1803 9.14175C5.72679 9.46524 6.35052 9.63231 6.98428 9.62496C7.60823 9.62355 8.22142 9.46116 8.76542 9.15325V9.15325ZM7.80635 6.85226C8.01589 6.63328 8.13084 6.33958 8.12604 6.03541C8.12948 5.8826 8.10073 5.73078 8.04168 5.58998C7.98264 5.44918 7.89465 5.32259 7.78351 5.21856C7.68056 5.11011 7.55633 5.02444 7.41873 4.967C7.28114 4.90956 7.13318 4.88161 6.98428 4.88492C6.8321 4.88251 6.68099 4.91079 6.53981 4.96809C6.39864 5.02539 6.27026 5.11055 6.16222 5.21856C5.95267 5.43755 5.83773 5.73125 5.84252 6.03541C5.84014 6.18875 5.8682 6.34103 5.92506 6.48328C5.98192 6.62554 6.06644 6.7549 6.17363 6.86377C6.28032 6.9704 6.40684 7.05476 6.54595 7.11201C6.68506 7.16927 6.83402 7.19829 6.98428 7.19741C7.13646 7.19982 7.28758 7.17154 7.42875 7.11424C7.56992 7.05694 7.69831 6.97179 7.80635 6.86377V6.85226Z" fill="#ACAFBD" />
        </svg>
      </button>
      <div class="dropdown-menu dropdown-menu-end ul-form">
        <div class="mb-3 d-flex justify-content-between">
            <div class="form-check pt-2">
                <input type="checkbox" class="form-check-input" id="allCapsCheckbox_${G}" data-input="allCaps">
                <label class="custom-control-label" for="allCapsCheckbox_${G}">USE ALL CAPS</label>
            </div>
            <div class="color d-flex">
                <input class="form-control border form-control-color p-0 text-end diraction-end" type="color" value="${U[G].fillColor}" data-input="fillColor" title="Fill color">
                <input class="form-control border form-control-color p-0 ms-2" type="color" value="${U[G].shadowColor}" data-input="shadowColor" title="Outline color">
            </div>
        </div>
        <div class="mb-3 d-flex justify-content-between gap-2 align-btn">
            <select class="form-select" data-input="font">
                <option value="Impact">Impact</option>
                <option value="Arial">Arial</option>
                <option value="Helvetica">Helvetica</option>
                <option value="Comic Sans MS">Comic Sans MS</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Times">Times</option>
                <option value="Courier New">Courier New</option>
                <option value="Verdana">Verdana</option>
                <option value="Georgia">Georgia</option>
                <option value="Palatino">Palatino</option>
                <option value="Garamond">Garamond</option>
                <option value="Bookman">Bookman</option>
                <option value="Trebuchet MS">Trebuchet MS</option>
                <option value="Arial Black">Arial Black</option>
            </select>
            <select class="form-select" data-input="textAlign">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
            </select>
        </div>
        <div class="group-50">
            <div class="mb-3 w-50">
                <label class="mb-1">Vertical offset:</label>
                <input class="form-control" type="number" value="${U[G].offsetY}" data-input="offsetY">
            </div>
            <div class="mb-3 w-50">
                <label class="mb-1">Horizontal offset:</label>
                <input class="form-control" type="number" value="${U[G].offsetX}" data-input="offsetX">
            </div>
        </div>
        <div class="group-50">
            <div class="mb-3 w-50">
                <label class="mb-1">Font size:</label>
                <input class="form-control" type="number" min="1" max="100" value="${U[G].fontSize}" data-input="fontSize">
            </div>
            <div class="mb-3 w-50">
                <label class="mb-1">Shadow width:</label>
                <input class="form-control" type="number" min="0" max="10" value="${U[G].shadowBlur}" data-input="shadowBlur">
            </div>
        </div>
      </div>
    </div>
`,le=document.createDocumentFragment(),ie=document.createElement("div");return ie.setAttribute("data-section","textBox"),ie.setAttribute("data-index",G),ie.innerHTML=re,setTimeout(()=>{m&&ie.querySelector('[data-input="text"]').focus()},100),ie.querySelector('[data-input="font"]').value=U[G].font,ie.querySelector('[data-input="textAlign"]').value=U[G].textAlign,ie.querySelector('[data-input="allCaps"]').checked=U[G].allCaps,le.appendChild(ie)}function g(){const G=document.querySelectorAll('[data-input="text"]').length;U.push(Object.assign({},N)),l.appendChild(F(G))}function L(G){G!=null&&(b.clearRect(0,0,_.width,_.height),b.drawImage(G,0,0,_.width,_.height),U.forEach(function(re,le){b.font=`${re.fontSize}px ${re.font}`;const ie=le+1,ce=b.measureText("M").width+20,te=re.textAlign==="center"||!re.textAlign?_.width/2:re.textAlign==="left"?0:_.width,he=Number.isNaN(Number(re.shadowBlur))?3:Number(re.shadowBlur),z=re.allCaps===!0?re.text.toUpperCase():re.text;b.fillStyle=re.fillColor,b.textAlign=re.textAlign,b.save(),he!==0&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=he,b.shadowColor=re.shadowColor),b.fillText(z,te+Number(re.offsetX),le===1?_.height-20+Number(re.offsetY):ce*(ie-1||1)+Number(re.offsetY)),b.restore()}))}k.addEventListener("click",g,!1),r.addEventListener("click",h,!1),l.appendChild(F(0)),l.appendChild(F(1)),l.addEventListener("input",G=>{const re=G.target,le=Number(re.closest('[data-section="textBox"]').getAttribute("data-index"));let ie;re.matches('[data-input="text"]')?ie="text":re.matches('[data-input="fillColor"]')?ie="fillColor":re.matches('[data-input="shadowColor"]')?ie="shadowColor":re.matches('[data-input="font"]')?ie="font":re.matches('[data-input="fontSize"]')?ie="fontSize":re.matches('[data-input="textAlign"]')?ie="textAlign":re.matches('[data-input="shadowBlur"]')?ie="shadowBlur":re.matches('[data-input="offsetY"]')?ie="offsetY":re.matches('[data-input="offsetX"]')&&(ie="offsetX"),ie&&$(re,le,ie)},!1),l.addEventListener("change",G=>{const re=G.target,le=Number(re.closest('[data-section="textBox"]').getAttribute("data-index"));let ie;re.matches('[data-input="allCaps"]')&&(ie="allCaps"),ie&&$(re,le,ie)},!1),window.handleFileSelect=H})()});export default it();
